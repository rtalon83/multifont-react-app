{"version":3,"sources":["images/logo_app.png","images/error.png","utils/Observer.js","components/popups/PopupType.js","components/header/Header.js","components/main/TextureView.js","components/main/Tester.js","components/main/Viewer.js","utils/ImagesLoader.js","components/main/atlas/AtlasItems.js","components/main/atlas/AtlasList.js","utils/packing/packers/Packer.js","utils/packing/packers/MaxRectsPacker.js","utils/packing/packers/math/Rect.js","utils/packing/packers/MaxRectsBin.js","utils/packing/packers/OptimalPacker.js","utils/packing/packers/index.js","model/constants/background.js","utils/connection/ajax.js","utils/exporter/Parser.js","utils/exporter/Export.js","components/main/Properties.js","utils/SpriteSplitter.js","model/Character.js","model/BitmapFontData.js","utils/packing/Trimmer.js","utils/TextureRenderer.js","utils/packing/PackProcessor.js","images/loading.gif","components/popups/Popup.js","App.js","index.js"],"names":["module","exports","EVENT","Observer","EventEmitter","POPUP","Header","props","onAboutClicked","bind","event","emit","type","className","src","logo","alt","appInfo","version","onClick","this","Component","TextureView","onViewClick","updateView","view","ReactDOM","findDOMNode","refs","width","buffer","height","style","Math","floor","scale","ctx","getContext","clearRect","selectedChar","globalAlpha","drawImage","fontId","bitmapfonts","hasOwnProperty","fontData","characters","charData","frame","w","h","rotated","x","y","beginPath","rect","stroke","textureBack","item","strokeStyle","fillStyle","lineWidth","fillRect","moveTo","lineTo","charFound","charId","selectedFont","getBoundingClientRect","clientX","left","clientY","top","multifont","charClicked","getCharByClick","preventDefault","stopPropagation","ref","React","Tester","_testMessage","updateResult","on","selectedfont","canvas","canvasTextResult","currentTarget","value","i","charsToShow","split","len","length","fromX","fromY","lineHeight","spaceWidth","tabWidth","getCharByText","xoffset","yoffset","image","xadvance","onChange","Viewer","onFontSelected","onCharSelected","onCharChanged","onChangeBackgroundTexture","blurHandler","state","packResult","updateViewer","data","setState","getCharById","text","views","ix","input","push","key","maxLength","id","defaultValue","autoFocus","onBlur","tabIndex","TYPES","ImagesLoader","_data","_images","onEnd","checkDone","callBack","loadNext","shift","indexOf","img","Image","reader","FileReader","onload","target","result","_base64","name","readAsDataURL","ready","Object","keys","complete","setTimeout","AtlasItems","onSelect","_divSelected","it_0","list","map","index","AtlasList","onFilesDrop","onDragOver","onLoadImagesComplete","atlas","dataTransfer","files","message","load","names","dropHelp","onDrop","METHOD","Default","Packer","Error","description","Smart","SmartArea","Square","SquareArea","SmartSquare","SmartSquareArea","MaxRectsPacker","allowRotate","binWidth","binHeight","method","options","smart","pot","square","allowRotation","logic","PACKING_LOGIC","MAX_EDGE","MAX_AREA","packer","MaxRectsPackerEngine","addArray","rects","bins","res","rot","Rect","other","hitTest","a","b","BestShortSideFit","BestLongSideFit","BestAreaFit","BottomLeftRule","ContactPointRule","MaxRectsBin","usedRectangles","freeRectangles","insert2","newNode","score1","score2","_findPositionForNewNodeBestShortSideFit","_findPositionForNewNodeBottomLeft","_findPositionForNewNodeContactPoint","_findPositionForNewNodeBestLongSideFit","_findPositionForNewNodeBestAreaFit","_placeRectangle","rectangles","bestScore1","Infinity","bestScore2","bestRectangleIndex","bestNode","_scoreRectangle","splice","node","numRectanglesToProcess","_splitFreeNode","_pruneFreeList","usedSurfaceArea","bestY","bestX","topSideY","bestShortSideFit","bestLongSideFit","leftoverHoriz","leftoverVert","shortSideFit","longSideFit","abs","min","max","flippedLeftoverHoriz","flippedLeftoverVert","flippedShortSideFit","flippedLongSideFit","bestAreaFit","areaFit","i1start","i1end","i2start","i2end","score","_commonIntervalLength","bestContactScore","_contactPointScoreNode","freeNode","usedNode","clone","j","Automatic","OptimalPacker","getPackerByType","TEXTURES_BACKGROUND","createHTTPQuery","params","query","encodeURIComponent","join","createXMLHTTPRequest","url","callback","errorCallback","dataType","xmlhttp","window","XMLHttpRequest","onreadystatechange","readyState","status","response","responseXML","responseText","statusText","send","open","responseType","setRequestHeader","SPECIAL_CHAR","CODE","ID","Parser","parsed","code","letter","size","textureName","textureFormat","chars","parseChar","fontParsed","Exporter","packOptions","mtsFile","exporter","template","multiFont","parseFont","parseMultiFont","results","loadTemplate","imageData","toDataURL","parts","content","base64","zip","JSZip","file","generateAsync","then","FileSaver","saveAs","fileName","Promise","resolve","reject","GET","renderTemplate","mustache","render","e","Properties","changeTab","toggleChange","onFontPropChanged","onPackerChange","startExport","setBack","onToggleSwitchChange","onExporterChanged","onDimChanged","methodItems","setPackDefault","updatePackerMethods","multiTexture","getExporterByType","disabled","allowTrim","trimmode","toggleSwitch","allowMultiFont","allowOneFont","checked","emitChanges","updateFontProps","bmpfSelected","monoSpace","monospace","asciiCode","xOffSet","yOffSet","xAdvance","assign","fixedSize","powerOfTwo","trimMode","detectIdentical","packers","packerMethod","methods","document","getElementById","click","tab_font","display","tab_properties","tab_button_pack","refTabButtonFont","tab_button_font","replace","refTabButtonPack","currentPacker","Number","setCharMonospace","classNames","keyCode","which","onKeyDown","defaultChecked","Textures","readOnly","SpriteSplitter","_listSelections","_img","_rawData","_refPixel","_fontName","_auxCanvas","createElement","fontName","getImageData","getPixel","next","selectFrameAt","firstPixel","findNextStartPixel","isFinalPixel","selection","selectFrame","uuidv4","imagedata","expandFromPixel","isFinished","expandFromAllDirections","offset","expandToTheRight","expandToTheBottom","expandToTheLeft","expandToTheTop","isLineEmptyToTheTop","xToCheck","yToCheck","isEmptyPixel","isLineEmptyToTheLeft","isLineEmptyToTheRight","isLineEmptyToTheBottom","red","green","blue","alpha","targetPixel","searchPixel","pixel","undefined","maxX","isPixelInSelections","selections","findSelectionOfPixel","filter","minX","minY","maxY","Character","_text","_code","_frame","_sourceSize","_spriteSourceSize","_image","_rotated","_xoffset","_yoffset","_xadvance","charCodeAt","BitmapFontData","_name","slice","_fileName","_size","_lineHeight","_spaceWidth","_tabWidth","_monospace","_monospaceValue","_characters","chara","maxWidth","maxHeight","Trimmer","threshold","getAlpha","cns","spaces","right","bottom","getLeftSpace","getRightSpace","getTopSpace","getBottomSpace","trimmed","spriteSourceSize","TextureRenderer","_buffer","imageSmoothingEnabled","disableSmoothing","getSize","renderItem","val","tempBuffer","round","extrude","dx","dy","sourceSize","skipRender","save","translate","rotate","PI","renderExtrude","restore","padding","sw","log","sh","pw","pow","ph","PackProcessor","identical","rect1","n","rect2","clones","removeIdentical","originalFile","cloned","images","onComplete","onError","minWidth","minHeight","alphaThreshold","sort","console","error","trim","optimalRes","getAllPackers","allPackers","packerClass","MaxRectsBinPack","packerCombos","optimalSheets","optimalEfficiency","sourceArea","combo","sheetArea","_rects","_identical","pack","applyIdentical","removeRect","sheets","efficiency","Popup","onShowPopup","onClosePopup","popup","href","github","issues","loading","App","onAtlasListChanged","onCharImageLoaded","onPackOptionsChanged","_bitmapFonts","_packResult","_packCharas","_packOptions","_spriteSplitter","_totalCharasToLoad","_numCharasLoaded","_selectedFont","getImageCharas","doPack","listCharas","charas","concat","auxCanvas","auxCtx","putImageData","addEventListener","_id","removeEventListener","renderer","updateBitmapFonts","startExporter"],"mappings":"6/CAAAA,EAAOC,QAAU,kjK,uCCAjBD,EAAOC,QAAU,s4G,4RCEXC,EACkB,qBADlBA,EAEc,iBAFdA,EAGoB,uBAHpBA,EAKY,eALZA,EAOa,gBAPbA,EAQa,gBARbA,EAUa,gBAVbA,EAW0B,6BAX1BA,EAYU,aAZVA,EAaW,cAGXC,EAAW,IAAIC,IClBfC,EACK,cADLA,EAEO,gBAFPA,EAGO,gBAHPA,EAIe,wB,wBCkCNC,G,wDA5BX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAGDC,eAAiB,EAAKA,eAAeC,KAApB,gBAJP,E,2DAOJC,GACXP,EAASQ,KAAKT,EAAkB,CAC5BU,KAAMP,M,+BAKV,OACI,yBAAKQ,UAAU,UACX,yBAAKA,UAAU,gBACX,yBAAKC,IAAKC,IAAMC,IAAI,SACpB,yBAAKH,UAAU,SAAf,yBAA8CI,EAAQC,UAE1D,yBAAKL,UAAU,SACX,0BAAMM,QAASC,KAAKZ,gBAApB,e,GAtBCa,cCmLNC,G,wDArLX,WAAYf,GAAQ,IAAD,8BACf,cAAMA,IAEDgB,YAAc,EAAKA,YAAYd,KAAjB,gBAHJ,E,gEAOfW,KAAKI,e,2CAILJ,KAAKI,e,mCAIL,IAAIC,EAAOC,IAASC,YAAYP,KAAKQ,KAAKH,MAC1C,GAAIA,EAAM,CACNA,EAAKI,MAAQT,KAAKb,MAAMuB,OAAOD,MAC/BJ,EAAKM,OAASX,KAAKb,MAAMuB,OAAOC,OAEhCN,EAAKO,MAAMH,MAAQI,KAAKC,MAAMT,EAAKI,MAAQT,KAAKb,MAAM4B,OAAS,KAC/DV,EAAKO,MAAMD,OAASE,KAAKC,MAAMT,EAAKM,OAASX,KAAKb,MAAM4B,OAAS,KAEjE,IAAIC,EAAMX,EAAKY,WAAW,MAuB1B,GArBAD,EAAIE,UAAU,EAAG,EAAGb,EAAKI,MAAOJ,EAAKM,QAKjCX,KAAKb,MAAMgC,eACXH,EAAII,YAAc,KAGtBJ,EAAIK,UAAUrB,KAAKb,MAAMuB,OAAQ,EAAG,EAAGL,EAAKI,MAAOJ,EAAKM,OAAQ,EAAG,EAAGN,EAAKI,MAAOJ,EAAKM,QAUvFK,EAAII,YAAc,EAEdpB,KAAKb,MAAMgC,aACX,IAAK,IAAMG,KAAUtB,KAAKb,MAAMoC,YAC5B,GAAIvB,KAAKb,MAAMoC,YAAYC,eAAeF,GAAS,CAC/C,IAAMG,EAAWzB,KAAKb,MAAMoC,YAAYD,GAExC,GAAIG,EAASC,WAAWF,eAAexB,KAAKb,MAAMgC,cAAe,CAC7D,IAAMQ,EAAWF,EAASC,WAAW1B,KAAKb,MAAMgC,cAE5CS,EAAQD,EAASC,MAEjBC,EAAID,EAAMC,EAAGC,EAAIF,EAAME,EACvBH,EAASI,UACTF,EAAID,EAAME,EACVA,EAAIF,EAAMC,GAGdb,EAAIE,UAAUU,EAAMI,EAAGJ,EAAMK,EAAGJ,EAAGC,GACnCd,EAAIK,UAAUrB,KAAKb,MAAMuB,OAAQkB,EAAMI,EAAGJ,EAAMK,EAAGJ,EAAGC,EAAGF,EAAMI,EAAGJ,EAAMK,EAAGJ,EAAGC,GAI9Ed,EAAIkB,YAKJlB,EAAImB,KAAKP,EAAMI,EAAGJ,EAAMK,EAAGJ,EAAGC,GAE9Bd,EAAIoB,UAMpB/B,EAAKZ,UAAYO,KAAKb,MAAMkD,e,kCAIxBrB,EAAKsB,GACb,IAAIV,EAAQU,EAAKV,MACbC,EAAID,EAAMC,EAAGC,EAAIF,EAAME,EACvBQ,EAAKP,UACLF,EAAID,EAAME,EACVA,EAAIF,EAAMC,GAGdb,EAAIuB,YAAc,OAClBvB,EAAIwB,UAAY,qBAChBxB,EAAIyB,UAAY,EAEhBzB,EAAIkB,YACJlB,EAAI0B,SAASd,EAAMI,EAAGJ,EAAMK,EAAGJ,EAAGC,GAClCd,EAAImB,KAAKP,EAAMI,EAAGJ,EAAMK,EAAGJ,EAAGC,GAC9Bd,EAAI2B,OAAOf,EAAMI,EAAGJ,EAAMK,GAC1BjB,EAAI4B,OAAOhB,EAAMI,EAAIH,EAAGD,EAAMK,EAAIH,GAClCd,EAAIoB,W,qCAGOX,EAAUO,EAAGC,GACxB,IAAIY,EAAY,KAEhB,IAAK,IAAMC,KAAUrB,EAASC,WAC1B,GAAID,EAASC,WAAWF,eAAesB,GAAS,CAC5C,IAAMnB,EAAWF,EAASC,WAAWoB,GAEjCjB,EAAIF,EAASC,MAAMC,EACnBC,EAAIH,EAASC,MAAME,EAMvB,GALIH,EAASI,UACTF,EAAIF,EAASC,MAAME,EACnBA,EAAIH,EAASC,MAAMC,GAGnBG,GAAKL,EAASC,MAAMI,GAAKA,EAAIL,EAASC,MAAMI,EAAIH,GAAKI,GAAKN,EAASC,MAAMK,GAAKA,EAAIN,EAASC,MAAMK,EAAIH,EAAG,CACxGe,EAAYC,EACZ,OAKZ,OAAOD,I,kCAGCvD,GACR,IAAI6B,EAAe,KACf4B,EAAe/C,KAAKb,MAAM4D,aAGxBZ,EADS7B,IAASC,YAAYP,KAAKQ,KAAKH,MAC1B2C,wBACdhB,GAAK1C,EAAM2D,QAAUd,EAAKe,MAAQlD,KAAKb,MAAM4B,MAC7CkB,GAAK3C,EAAM6D,QAAUhB,EAAKiB,KAAOpD,KAAKb,MAAM4B,MAGlD,GAAIf,KAAKb,MAAMkE,WACX,IAAK,IAAM/B,KAAUtB,KAAKb,MAAMoC,YAC5B,GAAIvB,KAAKb,MAAMoC,YAAYC,eAAeF,GAAS,CAC/C,IAAIgC,EAActD,KAAKuD,eAAevD,KAAKb,MAAMoC,YAAYD,GAASU,EAAGC,GACzE,GAAIqB,EAAa,CACbnC,EAAemC,EACfP,EAAezB,EACf,YAKX,CACD,IAAIgC,EAActD,KAAKuD,eAAevD,KAAKb,MAAMoC,YAAYvB,KAAKb,MAAM4D,cAAef,EAAGC,GACtFqB,IACAnC,EAAemC,EACfP,EAAe/C,KAAKb,MAAM4D,cAelC,OAXI5B,IACAnB,KAAKI,aAELrB,EAASQ,KAAKT,EAAqB,CAC/BqC,aAAcA,EACd4B,aAAcA,KAItBzD,EAAMkE,iBACNlE,EAAMmE,mBACC,I,+BAIP,OACI,yBAAKC,IAAI,QACL,4BAAQA,IAAI,OAAO3D,QAASC,KAAKG,mB,GAhLvBwD,IAAM1D,YCyFjB2D,E,kDA1FX,WAAYzE,GAAQ,IAAD,8BACf,cAAMA,IAGD0E,aAAe,GAGpB,EAAKC,aAAe,EAAKA,aAAazE,KAAlB,gBAGpBN,EAASgF,GAAGjF,EAAqB,EAAKgF,cAVvB,E,iEAcf9D,KAAK8D,iB,qCAGmB,IAAfxE,EAAc,uDAAN,KACjB,GAA+B,MAA3BU,KAAKb,MAAM6E,cAIXhE,KAAKb,MAAMoC,YAAYC,eAAexB,KAAKb,MAAM6E,cAAe,CAChE,IAAMvC,EAAWzB,KAAKb,MAAMoC,YAAYvB,KAAKb,MAAM6E,cAI/CC,EAAS3D,IAASC,YAAYP,KAAKQ,KAAK0D,kBACxClD,EAAMiD,EAAOhD,WAAW,MAE5BgD,EAAOxD,MAAQ,KACfwD,EAAOtD,OAAS,IAChBK,EAAIE,UAAU,EAAG,EAAG+C,EAAOxD,MAAOwD,EAAOtD,QAErCrB,IACAU,KAAK6D,aAAevE,EAAM6E,cAAcC,OAG5C,IAEIC,EAFEC,EAActE,KAAK6D,aAAaU,MAAM,IACtCC,EAAMF,EAAYG,OAEpBC,EAAQ,EACRC,EAAQ,EAEZ,IAAKN,EAAI,EAAGA,EAAIG,EAAKH,IACjB,GAAuB,OAAnBC,EAAYD,GACZM,GAAS3E,KAAKb,MAAMoC,YAAYvB,KAAKb,MAAM6E,cAAcY,WACzDF,EAAQ,OAEP,GAAuB,MAAnBJ,EAAYD,GACjBK,GAAS1E,KAAKb,MAAMoC,YAAYvB,KAAKb,MAAM6E,cAAca,gBAExD,GAAuB,OAAnBP,EAAYD,GACjBK,GAAS1E,KAAKb,MAAMoC,YAAYvB,KAAKb,MAAM6E,cAAcc,aAExD,CACD,IAAMnD,EAAWF,EAASsD,cAAcT,EAAYD,IAEpD,GAAI1C,EAAU,CACV,IAAMqD,EAAUN,EAAQ/C,EAASqD,QAC3BC,EAAUN,EAAQhD,EAASsD,QAEjCjE,EAAIK,UAAUM,EAASuD,MAAOF,EAASC,GACvCP,GAAS/C,EAASwD,c,+BAQlC,OACI,yBAAK1F,UAAU,iBACX,yBAAKA,UAAU,eACX,yBAAKA,UAAU,oBAAf,cACA,6BACI,8BAAUA,UAAU,YAAYiE,IAAI,YAAY0B,SAAUpF,KAAK8D,iBAGvE,yBAAKrE,UAAU,eACX,yBAAKA,UAAU,oBAAf,cACA,yBAAKA,UAAU,sBACX,4BAAQiE,IAAI,4B,GAnFfzD,aC2INoF,E,kDAvIX,WAAYlG,GAAQ,IAAD,8BACf,cAAMA,IAEDmG,eAAiB,EAAKA,eAAejG,KAApB,gBACtB,EAAKkG,eAAiB,EAAKA,eAAelG,KAApB,gBACtB,EAAKmG,cAAgB,EAAKA,cAAcnG,KAAnB,gBACrB,EAAKoG,0BAA4B,EAAKA,0BAA0BpG,KAA/B,gBACjC,EAAKqG,YAAc,EAAKA,YAAYrG,KAAjB,gBAEnB,EAAKsG,MAAQ,CACTtD,YAAa,eACbuD,WAAY,KACZzE,aAAc,KACd4B,aAAc,MAGlBhE,EAASgF,GAAGjF,EAAqB,EAAKwG,gBACtCvG,EAASgF,GAAGjF,EAAqB,EAAKyG,gBACtCxG,EAASgF,GAAGjF,EAAsB,EAAK+G,aAAvC,gBACA9G,EAASgF,GAAGjF,EAAkC,EAAK2G,2BAnBpC,E,sEAsBOK,GACtB9F,KAAK+F,SAAS,CACV1D,YAAayD,M,qCAINA,GACX9F,KAAK+F,SAAS,CACV5E,aAAc2E,EAAK3E,aACnB4B,aAAc+C,EAAK/C,iB,oCAIb+C,GACV,IAAMnE,EAAW3B,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAciD,YAAYhG,KAAK2F,MAAMxE,cACpFQ,IACAA,EAASsE,KAAOH,EAAK3B,cAAcC,OAGvCrF,EAASQ,KAAKT,EAAqB,CAC/BqC,aAAcnB,KAAK2F,MAAMxE,aACzB4B,aAAc/C,KAAK2F,MAAM5C,iB,qCAIlB+C,GACX9F,KAAK+F,SAAS,CACVhD,aAAc+C,EAAK/C,aACnB5B,aAAc,S,mCAIT2E,GACJ9F,KAAK2F,MAAM5C,eACZ/C,KAAK2F,MAAM5C,aAAe+C,EAAK,GAAG/C,cAGtC/C,KAAK2F,MAAMxE,aAAe,KAC1BnB,KAAK+F,SAAS,CAACH,WAAYE,M,oCAI3B9F,KAAK+F,SAAS,CACV5E,aAAc,S,+BAKlB,IAAI+E,EAAQ,GAAIC,EAAK,EACjBC,EAAQ,GAEZ,GAAIpG,KAAK2F,MAAMC,WAAY,CAAC,IAAD,gBACN5F,KAAK2F,MAAMC,YADL,IACvB,2BAAwC,CAAC,IAAhCtD,EAA+B,QACpC4D,EAAMG,KACF,kBAAC,EAAD,CAAaC,IAAK,YAAcH,EACnBzF,OAAQ4B,EAAK5B,OACb2B,YAAarC,KAAK2F,MAAMtD,YACxBd,YAAavB,KAAKb,MAAMoC,YACxBR,MAAO,EACPsC,UAAWf,EAAKe,UAChBlC,aAAcnB,KAAK2F,MAAMxE,aACzB4B,aAAc/C,KAAK2F,MAAM5C,gBAG1CoD,KAbmB,+BAiB3B,GAAInG,KAAK2F,MAAMxE,aACX,IAAK,IAAMG,KAAUtB,KAAKb,MAAMoC,YAC5B,GAAIvB,KAAKb,MAAMoC,YAAYC,eAAeF,GAAS,CAC/C,IAAMK,EAAW3B,KAAKb,MAAMoC,YAAYD,GAAQ0E,YAAYhG,KAAK2F,MAAMxE,cAEvE,GAAIQ,EAAU,CACVyE,EAAMC,KAAK,2BACPjB,SAAUpF,KAAKwF,cACfc,IAAK,KAAOtG,KAAK2F,MAAMxE,aACvBoF,UAAU,IACVC,GAAIxG,KAAK2F,MAAMxE,aACfsF,aAAc9E,EAASsE,KACvBS,WAAW,EACXjH,UAAU,eACVmB,MACI,CACIsC,KAAMvB,EAASC,MAAMI,EACrBoB,IAAKzB,EAASC,MAAMK,MAIhC,OAMhB,OACI,yBAAKxC,UAAU,eACX,yBAAKA,UAAU,UACX,yBAAKA,UAAU,yBACX,yBAAKA,UAAU,kBACX,yBAAKA,UAAU,eAAekH,OAAQ3G,KAAK0F,YAAakB,SAAU,GAC7DR,GAEJF,IAGT,kBAAC,EAAD,CAAQ3E,YAAavB,KAAKb,MAAMoC,YAAayC,aAAchE,KAAK2F,MAAM5C,qB,GAjIrE9C,aCPf4G,EAAQ,CAAC,YAAa,YAAa,aAAc,aAE1CC,EAAb,WACI,aAAe,oBACX9G,KAAK+G,MAAQ,KAEb/G,KAAKgH,QAAU,GAGfhH,KAAKiH,MAAQ,KACbjH,KAAKkH,UAAYlH,KAAKkH,UAAU7H,KAAKW,MAR7C,iDAeS8F,EAAMqB,GACP,IAAI9C,EACEG,EAAMsB,EAAKrB,OAIjB,IAFAzE,KAAK+G,MAAQ,GAER1C,EAAI,EAAGA,EAAIG,EAAKH,IACjBrE,KAAK+G,MAAMV,KAAKP,EAAKzB,IAGzBrE,KAAKiH,MAAQE,EACbnH,KAAKoH,aA1Bb,iCA6BgB,IAAD,OACP,GAAIpH,KAAK+G,MAAMtC,OAAS,EAAG,CACvB,IAAInC,EAAOtC,KAAK+G,MAAMM,QAEtB,IAAkC,IAA9BR,EAAMS,QAAQhF,EAAK9C,MAAc,CACjC,IAAI+H,EAAM,IAAIC,MAEVC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAAArI,GACZiI,EAAI7H,IAAMJ,EAAMsI,OAAOC,OACvBN,EAAIO,QAAUxI,EAAMsI,OAAOC,OAE3B,EAAKb,QAAQ1E,EAAKyF,MAAQR,EAC1B,EAAKH,YAGTK,EAAOO,cAAc1F,QAGrBtC,KAAKoH,gBAITpH,KAAKkH,cApDjB,kCA2DQ,IAFA,IAAIe,GAAQ,EAEZ,MAAgBC,OAAOC,KAAKnI,KAAKgH,SAAjC,eAA2C,CAAtC,IAAIV,EAAG,KACR,IAAKtG,KAAKgH,QAAQV,GAAK8B,SAAU,CAC7BH,GAAQ,EACR,OAIJA,EACAjI,KAAKiH,MAAMjH,KAAKgH,SAGhBqB,WAAWrI,KAAKkH,UAAW,QAtEvC,KCiEeoB,G,wDA5DX,WAAYnJ,GAAQ,IAAD,8BACf,cAAMA,IAGDoJ,SAAW,EAAKA,SAASlJ,KAAd,gBAEhB,EAAKmJ,aAAe,KANL,E,qDASVlJ,GAgBL,OAfAP,EAASQ,KAAKT,EAAqB,CAC/BiE,aAAczD,EAAM6E,cAAcqC,GAClCrF,aAAc,OAGlB7B,EAAM6E,cAAc1E,UAAY,6BAE3BO,KAAKwI,eACNxI,KAAKwI,aAAa/I,UAAY,gBAGlCO,KAAKwI,aAAelJ,EAAM6E,cAE1B7E,EAAMkE,iBACNlE,EAAMmE,mBACC,I,2CAIFzD,KAAKb,MAAM2G,MAA6B,MAArB9F,KAAKwI,eACzBxI,KAAKwI,aAAelI,IAASC,YAAYP,KAAKQ,KAAKiI,MACnDzI,KAAKwI,aAAa/I,UAAY,gC,+BAI5B,IAAD,OACC0I,EAAOD,OAAOC,KAAKnI,KAAKb,MAAM2G,MAEpC,GAAIqC,EAAK1D,OAAS,EAAG,CACjB,IAAMiE,EAAOP,EAAKQ,KAAI,SAACrG,EAAMsG,GAAP,OAClB,yBAAKtC,IAAK,MAAQsC,EAAOnJ,UAAU,eAAe+G,GAAIlE,EAAMoB,IAAK,MAAQkF,EAAO7I,QAAS,EAAKwI,UAC1F,yBAAK9I,UAAU,wBACX,yBAAKA,UAAU,aAAaG,IAAK,SAAUF,IAAK,EAAKP,MAAM2G,KAAKxD,GAAM5C,OAE1E,yBAAKD,UAAU,uBAAuB6C,OAI9C,OACI,6BACKoG,GAKT,OAAQ,mC,GAxDKzI,cCsEV4I,G,wDAlEX,WAAY1J,GAAQ,IAAD,8BACf,cAAMA,IAGD2J,YAAc,EAAKA,YAAYzJ,KAAjB,gBACnB,EAAK0J,WAAa,EAAKA,WAAW1J,KAAhB,gBAClB,EAAK2J,qBAAuB,EAAKA,qBAAqB3J,KAA1B,gBAE5B,EAAKsG,MAAQ,CACTsD,MAAO,IATI,E,wDAaP3J,IACRA,EAAMkE,iBAEFlE,EAAM4J,aAAaC,MAAM1E,UAEzB1F,EAASQ,KAAKT,EAAkB,CAC5BsK,QAAS,uBACT5J,KAAMP,KAGK,IAAI6H,GACZuC,KAAK/J,EAAM4J,aAAaC,MAAOnJ,KAAKgJ,uBAG/C,OAAO,I,iCAGA1J,GACPA,EAAMkE,mB,2CAGWlE,GACjB,IAAMgK,EAAQpB,OAAOC,KAAK7I,GAE1B,GAAIgK,EAAM7E,OAAQ,CACd,IADc,EACVwE,EAAQjJ,KAAK2F,MAAMsD,MADT,cAGKK,GAHL,IAGd,2BAA0B,CAAC,IAAhBvB,EAAe,QACtBkB,EAAMlB,GAAQzI,EAAMyI,IAJV,8BAOd/H,KAAK+F,SAAS,CACVkD,MAAOA,IAGXlK,EAASQ,KAAKT,EAA0BmK,M,+BAK5C,IAAMM,EAAWrB,OAAOC,KAAKnI,KAAK2F,MAAMsD,OAAOxE,OAAS,EAAI,KAAQ,yBAAKf,IAAI,WAAWjE,UAAU,mBAA9B,2BAEpE,OACI,yBAAKA,UAAU,aAAa+J,OAAQxJ,KAAK8I,YAAaC,WAAY/I,KAAK+I,YACnE,6BACI,kBAAC,EAAD,CAAYjD,KAAM9F,KAAK2F,MAAMsD,QAC5BM,Q,GA5DGtJ,cCTlBwJ,EAAS,CACXC,QAAS,WA0BEC,E,WArBX,aAAe,oB,mDAIX,MAAMC,MAAM,oC,wCAaZ,MAAO,CAAC7B,KAAM,UAAW8B,YAAa,uB,2BARtC,MAAO,Y,8BAIP,OAAOJ,M,aChBTA,EAAS,CACXK,MAAO,QACPC,UAAW,YACXC,OAAQ,SACRC,WAAY,aACZC,YAAa,cACbC,gBAAiB,mBA4ENC,E,kDAxEX,WAAY3J,EAAOE,GAA4B,IAAD,EAAnB0J,EAAmB,oFAC1C,gBAEKC,SAAW7J,EAChB,EAAK8J,UAAY5J,EACjB,EAAK0J,YAAcA,EALuB,E,iDAQzCvE,EAAM0E,GACP,IADe,EACXC,EAAU,CACVC,MAAQF,IAAWf,EAAOK,OAASU,IAAWf,EAAOM,WAAaS,IAAWf,EAAOS,aAAeM,IAAWf,EAAOU,gBACrHQ,KAAK,EACLC,OAASJ,IAAWf,EAAOO,QAAUQ,IAAWf,EAAOQ,YAAcO,IAAWf,EAAOS,aAAeM,IAAWf,EAAOU,gBACxHU,cAAe7K,KAAKqK,YACpBS,MAAQN,IAAWf,EAAOK,OAASU,IAAWf,EAAOO,QAAUQ,IAAWf,EAAOS,YAAea,IAAcC,SAAWD,IAAcE,UAGvIC,EAAS,IAAIC,IAAqBnL,KAAKsK,SAAUtK,KAAKuK,UAAW,EAAGE,GAEpErE,EAAQ,GAXG,cAaCN,GAbD,IAaf,IAAI,EAAJ,qBAAsB,CAAC,IAAfxD,EAAc,QAClB8D,EAAMC,KAAK,CAAC5F,MAAO6B,EAAKV,MAAMC,EAAGlB,OAAQ2B,EAAKV,MAAME,EAAGgE,KAAMxD,KAdlD,8BAiBf4I,EAAOE,SAAShF,GAEhB,IAnBe,EAoBXiF,EADMH,EAAOI,KAAK,GACND,MAEZE,EAAM,GAtBK,cAwBCF,GAxBD,IAwBf,IAAI,EAAJ,qBAAuB,CAAC,IAAhB/I,EAAe,QACnBA,EAAKwD,KAAKlE,MAAMI,EAAIM,EAAKN,EACzBM,EAAKwD,KAAKlE,MAAMK,EAAIK,EAAKL,EACrBK,EAAKkJ,MACLlJ,EAAKwD,KAAK/D,SAAU,GAExBwJ,EAAIlF,KAAK/D,EAAKwD,OA9BH,8BAiCf,OAAOyF,K,wCAWmB,IAAR/E,EAAO,uDAAJ,GACrB,OAAOA,GACH,KAAKiD,EAAOK,MACR,MAAO,CAAC/B,KAAM,mBAAoB8B,YAAa,IACnD,KAAKJ,EAAOM,UACR,MAAO,CAAChC,KAAM,mBAAoB8B,YAAa,IACnD,KAAKJ,EAAOO,OACR,MAAO,CAACjC,KAAM,oBAAqB8B,YAAa,IACpD,KAAKJ,EAAOQ,WACR,MAAO,CAAClC,KAAM,oBAAqB8B,YAAa,IACpD,KAAKJ,EAAOS,YACR,MAAO,CAACnC,KAAM,0BAA2B8B,YAAa,IAC1D,KAAKJ,EAAOU,gBACR,MAAO,CAACpC,KAAM,0BAA2B8B,YAAa,IAC1D,QACI,MAAMD,MAAM,kBAAoBpD,M,2BAtBxC,MAAO,mB,8BAIP,OAAOiD,M,GAlDcE,GCSd8B,E,WApBX,aAA0C,IAA9BzJ,EAA6B,uDAA3B,EAAGC,EAAwB,uDAAtB,EAAGxB,EAAmB,uDAAb,EAAGE,EAAU,uDAAH,EAAG,oBACrCX,KAAKgC,EAAIA,EACThC,KAAKiC,EAAIA,EACTjC,KAAKS,MAAQA,EACbT,KAAKW,OAASA,E,oDAId,OAAO,IAAI8K,EAAKzL,KAAKgC,EAAGhC,KAAKiC,EAAGjC,KAAKS,MAAOT,KAAKW,U,8BAG7C+K,GACJ,OAAOD,EAAKE,QAAQ3L,KAAM0L,M,+BAGfE,EAAGC,GACd,OAAOD,EAAE5J,GAAK6J,EAAE7J,GAAK4J,EAAE3J,GAAK4J,EAAE5J,GAAK2J,EAAE5J,EAAE4J,EAAEnL,OAASoL,EAAE7J,EAAE6J,EAAEpL,OAASmL,EAAE3J,EAAE2J,EAAEjL,QAAUkL,EAAE5J,EAAE4J,EAAElL,W,KCdzF8I,EAAS,CACXqC,iBAAkB,mBAClBC,gBAAiB,kBACjBC,YAAa,cACbC,eAAgB,iBAChBC,iBAAkB,oBAiePC,E,kDA5dX,WAAY1L,EAAOE,GAA4B,IAAD,EAAnB0J,EAAmB,oFAC1C,gBAEK+B,eAAiB,GACtB,EAAKC,eAAiB,GAEtB,EAAK/B,SAAW7J,EAChB,EAAK8J,UAAY5J,EACjB,EAAK0J,YAAcA,EAEnB,EAAKgC,eAAehG,KAAK,IAAIoF,EAAK,EAAG,EAAGhL,EAAOE,IAVL,E,iDAazCmF,EAAM0E,GAEP,OADUxK,KAAKsM,QAAQxG,EAAM0E,K,6BAI1B/J,EAAOE,GAAyC,IAAjC6J,EAAgC,uDAAzBf,EAAOqC,iBAC5BS,EAAU,IAAId,EACde,EAAS,CAACpI,MAAM,GAChBqI,EAAS,CAACrI,MAAM,GAEpB,OAAOoG,GACH,KAAKf,EAAOqC,iBACRS,EAAUvM,KAAK0M,wCAAwCjM,EAAOE,EAAQ6L,EAAQC,GAC9E,MACJ,KAAKhD,EAAOwC,eACRM,EAAUvM,KAAK2M,kCAAkClM,EAAOE,EAAQ6L,EAAQC,GACxE,MACJ,KAAKhD,EAAOyC,iBACRK,EAAUvM,KAAK4M,oCAAoCnM,EAAOE,EAAQ6L,GAClE,MACJ,KAAK/C,EAAOsC,gBACRQ,EAAUvM,KAAK6M,uCAAuCpM,EAAOE,EAAQ8L,EAAQD,GAC7E,MACJ,KAAK/C,EAAOuC,YACRO,EAAUvM,KAAK8M,mCAAmCrM,EAAOE,EAAQ6L,EAAQC,GAMjF,OAAuB,IAAnBF,EAAQ5L,QAIZX,KAAK+M,gBAAgBR,GAHVA,I,8BAOPS,EAAYxC,GAGhB,IAFA,IAAIe,EAAM,GAEJyB,EAAWvI,OAAS,GAAG,CAMzB,IALA,IAAIwI,EAAaC,IACbC,EAAaD,IACbE,GAAsB,EACtBC,EAAW,IAAI5B,EAEXpH,EAAG,EAAGA,EAAI2I,EAAWvI,OAAQJ,IAAK,CACtC,IAAImI,EAAS,CAACpI,MAAM,GAChBqI,EAAS,CAACrI,MAAM,GAChBmI,EAAUvM,KAAKsN,gBAAgBN,EAAW3I,GAAGzC,MAAMC,EAAGmL,EAAW3I,GAAGzC,MAAME,EAAG0I,EAAQgC,EAAQC,IAE7FD,EAAOpI,MAAQ6I,GAAeT,EAAOpI,QAAU6I,GAAcR,EAAOrI,MAAQ+I,KAC5EF,EAAaT,EAAOpI,MACpB+I,EAAaV,EAAOrI,MACpBiJ,EAAWd,EACXa,EAAqB/I,GAI7B,IAA4B,IAAxB+I,EACA,OAAO7B,EAGXvL,KAAK+M,gBAAgBM,GACrB,IAAIlL,EAAO6K,EAAWO,OAAOH,EAAoB,GAAG,GACpDjL,EAAKP,MAAMI,EAAIqL,EAASrL,EACxBG,EAAKP,MAAMK,EAAIoL,EAASpL,EAErBE,EAAKP,MAAMC,IAAMwL,EAAS5M,OAAS0B,EAAKP,MAAME,IAAMuL,EAAS1M,SAC5DwB,EAAKJ,SAAU,GAGnBwJ,EAAIlF,KAAKlE,GAEb,OAAOoJ,I,sCAGKiC,GAEZ,IADA,IAAIC,EAAyBzN,KAAKqM,eAAe5H,OACzCJ,EAAG,EAAGA,EAAIoJ,EAAwBpJ,IAClCrE,KAAK0N,eAAe1N,KAAKqM,eAAehI,GAAImJ,KAC5CxN,KAAKqM,eAAekB,OAAOlJ,EAAE,GAC7BA,IACAoJ,KAIRzN,KAAK2N,iBACL3N,KAAKoM,eAAe/F,KAAKmH,K,sCAGb/M,EAAOE,EAAQ6J,EAAQgC,EAAQC,GAC3C,IAAIF,EAAU,IAAId,EAGlB,OAFAe,EAAOpI,MAAQ8I,IACfT,EAAOrI,MAAQ8I,IACR1C,GACH,KAAKf,EAAOqC,iBACRS,EAAUvM,KAAK0M,wCAAwCjM,EAAOE,EAAQ6L,EAAQC,GAC9E,MACJ,KAAKhD,EAAOwC,eACRM,EAAUvM,KAAK2M,kCAAkClM,EAAOE,EAAQ6L,EAAQC,GACxE,MACJ,KAAKhD,EAAOyC,iBACRK,EAAUvM,KAAK4M,oCAAoCnM,EAAOE,EAAQ6L,GAClEA,EAAOpI,OAASoI,EAAOpI,MACvB,MACJ,KAAKqF,EAAOsC,gBACRQ,EAAUvM,KAAK6M,uCAAuCpM,EAAOE,EAAQ8L,EAAQD,GAC7E,MACJ,KAAK/C,EAAOuC,YACRO,EAAUvM,KAAK8M,mCAAmCrM,EAAOE,EAAQ6L,EAAQC,GAWjF,OALuB,IAAnBF,EAAQ5L,SACR6L,EAAOpI,MAAQ8I,IACfT,EAAOrI,MAAQ8I,KAGZX,I,mCAMP,IAFA,IAAIH,EAAiBpM,KAAKoM,eACtBwB,EAAkB,EACdvJ,EAAG,EAAGA,EAAI+H,EAAe3H,OAAQJ,IACrCuJ,GAAmBxB,EAAe/H,GAAG5D,MAAQ2L,EAAe/H,GAAG1D,OAGnE,OAAOiN,GAAiB5N,KAAKsK,SAAWtK,KAAKuK,a,wDAGf9J,EAAOE,EAAQkN,EAAOC,GACpD,IAII3L,EACA4L,EALA1B,EAAiBrM,KAAKqM,eACtBgB,EAAW,IAAI5B,EAEnBoC,EAAMzJ,MAAQ8I,IAGd,IAAI,IAAI7I,EAAG,EAAGA,EAAIgI,EAAe5H,OAAQJ,KACrClC,EAAOkK,EAAehI,IACb5D,OAASA,GAAS0B,EAAKxB,QAAUA,KACtCoN,EAAW5L,EAAKF,EAAItB,GACLkN,EAAMzJ,OAAU2J,IAAaF,EAAMzJ,OAASjC,EAAKH,EAAI8L,EAAM1J,SACtEiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQA,EACjB4M,EAAS1M,OAASA,EAClBkN,EAAMzJ,MAAQ2J,EACdD,EAAM1J,MAAQjC,EAAKH,GAGvBhC,KAAKqK,aAAelI,EAAK1B,OAASE,GAAUwB,EAAKxB,QAAUF,KAC3DsN,EAAW5L,EAAKF,EAAIxB,GACLoN,EAAMzJ,OAAU2J,IAAaF,EAAMzJ,OAASjC,EAAKH,EAAI8L,EAAM1J,SACtEiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQE,EACjB0M,EAAS1M,OAASF,EAClBoN,EAAMzJ,MAAQ2J,EACdD,EAAM1J,MAAQjC,EAAKH,GAI/B,OAAOqL,I,8DAG6B5M,EAAOE,EAAQqN,EAAkBC,GACrE,IAKI9L,EACA+L,EACAC,EACAC,EACAC,EATAhC,EAAiBrM,KAAKqM,eACtBgB,EAAW,IAAI5B,EAEnBuC,EAAiB5J,MAAQ8I,IAQzB,IAAI,IAAI7I,EAAG,EAAGA,EAAIgI,EAAe5H,OAAQJ,IAAK,EAC1ClC,EAAOkK,EAAehI,IACb5D,OAASA,GAAS0B,EAAKxB,QAAUA,IACtCuN,EAAgBrN,KAAKyN,IAAInM,EAAK1B,MAAQA,GACtC0N,EAAetN,KAAKyN,IAAInM,EAAKxB,OAASA,GACtCyN,EAAevN,KAAK0N,IAAIL,EAAeC,GACvCE,EAAcxN,KAAK2N,IAAIN,EAAeC,IAElCC,EAAeJ,EAAiB5J,OAAUgK,IAAiBJ,EAAiB5J,OAASiK,EAAcJ,EAAgB7J,SACnHiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQA,EACjB4M,EAAS1M,OAASA,EAClBqN,EAAiB5J,MAAQgK,EACzBH,EAAgB7J,MAAQiK,IAIhC,IAAII,OAAoB,EACpBC,OAAmB,EACnBC,OAAmB,EACnBC,OAAkB,EAElB5O,KAAKqK,aAAelI,EAAK1B,OAASE,GAAUwB,EAAKxB,QAAUF,IAC3DgO,EAAuB5N,KAAKyN,IAAInM,EAAK1B,MAAQE,GAC7C+N,EAAsB7N,KAAKyN,IAAInM,EAAKxB,OAASF,GAC7CkO,EAAsB9N,KAAK0N,IAAIE,EAAsBC,GACrDE,EAAqB/N,KAAK2N,IAAIC,EAAsBC,IAEhDC,EAAsBX,EAAiB5J,OAAUuK,IAAwBX,EAAiB5J,OAASwK,EAAqBX,EAAgB7J,SACxIiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQE,EACjB0M,EAAS1M,OAASF,EAClBuN,EAAiB5J,MAAQuK,EACzBV,EAAgB7J,MAAQwK,IAKpC,OAAOvB,I,6DAG4B5M,EAAOE,EAAQqN,EAAkBC,GACpE,IAII9L,EACA+L,EACAC,EACAC,EACAC,EARAhC,EAAiBrM,KAAKqM,eACtBgB,EAAW,IAAI5B,EACnBwC,EAAgB7J,MAAQ8I,IAQxB,IAAI,IAAI7I,EAAG,EAAGA,EAAIgI,EAAe5H,OAAQJ,KACrClC,EAAOkK,EAAehI,IAEb5D,OAASA,GAAS0B,EAAKxB,QAAUA,IACtCuN,EAAgBrN,KAAKyN,IAAInM,EAAK1B,MAAQA,GACtC0N,EAAetN,KAAKyN,IAAInM,EAAKxB,OAASA,GACtCyN,EAAevN,KAAK0N,IAAIL,EAAeC,KACvCE,EAAcxN,KAAK2N,IAAIN,EAAeC,IAEpBF,EAAgB7J,OAAUiK,IAAgBJ,EAAgB7J,OAASgK,EAAeJ,EAAiB5J,SACjHiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQA,EACjB4M,EAAS1M,OAASA,EAClBqN,EAAiB5J,MAAQgK,EACzBH,EAAgB7J,MAAQiK,IAI5BrO,KAAKqK,aAAelI,EAAK1B,OAASE,GAAUwB,EAAKxB,QAAUF,IAC3DyN,EAAgBrN,KAAKyN,IAAInM,EAAK1B,MAAQE,GACtCwN,EAAetN,KAAKyN,IAAInM,EAAKxB,OAASF,GACtC2N,EAAevN,KAAK0N,IAAIL,EAAeC,KACvCE,EAAcxN,KAAK2N,IAAIN,EAAeC,IAEpBF,EAAgB7J,OAAUiK,IAAgBJ,EAAgB7J,OAASgK,EAAeJ,EAAiB5J,SACjHiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQE,EACjB0M,EAAS1M,OAASF,EAClBuN,EAAiB5J,MAAQgK,EACzBH,EAAgB7J,MAAQiK,IAIpC,OAAOhB,I,yDAGwB5M,EAAOE,EAAQkO,EAAab,GAC3D,IAKI7L,EACA+L,EACAC,EACAC,EACAU,EATAzC,EAAiBrM,KAAKqM,eACtBgB,EAAW,IAAI5B,EAEnBoD,EAAYzK,MAAQ8I,IAQpB,IAAI,IAAI7I,EAAG,EAAGA,EAAIgI,EAAe5H,OAAQJ,IAErCyK,GADA3M,EAAOkK,EAAehI,IACP5D,MAAQ0B,EAAKxB,OAASF,EAAQE,EAEzCwB,EAAK1B,OAASA,GAAS0B,EAAKxB,QAAUA,IACtCuN,EAAgBrN,KAAKyN,IAAInM,EAAK1B,MAAQA,GACtC0N,EAAetN,KAAKyN,IAAInM,EAAKxB,OAASA,GACtCyN,EAAevN,KAAK0N,IAAIL,EAAeC,IAEnCW,EAAUD,EAAYzK,OAAU0K,IAAYD,EAAYzK,OAASgK,EAAeJ,EAAiB5J,SACjGiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQA,EACjB4M,EAAS1M,OAASA,EAClBqN,EAAiB5J,MAAQgK,EACzBS,EAAcC,IAIlB9O,KAAKqK,aAAelI,EAAK1B,OAASE,GAAUwB,EAAKxB,QAAUF,IAC3DyN,EAAgBrN,KAAKyN,IAAInM,EAAK1B,MAAQE,GACtCwN,EAAetN,KAAKyN,IAAInM,EAAKxB,OAASF,GACtC2N,EAAevN,KAAK0N,IAAIL,EAAeC,IAEnCW,EAAUD,EAAYzK,OAAU0K,IAAYD,EAAYzK,OAASgK,EAAeJ,EAAiB5J,SACjGiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQE,EACjB0M,EAAS1M,OAASF,EAClBuN,EAAiB5J,MAAQgK,EACzBS,EAAYzK,MAAQ0K,IAIhC,OAAOzB,I,4CAGW0B,EAASC,EAAOC,EAASC,GAC3C,OAAIF,EAAQC,GAAWC,EAAQH,EACpB,EAEJlO,KAAK0N,IAAIS,EAAOE,GAASrO,KAAK2N,IAAIO,EAASE,K,6CAG/BjN,EAAGC,EAAGxB,EAAOE,GAChC,IAOIwB,EAPAiK,EAAiBpM,KAAKoM,eACtB+C,EAAQ,EAEF,IAANnN,GAAWA,EAAIvB,IAAUT,KAAKsK,WAC9B6E,GAASxO,GACH,IAANsB,GAAWA,EAAItB,IAAWX,KAAKuK,YAC/B4E,GAAS1O,GAEb,IAAI,IAAI4D,EAAG,EAAGA,EAAI+H,EAAe3H,OAAQJ,KACrClC,EAAOiK,EAAe/H,IACbrC,IAAMA,EAAIvB,GAAS0B,EAAKH,EAAIG,EAAK1B,QAAUuB,IAChDmN,GAASnP,KAAKoP,sBAAsBjN,EAAKF,EAAGE,EAAKF,EAAIE,EAAKxB,OAAQsB,EAAGA,EAAItB,IACzEwB,EAAKF,IAAMA,EAAItB,GAAUwB,EAAKF,EAAIE,EAAKxB,SAAWsB,IAClDkN,GAASnP,KAAKoP,sBAAsBjN,EAAKH,EAAGG,EAAKH,EAAIG,EAAK1B,MAAOuB,EAAGA,EAAIvB,IAEhF,OAAO0O,I,0DAGyB1O,EAAOE,EAAQ0O,GAC/C,IAKIlN,EACAgN,EANA9C,EAAiBrM,KAAKqM,eACtBgB,EAAW,IAAI5B,EAEnB4D,EAAiBjL,OAAS,EAK1B,IAAI,IAAIC,EAAG,EAAGA,EAAIgI,EAAe5H,OAAQJ,KACrClC,EAAOkK,EAAehI,IACb5D,OAASA,GAAS0B,EAAKxB,QAAUA,IACtCwO,EAAQnP,KAAKsP,uBAAuBnN,EAAKH,EAAGG,EAAKF,EAAGxB,EAAOE,IAC/C0O,EAAiBjL,QACzBiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQA,EACjB4M,EAAS1M,OAASA,EAClB0O,EAAmBF,GAGvBnP,KAAKqK,aAAelI,EAAK1B,OAASE,GAAUwB,EAAKxB,QAAUF,IAC3D0O,EAAQnP,KAAKsP,uBAAuBnN,EAAKH,EAAGG,EAAKF,EAAGtB,EAAQF,IAChD4O,EAAiBjL,QACzBiJ,EAASrL,EAAIG,EAAKH,EAClBqL,EAASpL,EAAIE,EAAKF,EAClBoL,EAAS5M,MAAQE,EACjB0M,EAAS1M,OAASF,EAClB4O,EAAiBjL,MAAQ+K,GAIrC,OAAO9B,I,qCAGIkC,EAAUC,GACrB,IAIIjD,EAJAF,EAAiBrM,KAAKqM,eAC1B,QAAImD,EAASxN,GAAKuN,EAASvN,EAAIuN,EAAS9O,OAAS+O,EAASxN,EAAIwN,EAAS/O,OAAS8O,EAASvN,GACrFwN,EAASvN,GAAKsN,EAAStN,EAAIsN,EAAS5O,QAAU6O,EAASvN,EAAIuN,EAAS7O,QAAU4O,EAAStN,KAGvFuN,EAASxN,EAAIuN,EAASvN,EAAIuN,EAAS9O,OAAS+O,EAASxN,EAAIwN,EAAS/O,MAAQ8O,EAASvN,IAC/EwN,EAASvN,EAAIsN,EAAStN,GAAKuN,EAASvN,EAAIsN,EAAStN,EAAIsN,EAAS5O,UAC9D4L,EAAUgD,EAASE,SACX9O,OAAS6O,EAASvN,EAAIsK,EAAQtK,EACtCoK,EAAehG,KAAKkG,IAGpBiD,EAASvN,EAAIuN,EAAS7O,OAAS4O,EAAStN,EAAIsN,EAAS5O,UACrD4L,EAAUgD,EAASE,SACXxN,EAAIuN,EAASvN,EAAIuN,EAAS7O,OAClC4L,EAAQ5L,OAAS4O,EAAStN,EAAIsN,EAAS5O,QAAU6O,EAASvN,EAAIuN,EAAS7O,QACvE0L,EAAehG,KAAKkG,KAIxBiD,EAASvN,EAAIsN,EAAStN,EAAIsN,EAAS5O,QAAU6O,EAASvN,EAAIuN,EAAS7O,OAAS4O,EAAStN,IACjFuN,EAASxN,EAAIuN,EAASvN,GAAKwN,EAASxN,EAAIuN,EAASvN,EAAIuN,EAAS9O,SAC9D8L,EAAUgD,EAASE,SACXhP,MAAQ+O,EAASxN,EAAIuK,EAAQvK,EACrCqK,EAAehG,KAAKkG,IAGpBiD,EAASxN,EAAIwN,EAAS/O,MAAQ8O,EAASvN,EAAIuN,EAAS9O,SACpD8L,EAAUgD,EAASE,SACXzN,EAAIwN,EAASxN,EAAIwN,EAAS/O,MAClC8L,EAAQ9L,MAAQ8O,EAASvN,EAAIuN,EAAS9O,OAAS+O,EAASxN,EAAIwN,EAAS/O,OACrE4L,EAAehG,KAAKkG,MAIrB,K,uCAKP,IADA,IAAIF,EAAiBrM,KAAKqM,eAClBhI,EAAI,EAAEA,EAAIgI,EAAe5H,OAAQJ,IACrC,IAAI,IAAIqL,EAAGrL,EAAE,EAAGqL,EAAIrD,EAAe5H,OAAQiL,IAAK,CAC5C,GAAIjE,EAAKE,QAAQU,EAAehI,GAAIgI,EAAeqD,IAAK,CACpDrD,EAAekB,OAAOlJ,EAAE,GACxB,MAEAoH,EAAKE,QAAQU,EAAeqD,GAAIrD,EAAehI,KAC/CgI,EAAekB,OAAOmC,EAAE,O,wCAaV,IAARlJ,EAAO,uDAAJ,GACrB,OAAOA,GACH,KAAKiD,EAAOqC,iBACR,MAAO,CAAC/D,KAAM,sBAAuB8B,YAAa,mGACtD,KAAKJ,EAAOsC,gBACR,MAAO,CAAChE,KAAM,qBAAsB8B,YAAa,kGACrD,KAAKJ,EAAOuC,YACR,MAAO,CAACjE,KAAM,gBAAiB8B,YAAa,gFAChD,KAAKJ,EAAOwC,eACR,MAAO,CAAClE,KAAM,mBAAoB8B,YAAa,8BACnD,KAAKJ,EAAOyC,iBACR,MAAO,CAACnE,KAAM,qBAAsB8B,YAAa,4FACrD,QACI,MAAMD,MAAM,kBAAoBpD,M,2BApBxC,MAAO,gB,8BAIP,OAAOiD,M,GAzcWE,GCTpBF,EAAS,CACXkG,UAAW,aA8BAC,E,kDA1BX,WAAYnP,EAAOE,GAA2B,gG,iDAIzCmF,EAAM0E,GACP,MAAM,IAAIZ,MAAM,2D,wCAWU,IAARpD,EAAO,uDAAJ,GACrB,OAAOA,GACH,KAAKiD,EAAOkG,UACR,MAAO,CAAC5H,KAAM,YAAa8B,YAAa,IAC5C,QACI,MAAMD,MAAM,kBAAoBpD,M,2BAZxC,MAAO,kB,8BAIP,OAAOiD,M,GAdaE,GCFtBjB,EAAO,CACTyD,EACA/B,EACAwF,GAGJ,SAASC,EAAgBrQ,GAAO,IAAD,gBACXkJ,GADW,IAC3B,IAAI,EAAJ,qBAAsB,CAAC,IAAfpG,EAAc,QAClB,GAAGA,EAAK9C,OAASA,EACb,OAAO8C,GAHY,8BAM3B,OAAO,KAIIoG,QCjBFoH,GAAsB,CAAC,eAAgB,gBAAiB,eAAgB,iB,sCCHrF,SAASC,GAAgBC,GACrB,IAAIC,EAAQD,GAAU,GACtB,GAAIC,GAAU,kBAAoBA,EAAQ,CACtCA,EAAQ,GACR,cAAgB/H,OAAOC,KAAK6H,GAA5B,eAAqC,CAAhC,IAAI1J,EAAG,KACR2J,EAAM5J,KAAN,UAAc6J,mBAAmB5J,GAAjC,YAAyC4J,mBAAmBF,EAAO1J,MAEvE2J,EAAQA,EAAME,KAAK,KAEvB,OAAOF,EAGX,SAASG,GAAqBC,GAAsD,IAAjDC,EAAgD,uDAAvC,KAAMC,EAAiC,uDAAnB,KAAMC,EAAa,uDAAJ,GAEvEC,EAAWC,OAAOC,gBAAkB,IAAIA,gBAAqB,KA0BjE,OAxBIF,IACAA,EAAQG,mBAAqB,WACzB,GAA2B,IAAvBH,EAAQI,WAAkB,CAC1B,IAAI/K,EAAO,KACP2K,EAAQK,OAAS,KACA,gBAAbN,IACA1K,EAAO2K,EAAQM,UAEF,QAAbP,IACA1K,EAAO2K,EAAQO,cAEdlL,GAAQ2K,EAAQQ,eACjBnL,EAAO2K,EAAQQ,cAGhBX,GAAUA,EAASxK,IAGnByK,GAAeA,EAAc,GAAD,OAAIF,EAAJ,uBAAsBI,EAAQK,OAA9B,aAAyCL,EAAQS,gBAMzFT,EAGX,SAASU,GAAKd,GAAmF,IAA9E7F,EAA6E,uDAAtE,MAAOwF,EAA+D,uDAAxD,GAAIM,EAAoD,uDAA3C,KAAMC,EAAqC,uDAAvB,KAAMC,EAAiB,uDAAR,OAEhFC,EAAUL,GAAqBC,EAAKC,EAAUC,EAAeC,GACjE,GAAIC,EAAS,CACT,IAAIR,EAAQF,GAAgBC,GAEf,OAAVxF,GAAmByF,IAAOI,GAAO,IAAMJ,GAE1CQ,EAAQW,KAAK5G,EAAQ6F,GAAK,GAEV,eAAZG,IACAC,EAAQY,aAAe,eAGb,QAAV7G,GACAiG,EAAQa,iBAAiB,eAAgB,qCAE7Cb,EAAQU,KAAe,OAAV3G,EAAkB,KAAOyF,IAa/BkB,I,iDCzETI,GACK,CACHC,KAAM,GACNC,GAAI,SAHNF,GAKG,CACDC,KAAM,EACNC,GAAI,OAoJGC,G,uGA9IM5L,GACb,IAAI6L,EAAS,KACb,OAAO7L,EAAK8L,MACR,KAAKL,GAAmBC,KACxB,KAAKD,GAAiBC,KAClBG,EAAS,CACL,OAAU7L,EAAK+L,OACf,KAAQ/L,EAAK8L,KACb,EAAK,EACL,EAAK,EACL,MAAS,EACT,OAAU,EACV,QAAW,EACX,QAAW,EACX,SAAY9L,EAAKX,UAErB,MAEJ,QACIwM,EAAS,CACL,OAAU7L,EAAKG,KACf,KAAQH,EAAK8L,KACb,EAAK9L,EAAKlE,MAAMI,EAChB,EAAK8D,EAAKlE,MAAMK,EAChB,MAAS6D,EAAKlE,MAAMC,EACpB,OAAUiE,EAAKlE,MAAME,EACrB,QAAWgE,EAAKd,QAChB,QAAWc,EAAKb,QAChB,SAAYa,EAAKX,UAM7B,OAAOwM,I,gCAGM7L,EAAMkK,GACnB,IAAI2B,EAAS,CACT,KAAQ7L,EAAKiC,KACb,KAAQjC,EAAKgM,KACb,WAAchM,EAAKlB,WACnB,OAAUoL,EAAOvP,MACjB,OAAUuP,EAAOrP,OACjB,UAAa,EACb,MAAS,CACL,CACI,QAAW,EACX,UAAaqP,EAAO+B,YAAc,IAAM/B,EAAOgC,iBAKrDC,EAAQ/J,OAAOC,KAAKrC,EAAKpE,YAI/B,IAAM,IAAMoB,KAHZ6O,EAAM,YAAkBM,EAAMxN,OAC9BkN,EAAM,MAAY,GAEI7L,EAAKpE,WACvBiQ,EAAM,MAAUtL,KACZrG,KAAKkS,UAAUpM,EAAKpE,WAAWoB,KAyBvC,OApBA6O,EAAM,MAAUtL,KACZrG,KAAKkS,UAAU,CACX,KAAQX,GAAmBC,KAC3B,OAAUD,GAAmBE,GAC7B,SAAY3L,EAAKjB,cAKzB8M,EAAM,MAAUtL,KACZrG,KAAKkS,UAAU,CACX,KAAQX,GAAiBC,KACzB,OAAUD,GAAiBE,GAC3B,SAAY3L,EAAKhB,YAIzB6M,EAAM,eAAqB,EAC3BA,EAAM,SAAe,GAEdA,I,qCAGW7L,EAAMkK,GACxB,IAAI2B,EAAS,CACT,OAAU3B,EAAOvP,MACjB,OAAUuP,EAAOrP,OACjB,UAAaqP,EAAO+B,YAAc,IAAM/B,EAAOgC,cAGnDL,MAAkB,IAClB,IAAK,IAAMrQ,KAAUwE,EACjB,GAAIA,EAAKtE,eAAeF,GAAS,CAC7B,IAAI6Q,EAAa,CACb,KAAQrM,EAAKxE,GAAQyG,KACrB,KAAQjC,EAAKxE,GAAQwQ,KACrB,WAAchM,EAAKxE,GAAQsD,YAGzBqN,EAAQ/J,OAAOC,KAAKrC,EAAKxE,GAAQI,YAIvC,IAAM,IAAMoB,KAHZqP,EAAU,YAAkBF,EAAMxN,OAClC0N,EAAU,MAAY,GAEArM,EAAKxE,GAAQI,WAC/ByQ,EAAU,MAAU9L,KAChBrG,KAAKkS,UAAUpM,EAAKxE,GAAQI,WAAWoB,KAK/CqP,EAAU,MAAU9L,KAChBrG,KAAKkS,UAAU,CACX,KAAQX,GAAmBC,KAC3B,OAAUD,GAAmBE,GAC7B,SAAY3L,EAAKxE,GAAQuD,cAKjCsN,EAAU,MAAU9L,KAChBrG,KAAKkS,UAAU,CACX,KAAQX,GAAiBC,KACzB,OAAUD,GAAiBE,GAC3B,SAAY3L,EAAKxE,GAAQwD,YAIjCqN,EAAU,eAAqB,EAC/BA,EAAU,SAAe,GAEzBR,EAAM,MAAUtL,KAAK8L,GAI7B,OAAOR,M,KCfAS,G,+GA3Hc5S,GAAO,IAAD,gBACVkJ,IADU,IAC3B,2BAAuB,CAAC,IAAfpG,EAAc,QACnB,GAAIA,EAAK9C,OAASA,EACd,OAAO8C,GAHY,8BAM3B,OAAO,O,+EAGgB5B,EAAQoF,EAAMuM,G,kGAMrC,GALIlJ,EAAQ,GACRmJ,EAAU,aAAeD,EAAYE,SAASC,SAC9Cb,EAAS,GAGqB,uBAA9BU,EAAYE,SAAS/S,KACrB,GAAI6S,EAAYI,UACZ,IAAWnR,KAAUwE,EACbA,EAAKtE,eAAeF,IACpBqQ,EAAOtL,KAAKqL,GAAOgB,UAAU5M,EAAKxE,GAAS,CACvC,MAASZ,EAAOD,MAChB,OAAUC,EAAOC,OACjB,YAAe0R,EAAYN,YAC3B,cAAiBM,EAAYL,sBAMzCL,EAAOtL,KAAKqL,GAAOgB,UAAU5M,EAAKuM,EAAYtP,cAAe,CACzD,MAASrC,EAAOD,MAChB,OAAUC,EAAOC,OACjB,YAAe0R,EAAYN,YAC3B,cAAiBM,EAAYL,qBAID,4BAA9BK,EAAYE,SAAS/S,MAC3BmS,EAAOtL,KAAKqL,GAAOiB,eAAe7M,EAAM,CACpC,MAASpF,EAAOD,MAChB,OAAUC,EAAOC,OACjB,YAAe0R,EAAYN,YAC3B,cAAiBM,EAAYL,iB,SAS7BY,EAAU,GACRpO,EAAMmN,EAAOlN,OAEbJ,EAAI,E,YAAGA,EAAIG,G,6BACboO,E,UAAmB5S,KAAK6S,aAAalB,EAAOtN,GAAIiO,G,yBAAxCjM,K,wBADUhC,I,uBAetB,GAXIyO,EAAYpS,EAAOqS,UAAwC,QAA9BV,EAAYL,cAA0B,YAAc,eACjFgB,EAAQF,EAAUvO,MAAM,MACtB8C,QACNyL,EAAYE,EAAM7C,KAAK,KAEvBhH,EAAM9C,KAAK,CACP0B,KAAMsK,EAAYN,YAAc,IAAMM,EAAYL,cAClDiB,QAASH,EACTI,QAAQ,IAGPN,EAAQnO,OAAS,EAClB,IAAYmE,KAASgK,EACZA,EAAQpR,eAAeoH,IACxBO,EAAM9C,KAAK,CACP0B,KAAMsK,EAAYN,YAAc,IAAMnJ,EAAQ,OAC9CqK,QAASL,EAAQhK,UAM7BO,EAAM9C,KAAK,CACP0B,KAAMsK,EAAYN,YAAe,OACjCkB,QAASL,EAAQ,KAMzB,IAFIO,EAAM,IAAIC,KAEd,MAAiBjK,EAAjB,eAASkK,EAAe,KACpBF,EAAIE,KAAKA,EAAKtL,KAAMsL,EAAKJ,QAAS,CAACC,SAAUG,EAAKH,SAGtDC,EAAIG,cAAc,CAAC9T,KAAM,SACpB+T,MAAK,SAACN,GACHO,KAAUC,OAAOR,EAASZ,EAAYqB,SAAW,W,0MAS7C5N,EAAMwM,GAAU,IAAD,OAC/B,OAAO,IAAIqB,SAAQ,SAACC,EAASC,IFrDrC,SAAaxD,GAAqE,IAAhEL,EAA+D,uDAAxD,GAAIM,EAAoD,uDAA3C,KAAMC,EAAqC,uDAAvB,KAAMC,EAAiB,uDAAR,OAC9DW,GAAKd,EAAK,MAAOL,EAAQM,EAAUC,EAAeC,GEqDjDsD,CAAIxB,EAAS,MAAM,SAACE,GAChB,EAAKuB,eAAevB,EAAU1M,EAAM8N,EAASC,MAC9C,kBAAMA,EAAO,mC,qCAIFrB,EAAU1M,EAAM8N,EAASC,GAC3C,IAEID,EADUI,KAASC,OAAOzB,EAAU1M,IAGxC,MAAOoO,GACHL,EAAOK,EAAE9K,c,KCiWN+K,I,wDAxdX,WAAYhV,GAAQ,IAAD,8BACf,cAAMA,IAEDiV,UAAY,EAAKA,UAAU/U,KAAf,gBACjB,EAAKgV,aAAe,EAAKA,aAAahV,KAAlB,gBACpB,EAAKiV,kBAAoB,EAAKA,kBAAkBjV,KAAvB,gBACzB,EAAKkV,eAAiB,EAAKA,eAAelV,KAApB,gBACtB,EAAKmV,YAAc,EAAKA,YAAYnV,KAAjB,gBACnB,EAAKiG,eAAiB,EAAKA,eAAejG,KAApB,gBACtB,EAAKkG,eAAiB,EAAKA,eAAelG,KAApB,gBACtB,EAAKoV,QAAU,EAAKA,QAAQpV,KAAb,gBACf,EAAKqV,qBAAuB,EAAKA,qBAAqBrV,KAA1B,gBAC5B,EAAKsV,kBAAoB,EAAKA,kBAAkBtV,KAAvB,gBACzB,EAAKuV,aAAe,EAAKA,aAAavV,KAAlB,gBAEpB,EAAKwV,YAAc,KACnB,EAAKxC,YAAc,EAAKyC,iBACxB,EAAKC,sBAEL,EAAKpP,MAAQ,CACTqP,cAAc,EACd3S,YAAa,YACb6I,OAAQ,EAAKmH,YAAYnH,OACzBnI,aAAc,GACd5B,aAAc,IAGlBpC,EAASgF,GAAGjF,EAAqB,EAAKwG,gBACtCvG,EAASgF,GAAGjF,EAAqB,EAAKyG,gBA5BvB,E,8DA+BDjG,GACd,IAAMiT,EAAWH,GAAS6C,kBAAkB3U,IAASC,YAAYP,KAAKQ,KAAK+R,UAAUnO,OAErF9D,IAASC,YAAYP,KAAKQ,KAAKqK,eAAeqK,UAAY3C,EAAS1H,cACnEvK,IAASC,YAAYP,KAAKQ,KAAK2U,WAAWD,UAAY3C,EAAS4C,UAC/D7U,IAASC,YAAYP,KAAKQ,KAAK4U,UAAUF,UAAY3C,EAAS4C,UAE9D7U,IAASC,YAAYP,KAAKQ,KAAK6U,cAAcH,WAAa3C,EAAS+C,gBAAkB/C,EAASgD,cAE1FjV,IAASC,YAAYP,KAAKQ,KAAK6U,cAAcH,WAC7C5U,IAASC,YAAYP,KAAKQ,KAAK6U,cAAcG,QAAUjD,EAAS+C,gBAGpEtV,KAAKqS,YAAYE,SAAWA,EAC5BvS,KAAKqS,YAAY8C,UAAY5C,EAAS4C,UACtCnV,KAAKqS,YAAYxH,cAAgB0H,EAAS1H,cAE1C7K,KAAKyV,gB,qCAGM3P,GACX9F,KAAK2F,MAAM5C,aAAe+C,EAAK/C,aAC/B/C,KAAK0V,oB,qCAGM5P,GACX9F,KAAK2F,MAAMxE,aAAe2E,EAAK3E,aAC/BnB,KAAK2F,MAAM5C,aAAe+C,EAAK/C,aAC/B/C,KAAK0V,oB,wCAIL,GAAI1V,KAAK2F,MAAM5C,aAAc,CACzB/C,KAAKqS,YAAYtP,aAAe/C,KAAK2F,MAAM5C,aAE3C,IAAMtB,EAAWzB,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAEnDzC,IAASC,YAAYP,KAAKQ,KAAKmV,cAAcvR,MAAQpE,KAAK2F,MAAM5C,aAChEzC,IAASC,YAAYP,KAAKQ,KAAKsR,MAAM1N,MAAQ3C,EAASqQ,KACtDxR,IAASC,YAAYP,KAAKQ,KAAKoE,YAAYR,MAAQ3C,EAASmD,WAC5DtE,IAASC,YAAYP,KAAKQ,KAAKqE,YAAYT,MAAQ3C,EAASoD,WAC5DvE,IAASC,YAAYP,KAAKQ,KAAKsE,UAAUV,MAAQ3C,EAASqD,SAC1DxE,IAASC,YAAYP,KAAKQ,KAAKoV,WAAWJ,QAAU/T,EAASoU,UAE7D,IAAMlU,EAAWF,EAASuE,YAAYhG,KAAK2F,MAAMxE,cAE7CQ,GACArB,IAASC,YAAYP,KAAKQ,KAAKW,cAAciD,MAAQzC,EAASsE,KAC9D3F,IAASC,YAAYP,KAAKQ,KAAKsV,WAAW1R,MAAQzC,EAASiQ,KAC3DtR,IAASC,YAAYP,KAAKQ,KAAKuV,SAAS3R,MAAQzC,EAASqD,QACzD1E,IAASC,YAAYP,KAAKQ,KAAKwV,SAAS5R,MAAQzC,EAASsD,QACzD3E,IAASC,YAAYP,KAAKQ,KAAKyV,UAAU7R,MAAQzC,EAASwD,WAG1D7E,IAASC,YAAYP,KAAKQ,KAAKuV,SAAS3R,MAAQ,EAChD9D,IAASC,YAAYP,KAAKQ,KAAKwV,SAAS5R,MAAQ,EAChD9D,IAASC,YAAYP,KAAKQ,KAAKyV,UAAU7R,MAAQ,M,oCAMzD,IAAI0B,EAAOoC,OAAOgO,OAAO,GAAIlW,KAAKqS,aAClCvM,EAAKoF,OAAS2E,EAAgB/J,EAAKoF,QAEnCnM,EAASQ,KAAKT,EAA4BgH,K,uCAI1C,IAAIA,EAAO,CAEXA,aAAoB,KACpBA,WAAiB,GAiBjB,OAhBAA,EAAKyM,SAAW7J,GAAK,GACrB5C,EAAK4N,SAAW,cAChB5N,EAAKiM,YAAc,UACnBjM,EAAKkM,cAAgB,MACrBlM,EAAK/E,MAAQ,EACb+E,EAAKrF,MAAQ,KACbqF,EAAKnF,OAAS,KACdmF,EAAKqQ,WAAY,EACjBrQ,EAAKsQ,YAAa,EAClBtQ,EAAK+E,eAAgB,EACrB/E,EAAKqP,WAAY,EACjBrP,EAAKuQ,SAAW,OAChBvQ,EAAKwQ,iBAAkB,EACvBxQ,EAAKoF,OAASqL,EAAQ,GAAG/W,KACzBsG,EAAK0Q,aAAetO,OAAOC,KAAKoO,EAAQ,GAAGE,SAAS,GAE7C3Q,I,0CAKP4Q,SAASC,eAAe,kBACnBC,QACL5W,KAAKyV,gB,gCAGCnW,GACN,GAA+B,mBAA3BA,EAAM6E,cAAcqC,GAAyB,CAC7ClG,IAASC,YAAYP,KAAKQ,KAAKqW,UAAUjW,MAAMkW,QAAU,OACzDxW,IAASC,YAAYP,KAAKQ,KAAKuW,gBAAgBnW,MAAMkW,QAAU,QAExCxW,IAASC,YAAYP,KAAKQ,KAAKwW,iBACrCvX,WAAa,UAE9B,IAAIwX,EAAmB3W,IAASC,YAAYP,KAAKQ,KAAK0W,iBACtDD,EAAiBxX,UAAYwX,EAAiBxX,UAAU0X,QAAQ,UAAW,QAE1E,CACD7W,IAASC,YAAYP,KAAKQ,KAAKqW,UAAUjW,MAAMkW,QAAU,QACzDxW,IAASC,YAAYP,KAAKQ,KAAKuW,gBAAgBnW,MAAMkW,QAAU,OAExCxW,IAASC,YAAYP,KAAKQ,KAAK0W,iBACrCzX,WAAa,UAE9B,IAAI2X,EAAmB9W,IAASC,YAAYP,KAAKQ,KAAKwW,iBACtDI,EAAiB3X,UAAY2X,EAAiB3X,UAAU0X,QAAQ,UAAW,O,4CAK/E,IAAIE,EAAgBxH,EAAgB7P,KAAKqS,YAAYnH,QAEhDmM,IACDA,EAAgBd,EAAQ,IAG5BvW,KAAK6U,YAAc,GAGnB,IADA,IAAI4B,EAAUvO,OAAOC,KAAKkP,EAAcZ,SACxC,MAAiBA,EAAjB,eAA0B,CAArB,IAAInU,EAAI,KACTtC,KAAK6U,YAAYxO,KAAK,4BAAQjC,MAAO9B,EAAMgE,IAAK,iBAAmBhE,GAAOA,IAG9EtC,KAAKqS,YAAYmE,aAAeC,EAAQ,K,qCAG7BnX,GACXU,KAAKqS,YAAYnH,OAAS5K,IAASC,YAAYP,KAAKQ,KAAK0K,QAAQ9G,MACjEpE,KAAK+U,sBAEL/U,KAAK+F,SAAS,CACVmF,OAAQlL,KAAKqS,YAAYnH,SAG7BlL,KAAKyV,gB,wCAGSnW,IACdU,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAc+O,KAAOwF,OAAOhX,IAASC,YAAYP,KAAKQ,KAAKsR,MAAM1N,OACnGpE,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAc6B,WAAa0S,OAAOhX,IAASC,YAAYP,KAAKQ,KAAKoE,YAAYR,OAC/GpE,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAc8B,WAAayS,OAAOhX,IAASC,YAAYP,KAAKQ,KAAKqE,YAAYT,OAC/GpE,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAc+B,SAAWwS,OAAOhX,IAASC,YAAYP,KAAKQ,KAAKsE,UAAUV,OAC3GpE,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAc8S,UAAYvV,IAASC,YAAYP,KAAKQ,KAAKoV,WAAWJ,QAElGxV,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAc8S,WAChD7V,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAcwU,mBAG/BvX,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAciD,YAAYhG,KAAK2F,MAAMxE,gBAGpFnB,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAcrB,WAAW1B,KAAK2F,MAAMxE,cAAc6D,QAAUsS,OAAOhX,IAASC,YAAYP,KAAKQ,KAAKuV,SAAS3R,OAC7IpE,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAcrB,WAAW1B,KAAK2F,MAAMxE,cAAc8D,QAAUqS,OAAOhX,IAASC,YAAYP,KAAKQ,KAAKwV,SAAS5R,OAC7IpE,KAAKb,MAAMoC,YAAYvB,KAAK2F,MAAM5C,cAAcrB,WAAW1B,KAAK2F,MAAMxE,cAAcgE,SAAWmS,OAAOhX,IAASC,YAAYP,KAAKQ,KAAKyV,UAAU7R,QAIvJrF,EAASQ,KAAKT,K,mCAGLQ,GACTU,KAAKqS,YAAYqB,SAAWpT,IAASC,YAAYP,KAAKQ,KAAKkT,UAAUtP,MACrEpE,KAAKqS,YAAYL,cAAgB1R,IAASC,YAAYP,KAAKQ,KAAKwR,eAAe5N,MAC/EpE,KAAKqS,YAAYN,YAAczR,IAASC,YAAYP,KAAKQ,KAAKuR,aAAa3N,MAC3EpE,KAAKqS,YAAYtR,MAAQT,IAASC,YAAYP,KAAKQ,KAAKO,OAAOqD,MAC/DpE,KAAKqS,YAAY5R,MAAQH,IAASC,YAAYP,KAAKQ,KAAKC,OAAO2D,MAC/DpE,KAAKqS,YAAY1R,OAASL,IAASC,YAAYP,KAAKQ,KAAKG,QAAQyD,MACjEpE,KAAKqS,YAAY8D,UAAY7V,IAASC,YAAYP,KAAKQ,KAAK2V,WAAWX,QACvExV,KAAKqS,YAAY+D,WAAa9V,IAASC,YAAYP,KAAKQ,KAAK4V,YAAYZ,QACzExV,KAAKqS,YAAYiE,gBAAkBhW,IAASC,YAAYP,KAAKQ,KAAK8V,iBAAiBd,QACnFxV,KAAKqS,YAAY8C,UAAY7U,IAASC,YAAYP,KAAKQ,KAAK2U,WAAWK,QACvExV,KAAKqS,YAAYxH,cAAgBvK,IAASC,YAAYP,KAAKQ,KAAKqK,eAAe2K,QAC/ExV,KAAKqS,YAAYnH,OAAS5K,IAASC,YAAYP,KAAKQ,KAAK0K,QAAQ9G,MACjEpE,KAAKqS,YAAYmE,aAAelW,IAASC,YAAYP,KAAKQ,KAAKgW,cAAcpS,MAG7EpE,KAAKyV,gB,oCAIL1W,EAASQ,KAAKT,K,8BAGVQ,GACJ,IAAIkY,EAAalY,EAAMsI,OAAOnI,UAAU8E,MAAM,KAE9CxF,EAASQ,KAAKT,EAAkC0Y,EAAW,M,2CAG1ClY,GACjBU,KAAKqS,YAAYI,UAAYnT,EAAM6E,cAAcqR,QAGjDxV,KAAKyV,gB,mCAGInW,GACLA,IAEY,MADFA,EAAMmY,SAAWnY,EAAMoY,SAEM,KAA9BpY,EAAM6E,cAAcC,QACrB9E,EAAM6E,cAAcC,MAAQ,GAEhCpE,KAAKqU,mB,+BAKP,IAAD,OACL,OACI,yBAAK5U,UAAU,cACX,yBAAKA,UAAU,QACX,yBAAKA,UAAU,OACX,4BAAQiE,IAAI,kBAAkB8C,GAAG,iBAAiB/G,UAAU,aACpDM,QAASC,KAAKoU,WADtB,mBAGA,4BAAQ1Q,IAAI,kBAAkB8C,GAAG,iBAAiB/G,UAAU,aACpDM,QAASC,KAAKoU,WADtB,oBAIJ,yBAAK1Q,IAAI,iBAAiBjE,UAAU,eAChC,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,aACA,2BAAOA,UAAU,yBAAyBiE,IAAI,WACvC+C,aAAczG,KAAKqS,YAAYqB,YAE1C,yBAAKjU,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,gBACA,2BAAOA,UAAU,yBAAyBiE,IAAI,cACvC+C,aAAczG,KAAKqS,YAAYN,eAE1C,yBAAKtS,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,UACA,4BAAQA,UAAU,yBAAyBiE,IAAI,gBACvC+C,aAAczG,KAAKqS,YAAYL,cAAe5M,SAAUpF,KAAKqU,cACjE,4BAAQjQ,MAAM,OAAd,OACA,4BAAQA,MAAM,OAAd,SAGR,yBAAK3E,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,YACA,4BAAQA,UAAU,yBAAyBiE,IAAI,WAAW0B,SAAUpF,KAAK2U,kBACjElO,aAAczG,KAAKqS,YAAYE,UAClC7J,GAAKC,KAAI,SAAA6E,GACN,OAAQ,4BAAQlH,IAAK,YAAckH,EAAKhO,KACxBiH,aAAc+G,EAAKhO,MAAOgO,EAAKhO,WAI3D,yBAAKC,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,SACA,2BAAOA,UAAU,yBAAyBiE,IAAI,QACvC+C,aAAczG,KAAKqS,YAAYtR,SAE1C,yBAAKtB,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,SACA,2BAAOA,UAAU,yBAAyBiE,IAAI,QAAQlE,KAAK,SAAS+O,IAAI,IAAIoJ,UAAW3X,KAAK4U,aACrFnO,aAAczG,KAAKqS,YAAY5R,SAE1C,yBAAKhB,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,UACA,2BAAOA,UAAU,yBAAyBiE,IAAI,SAASlE,KAAK,SAAS+O,IAAI,IAAIoJ,UAAW3X,KAAK4U,aACtFnO,aAAczG,KAAKqS,YAAY1R,UAE1C,yBAAKlB,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,cACA,2BAAOA,UAAU,sBACb,2BAAOD,KAAK,WAAWkE,IAAI,YACpBkU,eAAgB5X,KAAKqS,YAAY8D,UAAY,UAAY,GACzD/Q,SAAUpF,KAAKqU,eACtB,0BAAM5U,UAAU,gBAGxB,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,gBACA,2BAAOA,UAAU,sBACb,2BAAOD,KAAK,WAAWkE,IAAI,aAAa0B,SAAUpF,KAAKqU,aAChDuD,eAAgB5X,KAAKqS,YAAY+D,WAAa,UAAY,KACjE,0BAAM3W,UAAU,gBAGxB,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,kBACA,2BAAOA,UAAU,sBACb,2BAAOD,KAAK,WAAWkE,IAAI,gBACpBwR,UAAWlV,KAAKqS,YAAYE,SAAS1H,cACrCzF,SAAUpF,KAAKqU,aACfuD,eAAgB5X,KAAKqS,YAAYxH,cAAgB,UAAY,KACpE,0BAAMpL,UAAU,gBAGxB,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,cACA,2BAAOA,UAAU,sBACb,2BAAOD,KAAK,WAAWkE,IAAI,YAAY0B,SAAUpF,KAAKqU,aAC/Ca,UAAWlV,KAAKqS,YAAYE,SAAS4C,UACrCyC,eAAgB5X,KAAKqS,YAAY8C,UAAY,UAAY,KAChE,0BAAM1V,UAAU,gBAGxB,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,aACA,4BAAQA,UAAU,yBAAyBiE,IAAI,YAC3C,4BAAQU,MAAM,QAAd,QACA,4BAAQA,MAAM,QAAd,UAGR,yBAAK3E,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,oBACA,2BAAOA,UAAU,sBACb,2BAAOD,KAAK,WAAWkE,IAAI,kBAAkB0B,SAAUpF,KAAKqU,aACrDuD,eAAgB5X,KAAKqS,YAAYiE,gBAAkB,UAAY,KACtE,0BAAM7W,UAAU,gBAGxB,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,UACA,4BAAQA,UAAU,yBAAyBiE,IAAI,SAAS0B,SAAUpF,KAAKuU,gBAE/DgC,EAAQ5N,KAAI,SAAA6E,GACR,OAAQ,4BAAQlH,IAAK,UAAYkH,EAAKhO,KACtBiH,aAAc+G,EAAKhO,MAAOgO,EAAKhO,WAK/D,yBAAKC,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,UACA,4BAAQA,UAAU,yBAAyBiE,IAAI,eAAe0B,SAAUpF,KAAKqU,aACrEa,SAAsC,kBAA5BlV,KAAKqS,YAAYnH,QAC9BlL,KAAK6U,cAGd,yBAAKpV,UAAU,wBAAf,qBAEI,yBAAKA,UAAU,gCACVoY,GAASlP,KAAI,SAAAZ,GACV,OACI,yBAAKzB,IAAK,cAAgByB,GACtB,yBACItI,UAAW,qBAAuBsI,GAAQ,EAAKpC,MAAMtD,cAAgB0F,EAAO,YAAc,IAC1FhI,QAAS,EAAK0U,SAFlB,cAQpB,yBAAKhV,UAAU,2DACX,yBAAKA,UAAU,wBAAf,YACA,6BACI,2BAAOA,UAAU,UACb,2BAAOD,KAAK,WAAWkE,IAAI,eAAe3D,QAASC,KAAK0U,uBACxD,0BAAMjV,UAAU,mBAGxB,yBAAKA,UAAU,wBAAf,gBAGR,yBAAKiE,IAAI,WAAWjE,UAAU,eAC1B,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,cACA,2BAAOA,UAAU,yBAAyBiE,IAAI,eAAe+C,aAAa,GAAGqR,UAAQ,EAC9E5C,UAAQ,KAEnB,yBAAKzV,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,aACA,2BAAOA,UAAU,sBACb,2BAAOD,KAAK,WAAWkE,IAAI,YAAY0B,SAAUpF,KAAKsU,oBACtD,0BAAM7U,UAAU,gBAGxB,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,aACA,2BAAOA,UAAU,yBAAyBD,KAAK,SAASkE,IAAI,OAAO+C,aAAa,IACzErB,SAAUpF,KAAKsU,qBAE1B,yBAAK7U,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,eACA,2BAAOA,UAAU,yBAAyBD,KAAK,SAASkE,IAAI,aAAa+C,aAAa,IAC/ErB,SAAUpF,KAAKsU,qBAE1B,yBAAK7U,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,eACA,2BAAOA,UAAU,yBAAyBD,KAAK,SAASkE,IAAI,aAAa+C,aAAa,IAC/ErB,SAAUpF,KAAKsU,qBAE1B,yBAAK7U,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,aACA,2BAAOA,UAAU,yBAAyBD,KAAK,SAASkE,IAAI,WAAW+C,aAAa,IAC7ErB,SAAUpF,KAAKsU,qBAE1B,6BACA,6BACA,yBAAK7U,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,iBACA,2BAAOA,UAAU,yBAAyBiE,IAAI,eAAe+C,aAAa,GAAGqR,UAAQ,EAC9E5C,UAAQ,KAEnB,yBAAKzV,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,cACA,2BAAOA,UAAU,yBAAyBiE,IAAI,YAAY+C,aAAa,GAAGqR,UAAQ,EAC3E5C,UAAQ,KAEnB,yBAAKzV,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,WACA,2BAAOA,UAAU,yBAAyBD,KAAK,SAASkE,IAAI,UAAU+C,aAAa,IAC5ErB,SAAUpF,KAAKsU,qBAE1B,yBAAK7U,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,WACA,2BAAOA,UAAU,yBAAyBD,KAAK,SAASkE,IAAI,UAAU+C,aAAa,IAC5ErB,SAAUpF,KAAKsU,qBAE1B,yBAAK7U,UAAU,oBACX,0BAAMA,UAAU,yBAAhB,YACA,2BAAOA,UAAU,yBAAyBD,KAAK,SAASkE,IAAI,WAAW+C,aAAa,IAC7ErB,SAAUpF,KAAKsU,uBAIlC,6BACI,4BAAQ7U,UAAU,aAAaiE,IAAI,eAAe3D,QAASC,KAAKwU,aAAhE,gB,GAldKvU,c,SCiUV8X,G,WAxUX,aAAe,oBAKX/X,KAAKgY,gBAAkB,KAMvBhY,KAAKiY,KAAO,KAMZjY,KAAKkY,SAAW,KAMhBlY,KAAKmY,UAAY,KAMjBnY,KAAKoY,UAAY,KAMjBpY,KAAKqY,WAAa3B,SAAS4B,cAAc,U,kDAQvC/Q,EAAKgR,GACPvY,KAAKgY,gBAAkB,GACvBhY,KAAKiY,KAAO1Q,EACZvH,KAAKoY,UAAYG,EAEjBvY,KAAKqY,WAAW5X,MAAQ8G,EAAI9G,MAC5BT,KAAKqY,WAAW1X,OAAS4G,EAAI5G,OAE7BX,KAAKqY,WAAWpX,WAAW,MACtBI,UAAUkG,EAAK,EAAG,EAAGA,EAAI9G,MAAO8G,EAAI5G,QACzCX,KAAKkY,SAAWlY,KAAKqY,WAAWpX,WAAW,MACtCuX,aAAa,EAAG,EAAGjR,EAAI9G,MAAO8G,EAAI5G,QAAQmF,KAE/C9F,KAAKmY,UAAYnY,KAAKyY,SAAS,EAAG,GAElC,IAAIC,GAAO,EAEX,GACIA,EAAO1Y,KAAK2Y,sBAETD,GAEP,OAAO1Y,KAAKgY,kB,sCAIZ,IAAIY,EAAa5Y,KAAK6Y,qBAEtB,GAAI7Y,KAAK8Y,aAAaF,GAClB,OAAO,EAGX,IAAIG,EAAY/Y,KAAKgZ,YAAYJ,GAYjC,OAVIG,IAEAA,EAAUvS,GAAKyS,eACfF,EAAUR,SAAWvY,KAAKoY,UAC1BW,EAAUG,UAAYlZ,KAAKqY,WAAWpX,WAAW,MAC5CuX,aAAaO,EAAU/W,EAAG+W,EAAU9W,EAAG8W,EAAUtY,MAAOsY,EAAUpY,QAEvEX,KAAKgY,gBAAgB3R,KAAK0S,KAGvB,I,kCAGCH,GACR,IAAIG,EAAY,CACZvS,GAAI,EACJ+R,SAAU,GACVvW,EAAG4W,EAAW5W,EACdC,EAAG2W,EAAW3W,EACdxB,MAAO,EACPE,OAAQ,EACRuY,UAAW,MAKf,OAFAlZ,KAAKmZ,gBAAgBJ,GAEdA,I,sCAGKA,GAGZ,IAFA,IAAIK,GAAa,GAETA,GAAY,CAGD,IAFFpZ,KAAKqZ,wBAAwBN,KAGtCK,GAAa,M,8CAKDL,GACpB,IAAIO,EAAS,EAOb,OALAA,GAAUtZ,KAAKuZ,iBAAiBR,GAChCO,GAAUtZ,KAAKwZ,kBAAkBT,GACjCO,GAAUtZ,KAAKyZ,gBAAgBV,GAC/BO,GAAUtZ,KAAK0Z,eAAeX,K,qCAKnBA,GAIX,IAHA,IAAIO,EAAS,EACTF,GAAa,GAETA,GAAY,CAChB,GAAIpZ,KAAK2Z,oBAAoBZ,GAAY,CACrCK,GAAa,EACb,MAGJE,GAAU,EACVP,EAAU9W,GAAK,EACf8W,EAAUpY,QAAU,EAExB,OAAO2Y,I,0CAGSP,GAChB,IAAIa,EAAWb,EAAU/W,EACrB6X,EAAWd,EAAU9W,EAAI,EAE7B,GAAI4X,EAAW,EACX,OAAO,EAGX,IAAK,IAAI7X,EAAI4X,EAAUpL,EAAOoL,EAAWb,EAAUtY,MAAQuB,EAAIwM,EAAKxM,IAChE,IAAKhC,KAAK8Z,aAAa9Z,KAAKyY,SAASzW,EAAG6X,IACpC,OAAO,EAIf,OAAO,I,sCAGKd,GAIZ,IAHA,IAAIO,EAAS,EACTF,GAAa,GAETA,GAAY,CAChB,GAAIpZ,KAAK+Z,qBAAqBhB,GAAY,CACtCK,GAAa,EACb,MAGJE,GAAU,EACVP,EAAU/W,GAAK,EACf+W,EAAUtY,OAAS,EAGvB,OAAO6Y,I,2CAGUP,GACjB,IAAIa,EAAWb,EAAU/W,EAAI,EACzB6X,EAAWd,EAAU9W,EAEzB,GAAI2X,EAAW,EACX,OAAO,EAGX,IAAK,IAAI3X,EAAI4X,EAAUrL,EAAOqL,EAAWd,EAAUpY,OAASsB,EAAIuM,EAAKvM,IACjE,IAAKjC,KAAK8Z,aAAa9Z,KAAKyY,SAASmB,EAAU3X,IAC3C,OAAO,EAIf,OAAO,I,uCAGM8W,GAIb,IAHA,IAAIO,EAAS,EACTF,GAAa,GAETA,GAAY,CAChB,GAAIpZ,KAAKga,sBAAsBjB,GAAY,CACvCK,GAAa,EACb,MAGJE,GAAU,EACVP,EAAUtY,OAAS,EAGvB,OAAO6Y,I,wCAGOP,GAId,IAHA,IAAIO,EAAS,EACTF,GAAa,GAETA,GAAY,CAChB,GAAIpZ,KAAKia,uBAAuBlB,GAAY,CACxCK,GAAa,EACb,MAGAE,GAAU,EACVP,EAAUpY,QAAU,EAI5B,OAAO2Y,I,6CAGYP,GACnB,IAAIa,EAAWb,EAAU/W,EACrB6X,EAAWd,EAAU9W,EAAI8W,EAAUpY,OAEvC,GAAIkZ,EAAW7Z,KAAKiY,KAAKtX,OACrB,OAAO,EAGX,IAAK,IAAIqB,EAAI4X,EAAUpL,EAAOoL,EAAWb,EAAUtY,MAAQuB,EAAIwM,EAAKxM,IAChE,IAAKhC,KAAK8Z,aAAa9Z,KAAKyY,SAASzW,EAAG6X,IACpC,OAAO,EAIf,OAAO,I,4CAGWd,GAClB,IAAIa,EAAWb,EAAU/W,EAAI+W,EAAUtY,MACnCoZ,EAAWd,EAAU9W,EAEzB,GAAI2X,EAAW5Z,KAAKiY,KAAKxX,MACrB,OAAO,EAGX,IAAK,IAAIwB,EAAI4X,EAAUrL,EAAOqL,EAAWd,EAAUpY,OAASsB,EAAIuM,EAAKvM,IACjE,IAAKjC,KAAK8Z,aAAa9Z,KAAKyY,SAASmB,EAAU3X,IAC3C,OAAO,EAIf,OAAO,I,+BAGFD,EAAGC,GACR,MAAO,CACHD,EAAGA,EACHC,EAAGA,EACHiY,IAAKla,KAAKkY,SAAqC,GAA3BlY,KAAKiY,KAAKxX,MAAQwB,EAAID,IAC1CmY,MAAOna,KAAKkY,SAAqC,GAA3BlY,KAAKiY,KAAKxX,MAAQwB,EAAID,GAAS,GACrDoY,KAAMpa,KAAKkY,SAAqC,GAA3BlY,KAAKiY,KAAKxX,MAAQwB,EAAID,GAAS,GACpDqY,MAAOra,KAAKkY,SAAqC,GAA3BlY,KAAKiY,KAAKxX,MAAQwB,EAAID,GAAS,M,mCAIhDsY,GACT,OAAOA,EAAYJ,MAAQla,KAAKmY,UAAU+B,KACnCI,EAAYF,OAASpa,KAAKmY,UAAUiC,MACpCE,EAAYH,QAAUna,KAAKmY,UAAUgC,OACrCG,EAAYD,QAAUra,KAAKmY,UAAUkC,Q,2CAK5C,OAAOra,KAAKua,gB,mCAGHC,GACT,YAAiBC,IAAVD,GAAwBA,EAAMxY,IAAMhC,KAAKiY,KAAKxX,MAAQ,GAAK+Z,EAAMvY,IAAMjC,KAAKiY,KAAKtX,OAAS,I,oCAIjG,IAAK,IAAIsB,EAAI,EAAGuM,EAAMxO,KAAKiY,KAAKtX,OAAQsB,EAAIuM,EAAKvM,IAC7C,IAAK,IAAID,EAAI,EAAG0Y,EAAO1a,KAAKiY,KAAKxX,MAAOuB,EAAI0Y,EAAM1Y,IAAK,CACnD,IAAIsY,EAActa,KAAKyY,SAASzW,EAAGC,GACnC,IAAKjC,KAAK8Z,aAAaQ,KAAiBta,KAAK2a,oBAAoB3a,KAAKgY,gBAAiBsC,GAEnF,OAAOA,K,0CAMHM,EAAYJ,GAC5B,OAAOxa,KAAK6a,qBAAqBD,EAAYJ,GAAO/V,OAAS,I,2CAG5CmW,EAAYJ,GAC7B,OAAOI,EAAWE,QAAO,SAAU/B,GAC/B,IAAIgC,EAAOhC,EAAU/W,EACjBgZ,EAAOjC,EAAU9W,EAEjByY,EAAO3B,EAAU/W,EAAI+W,EAAUtY,MAC/Bwa,EAAOlC,EAAU9W,EAAI8W,EAAUpY,OAEnC,OAAI6Z,EAAMxY,GAAK+Y,GAAQP,EAAMxY,GAAK0Y,GAAQF,EAAMvY,GAAK+Y,GAAQR,EAAMvY,GAAKgZ,GAC7DlC,S,KClJRmC,G,WA9KX,aACC,oBAKGlb,KAAKmb,MAAQ,GAObnb,KAAKob,OAAS,EAMdpb,KAAKqb,OAAS,CACVrZ,EAAG,EACHC,EAAG,EACHJ,EAAG,EACHC,EAAG,GAOP9B,KAAKsb,YAAc,CACfzZ,EAAG,EACHC,EAAG,GAQP9B,KAAKub,kBAAoB,CACrBvZ,EAAG,EACHC,EAAG,EACHJ,EAAG,EACHC,EAAG,GAMP9B,KAAKwb,OAAS,KAMdxb,KAAKyb,UAAW,EAMhBzb,KAAK0b,SAAW,EAMhB1b,KAAK2b,SAAW,EAMhB3b,KAAK4b,UAAY,E,kDAGTxX,GAERpE,KAAKyb,SAAWrX,G,eAKhB,OAAOpE,KAAKyb,W,0BAGNrX,GAENpE,KAAKqb,OAASjX,G,eAKd,OAAOpE,KAAKqb,S,+BAGDjX,GAEXpE,KAAKsb,YAAclX,G,eAKnB,OAAOpE,KAAKsb,c,qCAGKlX,GAEjBpE,KAAKub,kBAAoBnX,G,eAKzB,OAAOpE,KAAKub,oB,0BAGNnX,GAENpE,KAAKwb,OAASpX,G,eAKd,OAAOpE,KAAKwb,S,yBAGPpX,GAELpE,KAAKmb,MAAQ/W,EACbpE,KAAKob,MAAQhX,EAAMyX,WAAW,I,eAK9B,OAAO7b,KAAKmb,Q,+BAKZ,OAAOnb,KAAK4b,W,aAGHxX,GAETpE,KAAK4b,UAAYxX,I,8BAKjB,OAAOpE,KAAK0b,U,aAGJtX,GAERpE,KAAK0b,SAAWtX,I,8BAKhB,OAAOpE,KAAK2b,U,aAGJvX,GAERpE,KAAK2b,SAAWvX,I,2BAKhB,OAAOpE,KAAKob,U,KCyBLU,G,kDAjMX,WAAYvD,EAAUrT,GAAQ,IAAD,8BACzB,gBAMK6W,MAAQxD,EAAShU,MAAM,KACvByX,MAAM,GAAI,GACV7L,KAAK,KAMV,EAAK8L,UAAY1D,EAMjB,EAAKiD,OAAStW,EAMd,EAAKgX,MAAQ,EAMb,EAAKC,YAAc,EAMnB,EAAKC,YAAc,EAMnB,EAAKC,UAAY,EAMjB,EAAKC,YAAa,EAMlB,EAAKC,gBAAkB,EAMvB,EAAKC,YAAc,GA/DM,E,wDAmGjB1Z,GACR,IAAI2Z,EAAQ,KAMZ,OAJIzc,KAAKwc,YAAYhb,eAAesB,KAChC2Z,EAAQzc,KAAKwc,YAAY1Z,IAGtB2Z,I,oCAOGxW,GACV,IAAIwW,EAAQ,KAEZ,IAAK,IAAM3Z,KAAU9C,KAAKwc,YAClBxc,KAAKwc,YAAYhb,eAAesB,IAC5B9C,KAAKwc,YAAY1Z,GAAQmD,OAASA,IAClCwW,EAAQzc,KAAKwc,YAAY1Z,IAKrC,OAAO2Z,I,yCAIP,IAAK,IAAM3Z,KAAU9C,KAAKwc,YAClBxc,KAAKwc,YAAYhb,eAAesB,KAChC9C,KAAKwc,YAAY1Z,GAAQkC,SAAWhF,KAAKuc,gBAAkBvc,KAAKwc,YAAY1Z,GAAQlB,MAAMC,GAAK,EAC/F7B,KAAKwc,YAAY1Z,GAAQqC,SAAWnF,KAAKuc,iBAAmBvc,KAAKuc,gBAAkBvc,KAAKwc,YAAY1Z,GAAQlB,MAAMC,GAAK,K,iCAhE/H,OAAO7B,KAAKwc,a,aAGDpY,GACX,IACIC,EADEG,EAAMJ,EAAMK,OAEdiY,EAAW,EACXC,EAAY,EAEhB,IAAKtY,EAAI,EAAGA,EAAIG,EAAKH,IACjBrE,KAAKwc,YAAYpY,EAAMC,GAAGmC,IAAM,IAAI0U,GAGpClb,KAAKwc,YAAYpY,EAAMC,GAAGmC,IAAIrB,SAAWf,EAAMC,GAAG5D,MAElDic,EAAWtY,EAAMC,GAAG5D,MAAQic,EAAWtY,EAAMC,GAAG5D,MAAQic,EACxDC,EAAYvY,EAAMC,GAAG1D,OAASgc,EAAYvY,EAAMC,GAAG1D,OAASgc,EAGhE3c,KAAKuc,gBAAkBG,EACvB1c,KAAKmc,YAAcQ,EACnB3c,KAAKkc,MAAQS,EAGb3c,KAAKoc,YAAc,GACnBpc,KAAKqc,UAAY,K,iCA6CjB,OAAOrc,KAAKoc,a,aAGDhY,GACXpE,KAAKoc,YAAchY,I,+BAInB,OAAOpE,KAAKqc,W,aAGHjY,GACTpE,KAAKqc,UAAYjY,I,gCAIjB,OAAOpE,KAAKsc,Y,aAGFlY,GACVpE,KAAKsc,WAAalY,I,qCAIlB,OAAOpE,KAAKuc,iB,aAGGnY,GACfpE,KAAKuc,gBAAkBnY,I,iCAIvB,OAAOpE,KAAKmc,a,aAGD/X,GACXpE,KAAKmc,YAAc/X,I,2BAInB,OAAOpE,KAAKkc,O,aAGP9X,GACLpE,KAAKkc,MAAQ9X,I,2BAIb,OAAOpE,KAAK+b,Q,+BAIZ,OAAO/b,KAAKic,c,GA9LSjd,KCqId4d,G,WAtIX,aACC,oB,0DAIe9W,EAAMrF,EAAOuB,EAAGC,GAE5B,OAAO6D,EAAO7D,GAAa,EAARxB,GAAmB,EAAJuB,EAAU,K,mCAG5B8D,EAAMrF,EAAOE,GAChC,IACOqB,EAFiC6a,EACzC,uDADqD,EAIjD,IAAK7a,EAAI,EAAGA,EAAIvB,EAAOuB,IAEnB,IAAK,IAAIC,EAAI,EAAGA,EAAItB,EAAQsB,IAExB,GAAIjC,KAAK8c,SAAShX,EAAMrF,EAAOuB,EAAGC,GAAK4a,EAEnC,OAAO7a,EAKnB,OAAO,I,oCAGU8D,EAAMrF,EAAOE,GACjC,IACOqB,EAFkC6a,EAC1C,uDADsD,EAIlD,IAAK7a,EAAIvB,EAAQ,EAAGuB,GAAK,EAAGA,IAExB,IAAK,IAAIC,EAAI,EAAGA,EAAItB,EAAQsB,IAExB,GAAIjC,KAAK8c,SAAShX,EAAMrF,EAAOuB,EAAGC,GAAK4a,EAEnC,OAAOpc,EAAQuB,EAAI,EAK/B,OAAO,I,kCAGQ8D,EAAMrF,EAAOE,GAC/B,IACOsB,EAFgC4a,EACxC,uDADoD,EAIhD,IAAK5a,EAAI,EAAGA,EAAItB,EAAQsB,IAEpB,IAAK,IAAID,EAAI,EAAGA,EAAIvB,EAAOuB,IAEvB,GAAIhC,KAAK8c,SAAShX,EAAMrF,EAAOuB,EAAGC,GAAK4a,EAEnC,OAAO5a,EAKnB,OAAO,I,qCAGW6D,EAAMrF,EAAOE,GAClC,IACOsB,EAFmC4a,EAC3C,uDADuD,EAInD,IAAK5a,EAAItB,EAAS,EAAGsB,GAAK,EAAGA,IAEzB,IAAK,IAAID,EAAI,EAAGA,EAAIvB,EAAOuB,IAEvB,GAAIhC,KAAK8c,SAAShX,EAAMrF,EAAOuB,EAAGC,GAAK4a,EAEnC,OAAOlc,EAASsB,EAAI,EAKhC,OAAO,I,2BAGCoJ,GACX,IAAD,EADmBwR,EACnB,uDAD+B,EAEvBE,EAAMrG,SAAS4B,cAAc,UAC7BtX,EAAM+b,EAAI9b,WAAW,MAF7B,cAIqBoK,GAJrB,IAII,2BACA,CAAC,IADQ/I,EACT,QACQiF,EAAMjF,EAAK4C,MAEf6X,EAAItc,MAAQ8G,EAAI9G,MAChBsc,EAAIpc,OAAS4G,EAAI5G,OAEjBK,EAAIE,UAAU,EAAG,EAAGqG,EAAI9G,MAAO8G,EAAI5G,QACnCK,EAAIK,UAAUkG,EAAK,EAAG,EAAGA,EAAI9G,MAAO8G,EAAI5G,OAAQ,EAAG,EAAG4G,EAAI9G,MAAO8G,EAAI5G,QAErE,IAAImF,EAAO9E,EAAIwX,aAAa,EAAG,EAAGjR,EAAI9G,MAAO8G,EAAI5G,QAAQmF,KACrDkX,EAAS,CAAC9Z,KAAM,EAAG+Z,MAAO,EAAG7Z,IAAK,EAAG8Z,OAAQ,GAEjDF,EAAO9Z,KAAOlD,KAAKmd,aAAarX,EAAMyB,EAAI9G,MAAO8G,EAAI5G,OAAQkc,GACzDG,EAAO9Z,OAASqE,EAAI9G,OAEpBuc,EAAOC,MAAQjd,KAAKod,cAActX,EAAMyB,EAAI9G,MAAO8G,EAAI5G,OAAQkc,GAC/DG,EAAO5Z,IAAMpD,KAAKqd,YAAYvX,EAAMyB,EAAI9G,MAAO8G,EAAI5G,OAAQkc,GAC3DG,EAAOE,OAASld,KAAKsd,eAAexX,EAAMyB,EAAI9G,MAAO8G,EAAI5G,OAAQkc,IAE7DG,EAAO9Z,KAAO,GAAK8Z,EAAOC,MAAQ,GAAKD,EAAO5Z,IAAM,GAAK4Z,EAAOE,OAAS,KAEzE5a,EAAKib,SAAU,EACfjb,EAAKkb,iBAAiBxb,EAAIgb,EAAO9Z,KACjCZ,EAAKkb,iBAAiBvb,EAAI+a,EAAO5Z,IACjCd,EAAKkb,iBAAiB3b,EAAI0F,EAAI9G,MAAQuc,EAAO9Z,KAAO8Z,EAAOC,MAC3D3a,EAAKkb,iBAAiB1b,EAAIyF,EAAI5G,OAASqc,EAAO5Z,IAAM4Z,EAAOE,UAK/D5a,EAAKib,SAAU,EACfjb,EAAKkb,iBAAiBxb,EAAI,EAC1BM,EAAKkb,iBAAiBvb,EAAI,EAC1BK,EAAKkb,iBAAiB3b,EAAI,EAC1BS,EAAKkb,iBAAiB1b,EAAI,GAG1BQ,EAAKib,UAELjb,EAAKV,MAAMC,EAAIS,EAAKkb,iBAAiB3b,EACrCS,EAAKV,MAAME,EAAIQ,EAAKkb,iBAAiB1b,IA7CjD,mC,KC+HW2b,G,WAlNX,WAAY3X,GAAqB,IAAf2E,EAAc,uDAAJ,GAAI,oBAC5BzK,KAAK0d,QAAUhH,SAAS4B,cAAc,UAEtCtY,KAAKS,MAAQ,EACbT,KAAKW,OAAS,EAEdX,KAAKiU,OAAOnO,EAAM2E,G,mDAyDf3E,GAAqB,IAAf2E,EAAc,uDAAJ,GACfzJ,EAAMhB,KAAK0d,QAAQzc,WAAW,MAE9B0c,EAAwB3c,EAAI2c,sBAChC3c,EAAI2c,uBAAyBlT,EAAQmT,iBAJd,MAMDH,EAAgBI,QAAQ/X,EAAM2E,GAA/ChK,EANkB,EAMlBA,MAAOE,EANW,EAMXA,OAEZX,KAAKS,MAAQA,EACbT,KAAKW,OAASA,EACdX,KAAK0d,QAAQjd,MAAQA,EACrBT,KAAK0d,QAAQ/c,OAASA,EAEtBK,EAAIE,UAAU,EAAG,EAAGT,EAAOE,GAbJ,oBAeNmF,GAfM,IAevB,2BAAuB,CAAC,IAAfxD,EAAc,QACnBtC,KAAK8d,WAAW9c,EAAKsB,EAAMmI,IAhBR,8BAmBvBzJ,EAAI2c,sBAAwBA,I,4BAG1BI,GACF,GAAY,IAARA,EACA,OAAO/d,KAAK0d,QAGhB,IAAIM,EAAatH,SAAS4B,cAAc,UAOxC,OANA0F,EAAWvd,MAAQI,KAAKod,MAAMje,KAAK0d,QAAQjd,MAAQsd,IAAQ,EAC3DC,EAAWrd,OAASE,KAAKod,MAAMje,KAAK0d,QAAQ/c,OAASod,IAAQ,EAE/CC,EAAW/c,WAAW,MAC5BI,UAAUrB,KAAK0d,QAAS,EAAG,EAAG1d,KAAK0d,QAAQjd,MAAOT,KAAK0d,QAAQ/c,OAAQ,EAAG,EAAGqd,EAAWvd,MAAOud,EAAWrd,QAE3Gqd,I,oCAGGhd,EAAKsB,EAAMmI,GACrB,GAAKA,EAAQyT,QAAb,CAIA,IAAIP,EAAwB3c,EAAI2c,sBAChC3c,EAAI2c,uBAAwB,EAE5B,IAAIQ,EAAK7b,EAAKV,MAAMI,EAChBoc,EAAK9b,EAAKV,MAAMK,EAEhBK,EAAKP,UACLoc,EAAK,EACLC,EAAK,GAGT,IAAI7W,EAAMjF,EAAK4C,MAGflE,EAAIK,UAAUkG,EACV,EAAG,EACH,EAAG,EACH4W,EAAK1T,EAAQyT,QAASE,EAAK3T,EAAQyT,QACnCzT,EAAQyT,QAASzT,EAAQyT,SAE7Bld,EAAIK,UAAUkG,EACV,EAAGjF,EAAK+b,WAAWvc,EAAI,EACvB,EAAG,EACHqc,EAAK1T,EAAQyT,QAASE,EAAK9b,EAAKV,MAAME,EACtC2I,EAAQyT,QAASzT,EAAQyT,SAE7Bld,EAAIK,UAAUkG,EACVjF,EAAK+b,WAAWxc,EAAI,EAAG,EACvB,EAAG,EACHsc,EAAK7b,EAAKV,MAAMC,EAAGuc,EAAK3T,EAAQyT,QAChCzT,EAAQyT,QAASzT,EAAQyT,SAE7Bld,EAAIK,UAAUkG,EACVjF,EAAK+b,WAAWxc,EAAI,EAAGS,EAAK+b,WAAWvc,EAAI,EAC3C,EAAG,EACHqc,EAAK7b,EAAKV,MAAMC,EAAGuc,EAAK9b,EAAKV,MAAME,EACnC2I,EAAQyT,QAASzT,EAAQyT,SAG7Bld,EAAIK,UAAUkG,EACV,EAAGjF,EAAKkb,iBAAiBvb,EACzB,EAAGK,EAAKkb,iBAAiB1b,EACzBqc,EAAK1T,EAAQyT,QAASE,EACtB3T,EAAQyT,QAAS5b,EAAKV,MAAME,GAEhCd,EAAIK,UAAUkG,EACVjF,EAAK+b,WAAWxc,EAAI,EAAGS,EAAKkb,iBAAiBvb,EAC7C,EAAGK,EAAKkb,iBAAiB1b,EACzBqc,EAAK7b,EAAKV,MAAMC,EAAGuc,EACnB3T,EAAQyT,QAAS5b,EAAKV,MAAME,GAEhCd,EAAIK,UAAUkG,EACVjF,EAAKkb,iBAAiBxb,EAAG,EACzBM,EAAKkb,iBAAiB3b,EAAG,EACzBsc,EAAIC,EAAK3T,EAAQyT,QACjB5b,EAAKV,MAAMC,EAAG4I,EAAQyT,SAE1Bld,EAAIK,UAAUkG,EACVjF,EAAKkb,iBAAiBxb,EAAGM,EAAK+b,WAAWvc,EAAI,EAC7CQ,EAAKkb,iBAAiB3b,EAAG,EACzBsc,EAAIC,EAAK9b,EAAKV,MAAME,EACpBQ,EAAKV,MAAMC,EAAG4I,EAAQyT,SAE1Bld,EAAI2c,sBAAwBA,K,iCAGrB3c,EAAKsB,EAAMmI,GAClB,IAAKnI,EAAKgc,WAAY,CAElB,IAAI/W,EAAMjF,EAAK4C,MAEX5C,EAAKP,SACLf,EAAIud,OACJvd,EAAIwd,UAAUlc,EAAKV,MAAMI,EAAIM,EAAKV,MAAME,EAAGQ,EAAKV,MAAMK,GAEtDjB,EAAIyd,OAAO5d,KAAK6d,GAAK,GAErB1e,KAAK2e,cAAc3d,EAAKsB,EAAMmI,GAE9BzJ,EAAIK,UAAUkG,EACVjF,EAAKkb,iBAAiBxb,EAAGM,EAAKkb,iBAAiBvb,EAC/CK,EAAKkb,iBAAiB3b,EAAGS,EAAKkb,iBAAiB1b,EAC/C,EAAG,EACHQ,EAAKV,MAAMC,EAAGS,EAAKV,MAAME,GAE7Bd,EAAI4d,YAGJ5e,KAAK2e,cAAc3d,EAAKsB,EAAMmI,GAE9BzJ,EAAIK,UAAUkG,EACVjF,EAAKkb,iBAAiBxb,EAAGM,EAAKkb,iBAAiBvb,EAC/CK,EAAKkb,iBAAiB3b,EAAGS,EAAKkb,iBAAiB1b,EAC/CQ,EAAKV,MAAMI,EAAGM,EAAKV,MAAMK,EACzBK,EAAKV,MAAMC,EAAGS,EAAKV,MAAME,O,6BAOrC,OAAO9B,KAAK0d,W,+BArMD5X,GAAqB,IAAf2E,EAAc,uDAAJ,GACvBhK,EAAQgK,EAAQhK,OAAS,EACzBE,EAAS8J,EAAQ9J,QAAU,EAE3Bke,EAAUpU,EAAQoU,SAAW,EAC7BX,EAAUzT,EAAQyT,SAAW,EAEjC,IAAKzT,EAAQ0L,UAAW,CACpB1V,EAAQ,EACRE,EAAS,EAFW,oBAIHmF,GAJG,IAIpB,2BAAuB,CAAC,IAAfxD,EAAc,QAEfT,EAAIS,EAAKV,MAAMI,EAAIM,EAAKV,MAAMC,EAC9BC,EAAIQ,EAAKV,MAAMK,EAAIK,EAAKV,MAAME,EAE9BQ,EAAKP,UACLF,EAAIS,EAAKV,MAAMI,EAAIM,EAAKV,MAAME,EAC9BA,EAAIQ,EAAKV,MAAMK,EAAIK,EAAKV,MAAMC,GAG9BA,EAAIpB,IACJA,EAAQoB,GAERC,EAAInB,IACJA,EAASmB,IAlBG,8BAsBpBrB,GAASoe,EAAUX,EACnBvd,GAAUke,EAAUX,EAGxB,GAAIzT,EAAQ2L,WAAY,CACpB,IAAI0I,EAAKje,KAAKod,MAAMpd,KAAKke,IAAIte,GAASI,KAAKke,IAAI,IAC3CC,EAAKne,KAAKod,MAAMpd,KAAKke,IAAIpe,GAAUE,KAAKke,IAAI,IAE5CE,EAAKpe,KAAKqe,IAAI,EAAGJ,GACjBK,EAAKte,KAAKqe,IAAI,EAAGF,GAEjBC,EAAKxe,IACLwe,EAAKpe,KAAKqe,IAAI,EAAGJ,EAAK,IAEtBK,EAAKxe,IACLwe,EAAKte,KAAKqe,IAAI,EAAGF,EAAK,IAG1Bve,EAAQwe,EACRte,EAASwe,EAGb,MAAO,CAAC1e,QAAOE,c,KC0PRye,G,6GA9SY/T,GAInB,IAFA,IAAIgU,EAAY,GAEPhb,EAAI,EAAGA,EAAIgH,EAAM5G,OAAQJ,IAG9B,IADA,IAAIib,EAAQjU,EAAMhH,GACTkb,EAAIlb,EAAI,EAAGkb,EAAIlU,EAAM5G,OAAQ8a,IACtC,CACI,IAAIC,EAAQnU,EAAMkU,GACdD,EAAMpa,MAAM4C,UAAY0X,EAAMta,MAAM4C,SAAWuX,EAAU/X,QAAQkY,GAAS,IAE1EA,EAAMH,UAAYC,EAClBD,EAAUhZ,KAAKmZ,IAK3B,cAAiBH,EAAjB,eACA,CADK,IAAIld,EAAI,KAETkJ,EAAMkC,OAAOlC,EAAM/D,QAAQnF,GAAO,GAGtC,MAAO,CACHkJ,MAAOA,EACPgU,UAAWA,K,qCAIGhU,EAAOgU,GAEzB,IADJ,EACQI,EAAS,GACTC,EAAkB,GAF1B,cAIqBL,GAJrB,IAII,2BACA,CAAC,IADQ/c,EACT,QACQ6D,EAAKkF,EAAM/D,QAAQhF,EAAK+c,WAC5B,GAAIlZ,GAAM,EACV,CACI,IAAIhE,EAAOkJ,EAAMlF,GAEbsJ,EAAQvH,OAAOgO,OAAO,GAAI/T,GAE9BsN,EAAM1H,KAAOzF,EAAKyF,KAClB0H,EAAMvK,MAAQ5C,EAAK4C,MACnBuK,EAAMkQ,aAAerd,EAAK+Q,KAC1B5D,EAAM6O,YAAa,EAEnBoB,EAAgBrZ,KAAK/D,GACrBmd,EAAOpZ,KAAKoJ,KAnBxB,8BAuBI,cAAiBiQ,EAAjB,eACA,CADK,IAAIpd,EAAI,KAET+c,EAAU9R,OAAO8R,EAAU/X,QAAQhF,GAAO,GAG9C,cAAiBmd,EAAjB,eACA,CADK,IAAInd,EAAI,KAETA,EAAKsd,QAAS,EACdvU,EAAMhF,KAAK/D,GAGf,OAAO+I,I,6BAIV,IAAD,OADYwU,EACZ,uDADqB,GAAIpV,EACzB,uDADmC,GAAIqV,EACvC,uDADoD,KAAMC,EAC1D,uDADoE,KAE5D1U,EAAQ,GAERwT,EAAUpU,EAAQoU,SAAW,EAC7BX,EAAUzT,EAAQyT,SAAW,EAE7BxB,EAAW,EAAGC,EAAY,EAC1BqD,EAAW,EAAGC,EAAY,EAE1BC,EAAiBzV,EAAQyV,gBAAkB,EAC3CA,EAAiB,MAEjBA,EAAiB,KAGrB,IAfJ,EAeQ5W,EAAQpB,OAAOC,KAAK0X,GACnBM,OAhBT,cAkBoB7W,GAlBpB,IAkBI,2BACA,CAAC,IADQhD,EACT,QACQiB,EAAMsY,EAAOvZ,GAEjBoW,GAAYnV,EAAI9G,MAChBkc,GAAapV,EAAI5G,OAEb4G,EAAI9G,MAAQuf,IAEZA,EAAWzY,EAAI9G,MAAkB,EAAVoe,EAAwB,EAAVX,GAErC3W,EAAI5G,OAASsf,IAEbA,EAAY1Y,EAAI5G,OAAmB,EAAVke,EAAwB,EAAVX,GAG3C7S,EAAMhF,KAAK,CACPzE,MAAO,CAACI,EAAG,EAAGC,EAAG,EAAGJ,EAAG0F,EAAI9G,MAAOqB,EAAGyF,EAAI5G,QACzCoB,SAAS,EACTwb,SAAS,EACTC,iBAAkB,CAACxb,EAAG,EAAGC,EAAG,EAAGJ,EAAG0F,EAAI9G,MAAOqB,EAAGyF,EAAI5G,QACpD0d,WAAY,CAACxc,EAAG0F,EAAI9G,MAAOqB,EAAGyF,EAAI5G,QAClCmC,OAAQwD,EACR+M,KAAM9L,EAAI6Q,UACVlT,MAAOqC,KA1CnB,8BA8CI,IAAI9G,EAAQgK,EAAQhK,OAAS,EACzBE,EAAS8J,EAAQ9J,QAAU,EAW/B,GATKF,IAEDA,EAAQic,GAEP/b,IAEDA,EAASgc,GAGTlS,EAAQ2L,WACZ,CACI,IAAI0I,EAAKje,KAAKod,MAAMpd,KAAKke,IAAIte,GAASI,KAAKke,IAAI,IAC3CC,EAAKne,KAAKod,MAAMpd,KAAKke,IAAIpe,GAAUE,KAAKke,IAAI,IAE5CE,EAAKpe,KAAKqe,IAAI,EAAGJ,GACjBK,EAAKte,KAAKqe,IAAI,EAAGF,GAEjBC,EAAKxe,IAELwe,EAAKpe,KAAKqe,IAAI,EAAGJ,EAAK,IAEtBK,EAAKxe,IAELwe,EAAKte,KAAKqe,IAAI,EAAGF,EAAK,IAG1Bve,EAAQwe,EACRte,EAASwe,EAGb,GAAI1e,EAAQuf,GAAYrf,EAASsf,EAEzBF,IAEAK,QAAQC,MAAM,qBAAsBL,EAAUC,GAC9CF,EAAQ,SALhB,CAYItV,EAAQ0K,WAERyH,GAAQ0D,KAAKjV,EAAO6U,GA7F5B,oBAgGqB7U,GAhGrB,IAgGI,2BACA,CAAC,IADQ/I,EACT,QACIA,EAAKV,MAAMC,GAAe,EAAVgd,EAAwB,EAAVX,EAC9B5b,EAAKV,MAAME,GAAe,EAAV+c,EAAwB,EAAVX,GAnGtC,8BAsGI,IAAImB,EAAY,GAEhB,GAAI5U,EAAQ6L,gBACZ,CACI,IAAI/K,EAAM6T,EAAc9I,gBAAgBjL,GAExCA,EAAQE,EAAIF,MACZgU,EAAY9T,EAAI8T,UAGpB,IAyBIkB,EAzIR,EAgHQC,EAAgB,WAEhB,IADJ,EACQ/J,EAAU,GADlB,cAE4BgK,GAF5B,IAEI,2BACA,CAAC,IADQC,EACT,QACI,GAAIA,IAAgB9Q,EAEhB,IAAK,IAAIpF,KAAUkW,EAAYjK,QAE3BA,EAAQpQ,KAAK,CAACqa,cAAalK,aAAckK,EAAYjK,QAAQjM,GAASK,eAAe,IACrF4L,EAAQpQ,KAAK,CAACqa,cAAalK,aAAckK,EAAYjK,QAAQjM,GAASK,eAAe,KATrG,8BAaI,OAAO4L,GAGPiK,EAAcjW,EAAQS,QAAUyV,EAChCnK,EAAe/L,EAAQ+L,cAAgBmK,EAAgBlK,QAAQ3K,iBAC/D8U,EAAgBF,IAAgB9Q,EAAiB4Q,IAAkB,CAAC,CACpEE,cACAlK,eACA3L,cAAeJ,EAAQI,gBAIvBgW,EAAgB3T,IAChB4T,EAAoB,EAEpBC,EAAa,EA7IrB,cA8IqB1V,GA9IrB,IA8II,2BACA,CAAC,IADQlJ,EACT,QACI4e,GAAc5e,EAAKkc,WAAWxc,EAAIM,EAAKkc,WAAWvc,GAhJ1D,kDAmJsB8e,GAnJtB,qBA+KQ,IA/KR,IAmJaI,EAnJb,QAqJYzV,EAAM,GACN0V,EAAY,EAGZC,EAASN,EAAanc,OAAS,EAAI4G,EAAM1C,KAAI,SAAAxG,GAE7C,OAAO+F,OAAOgO,OAAO,GAAI/T,EAAM,CAC3BP,MAAOsG,OAAOgO,OAAO,GAAI/T,EAAKP,OAC9B4b,iBAAkBtV,OAAOgO,OAAO,GAAI/T,EAAKqb,kBACzCa,WAAYnW,OAAOgO,OAAO,GAAI/T,EAAKkc,iBAEtChT,EAID8V,EAAaP,EAAanc,OAAS,EAAI4a,EAAU1W,KAAI,SAAAxG,GACxD,IAAD,gBACsB+e,GADtB,IACI,2BACA,CAAC,IADQ1B,EACT,QACI,GAAIrd,EAAKkd,UAAUna,MAAM4C,SAAW0X,EAAMta,MAAM4C,QAE5C,OAAOI,OAAOgO,OAAO,GAAI/T,EAAM,CAACkd,UAAWG,KALvD,kCAQKH,EAEE6B,EAAOzc,QACd,CACI,IADJ,EAEQoD,EADS,IAAImZ,EAAMN,YAAYjgB,EAAOE,EAAQqgB,EAAMnW,eACpCuW,KAAKF,EAAQF,EAAMxK,cAF3C,cAIqB3O,GAJrB,IAII,2BACA,CAAC,IADQvF,EACT,QACIA,EAAKV,MAAMI,GAAK6c,EAAUX,EAC1B5b,EAAKV,MAAMK,GAAK4c,EAAUX,EAC1B5b,EAAKV,MAAMC,GAAe,EAAVgd,EAAwB,EAAVX,EAC9B5b,EAAKV,MAAME,GAAe,EAAV+c,EAAwB,EAAVX,GATtC,8BAYQzT,EAAQ6L,kBAERzO,EAASuX,EAAciC,eAAexZ,EAAQsZ,IAGlD5V,EAAIlF,KAAKwB,GAjBb,oBAmBqBA,GAnBrB,IAmBI,2BACA,CAAC,IADQvF,EACT,QACI,EAAKgf,WAAWJ,EAAQ5e,EAAKQ,SArBrC,oCAwBmD2a,GAAgBI,QAAQhW,EAAQ4C,GAC/EwW,GAzBJ,EAwBSxgB,MAxBT,EAwB4BE,OAI5B,IAAI4gB,EAAShW,EAAI9G,OACb+c,EAAaT,EAAaE,GAE1BM,EAASV,GAAkBU,IAAWV,GAAiBW,EAAaV,KAEpEP,EAAahV,EACbsV,EAAgBU,EAChBT,EAAoBU,IAhE5B,2BACC,IApJL,8BAuNQ1B,GAEAA,EAAWS,M,iCAIDlV,EAAOvI,GAErB,IAAK,IAAIuB,EAAI,EAAGA,EAAIgH,EAAM5G,OAAQJ,IAE9B,GAAIgH,EAAMhH,GAAGvB,SAAWA,EAGpB,YADAuI,EAAMkC,OAAOlJ,EAAG,O,KCjTjB,OAA0B,oC,oBCyK1Bod,I,wDA7JX,WAAYtiB,GAAQ,IAAD,8BACf,cAAMA,IAGDuiB,YAAc,EAAKA,YAAYriB,KAAjB,gBACnB,EAAKsiB,aAAe,EAAKA,aAAatiB,KAAlB,gBAGpBN,EAASgF,GAAGjF,EAAkB,EAAK4iB,aACnC3iB,EAASgF,GAAGjF,EAAmB,EAAK6iB,cAGpC,EAAKhc,MAAQ,CACTnG,KAAM,KACN4J,QAAS,IAdE,E,yDAkBN9J,GACTU,KAAK+F,SAAS,CACVvG,KAAM,S,kCAIFsG,GACR9F,KAAK+F,SAAS,CACVqD,QAAStD,EAAKsD,QACd5J,KAAMsG,EAAKtG,S,+BAKf,IAAIoiB,EAAQ,8BACZ,GAAK5hB,KAAK2F,MAAMnG,KACZ,OAAQQ,KAAK2F,MAAMnG,MACf,KAAKP,EACD2iB,EAAQ,yBAAKniB,UAAU,SACnB,yBAAKA,UAAU,6BACX,yBAAKA,UAAU,oBACX,yBAAKC,IAAKC,IAAMC,IAAI,UAExB,yBAAKH,UAAU,yCAAf,oBACsBI,EAAQC,SAE9B,6BACA,2BAAOL,UAAU,uBACb,+BACA,4BACI,sCACA,4BAAI,uBAAGoiB,KAAMhiB,EAAQiiB,OAAQla,OAAO,UAAU/H,EAAQiiB,UAE1D,4BACI,sCACA,4BAAI,uBAAGD,KAAMhiB,EAAQkiB,OAAQna,OAAO,UAAU/H,EAAQkiB,UAG1D,4BACI,oCACA,4BACI,6BACI,uBAAGF,KAAK,mCAAmCja,OAAO,UAAlD,UAEJ,6BACI,uBAAGia,KAAK,+BAA+Bja,OAAO,UAA9C,UAEJ,6BACI,uBAAGia,KAAK,0CAA0Cja,OAAO,UAAzD,iBAEJ,6BACI,uBAAGia,KAAK,sCAAsCja,OAAO,UAArD,gBAEJ,6BACI,uBAAGia,KAAK,0CAA0Cja,OAAO,UAAzD,oBAEJ,6BACI,uBAAGia,KAAK,gDAAgDja,OAAO,UAA/D,mBAEJ,6BACI,uBAAGia,KAAK,8BAA8Bja,OAAO,UAA7C,wBAEJ,6BACI,uBAAGia,KAAK,6CAA6Cja,OAAO,UAA5D,sBAKZ,4BACI,4CACA,oDAMR,6BACI,4BAAQnI,UAAU,aAAaM,QAASC,KAAK2hB,cAA7C,SAIZ,MAEJ,KAAK1iB,EACD2iB,EAAQ,yBAAKniB,UAAU,SACnB,yBAAKA,UAAU,+BACX,yBAAKA,UAAU,kCACX,yBAAKC,IAAKsiB,GAASpiB,IAAI,aAE3B,yBAAKH,UAAU,kCACVO,KAAK2F,MAAMyD,WAIxB,MAGJ,KAAKnK,EACD2iB,EAAQ,yBAAKniB,UAAU,SACnB,yBAAKA,UAAU,+BACX,yBAAKA,UAAU,kCACX,yBAAKA,UAAU,cACX,yBAAKG,IAAI,QAAQF,IAAK2gB,QAEzBrgB,KAAK2F,MAAMyD,SAEhB,yBAAK3J,UAAU,kCACX,4BAAQA,UAAU,aAAaM,QAASC,KAAK2hB,cAA7C,SAIZ,MAGJ,KAAK1iB,EACD2iB,EAAQ,yBAAKniB,UAAU,SACnB,yBAAKA,UAAU,+BACX,yBAAKA,UAAU,kCACVO,KAAK2F,MAAMyD,SAEhB,yBAAK3J,UAAU,kCACX,4BAAQA,UAAU,aAAaM,QAASC,KAAK2hB,cAA7C,SAIZ,MAGJ,QACIC,EAAQ,8BAIpB,OACI,6BAAMA,O,GAzJE3hB,cCuRLgiB,I,wDA7QX,WAAY9iB,GAAQ,IAAD,8BACf,cAAMA,IAGD+iB,mBAAqB,EAAKA,mBAAmB7iB,KAAxB,gBAC1B,EAAK8iB,kBAAoB,EAAKA,kBAAkB9iB,KAAvB,gBACzB,EAAK+iB,qBAAuB,EAAKA,qBAAqB/iB,KAA1B,gBAC5B,EAAKmV,YAAc,EAAKA,YAAYnV,KAAjB,gBACnB,EAAKiG,eAAiB,EAAKA,eAAejG,KAApB,gBAGtB,EAAKgjB,aAAe,GAGpB,EAAKC,YAAc,KAGnB,EAAKC,YAAc,KAGnB,EAAKC,aAAe,GAGpB,EAAKC,gBAAkB,IAAI1K,GAE3B,EAAK2K,mBAAqB,EAC1B,EAAKC,iBAAmB,EAExB,EAAKC,cAAgB,KAGrB7jB,EAASgF,GAAGjF,EAA0B,EAAKojB,oBAC3CnjB,EAASgF,GAAGjF,EAA4B,EAAKsjB,sBAC7CrjB,EAASgF,GAAGjF,EAAoB,EAAK0V,aACrCzV,EAASgF,GAAGjF,EAAqB,EAAKwG,gBAlCvB,E,2DAqCJQ,GACX9F,KAAK4iB,cAAgB9c,EAAK/C,aAE1B/C,KAAKuiB,YAAcviB,KAAK6iB,iBACxB7iB,KAAK8iB,W,2CAGYhd,GACjB9F,KAAKwiB,aAAe1c,EAEhBA,EAAK/C,eACL/C,KAAK4iB,cAAgB9c,EAAK/C,cAG9B/C,KAAKuiB,YAAcviB,KAAK6iB,iBACxB7iB,KAAK8iB,W,yCAGUhd,GACf,IAAIid,EAAa,GAEjB,IAAK,IAAMxK,KAAYzS,EACnB,GAAIA,EAAKtE,eAAe+W,GAAW,CAC/B,IAAMhR,EAAMzB,EAAKyS,GAEjB,IAAKvY,KAAKqiB,aAAa7gB,eAAe+W,GAAW,CAC7CvY,KAAKqiB,aAAa9J,GAAY,IAAIuD,GAAevD,EAAUhR,GAE3D,IAAIyb,EAAShjB,KAAKyiB,gBAAgBle,MAAMgD,EAAKgR,GAC7CvY,KAAK0iB,oBAAsBM,EAAOve,OAElCzE,KAAKqiB,aAAa9J,GAAU7W,WAAashB,EACzCD,EAAaA,EAAWE,OAAOD,IA8B3C,IAII3e,EAJE6e,EAAYxM,SAAS4B,cAAc,UACnC6K,EAASD,EAAUjiB,WAAW,MAE9BuD,EAAMue,EAAWte,OAGvB,IAAKJ,EAAI,EAAGA,EAAIG,EAAKH,IAAK,CACtB6e,EAAUziB,MAAQsiB,EAAW1e,GAAG6U,UAAUzY,MAC1CyiB,EAAUviB,OAASoiB,EAAW1e,GAAG6U,UAAUvY,OAE3CwiB,EAAOC,aAAaL,EAAW1e,GAAG6U,UAAW,EAAG,GAEhD,IAAIhU,EAAQ,IAAIsC,MAEhBxH,KAAKqiB,aAAaU,EAAW1e,GAAGkU,UAAU7W,WAAWqhB,EAAW1e,GAAGmC,IAAItB,MAAQA,EAE/EA,EAAMme,iBAAiB,OAAQrjB,KAAKmiB,mBACpCjd,EAAM4C,QAAUob,EAAUnQ,YAC1B7N,EAAMoe,IAAMP,EAAW1e,GAAGmC,GAC1BtB,EAAMkT,UAAY2K,EAAW1e,GAAGkU,SAChCrT,EAAMzE,MAAQsiB,EAAW1e,GAAG6U,UAAUzY,MACtCyE,EAAMvE,OAASoiB,EAAW1e,GAAG6U,UAAUvY,OACvCuE,EAAMxF,IAAMwjB,EAAUnQ,e,wCAIZzT,GACdA,EAAMsI,OAAO2b,oBAAoB,OAAQvjB,KAAKmiB,mBAC9CniB,KAAK2iB,mBAED3iB,KAAK2iB,mBAAqB3iB,KAAK0iB,qBAC/B1iB,KAAK0iB,mBAAqB,EAC1B1iB,KAAK2iB,iBAAmB,EAGnB3iB,KAAK4iB,gBACN5iB,KAAK4iB,cAAgB1a,OAAOC,KAAKnI,KAAKqiB,cAAc,GACpDriB,KAAKwiB,aAAazf,aAAe/C,KAAK4iB,cAEtC7jB,EAASQ,KAAKT,EAAqB,CAC/BiE,aAAc/C,KAAK4iB,iBAI3B5iB,KAAKuiB,YAAcviB,KAAK6iB,iBACxB7iB,KAAK8iB,Y,uCAKT,GAAK9iB,KAAK4iB,cAAV,CAIA,IAAI9c,EAAO,GAEX,GAAI9F,KAAKwiB,aAAa/P,UAClB,IAAK,IAAM8F,KAAYvY,KAAKqiB,aACxB,IAAK,IAAMvf,KAAU9C,KAAKqiB,aAAa9J,GAAU7W,WACzC1B,KAAKqiB,aAAa9J,GAAU7W,WAAWF,eAAesB,KACtDgD,EAAKhD,GAAU9C,KAAKqiB,aAAa9J,GAAU7W,WAAWoB,GAAQoC,YAM1E,IAAK,IAAMpC,KAAU9C,KAAKqiB,aAAariB,KAAK4iB,eAAelhB,WACnD1B,KAAKqiB,aAAariB,KAAK4iB,eAAelhB,WAAWF,eAAesB,KAChEgD,EAAKhD,GAAU9C,KAAKqiB,aAAariB,KAAK4iB,eAAelhB,WAAWoB,GAAQoC,OAKpF,OAAOY,K,wCAGOA,GACd,IAAIzB,EACEG,EAAMsB,EAAKrB,OAEjB,IAAKJ,EAAI,EAAGA,EAAIG,EAAKH,IAAK,CACtB,IAAM/C,EAASwE,EAAKzB,GAAGgP,KACjBvQ,EAASgD,EAAKzB,GAAGvB,OAEvB9C,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQlB,MAAMI,EAAI8D,EAAKzB,GAAGzC,MAAMI,EACrEhC,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQlB,MAAMK,EAAI6D,EAAKzB,GAAGzC,MAAMK,EACrEjC,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQlB,MAAMC,EAAIiE,EAAKzB,GAAGzC,MAAMC,EACrE7B,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQlB,MAAME,EAAIgE,EAAKzB,GAAGzC,MAAME,EACrE9B,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQub,WAAWxc,EAAIiE,EAAKzB,GAAGga,WAAWxc,EAC/E7B,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQub,WAAWvc,EAAIgE,EAAKzB,GAAGga,WAAWvc,EAC/E9B,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQ0a,iBAAiBxb,EAAI8D,EAAKzB,GAAGmZ,iBAAiBxb,EAC3FhC,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQ0a,iBAAiBvb,EAAI6D,EAAKzB,GAAGmZ,iBAAiBvb,EAC3FjC,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQ0a,iBAAiB3b,EAAIiE,EAAKzB,GAAGmZ,iBAAiB3b,EAC3F7B,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQ0a,iBAAiB1b,EAAIgE,EAAKzB,GAAGmZ,iBAAiB1b,EAC3F9B,KAAKqiB,aAAa/gB,GAAQI,WAAWoB,GAAQf,QAAU+D,EAAKzB,GAAGtC,W,+BAI7D,IAAD,OACmB,MAApB/B,KAAKuiB,cAIIra,OAAOC,KAAKnI,KAAKuiB,aAErB9d,OAAS,GACd2a,GAAcgC,KAAKphB,KAAKuiB,YAAaviB,KAAKwiB,cAAc,SAACjX,GACrD,EAAK+W,YAAc,GAD0C,oBAG5C/W,GAH4C,IAG7D,2BAAsB,CAAC,IAAdzF,EAAa,QACd0d,EAAW,IAAI/F,GAAgB3X,EAAM,EAAK0c,cAE9C,EAAKiB,kBAAkB3d,GAEvB,EAAKwc,YAAYjc,KAAK,CAClB3F,OAAQ8iB,EAAS9iB,OACjB8iB,SAAUA,EACVngB,UAAW,EAAKmf,aAAa/P,UAC7B1P,aAAc,EAAK6f,iBAZkC,8BAgB7D7jB,EAASQ,KAAKT,EAAsB,EAAKwjB,aACzCvjB,EAASQ,KAAKT,KAEf,S,oCAKP,GAAKkB,KAAKsiB,aAAetiB,KAAKsiB,YAAY7d,OAAS,EAC/C,IACkB2N,GAASsR,cAAc1jB,KAAKsiB,YAAY,GAAG5hB,OACrDV,KAAKqiB,aACLriB,KAAKwiB,cAEb,MAAOtO,GACHnV,EAASQ,KAAKT,EAAkB,CAC5BsK,QAAS,qBACT5J,KAAMP,SAKdF,EAASQ,KAAKT,EAAkB,CAC5BsK,QAAS,2BACT5J,KAAMP,M,+BAQd,OACI,yBAAKQ,UAAU,YACX,yBAAKA,UAAU,eACX,kBAAC,EAAD,MACA,yBAAKA,UAAU,cACX,kBAAC,EAAD,MACA,kBAAC,GAAD,CAAY8B,YAAavB,KAAKqiB,eAC9B,kBAAC,EAAD,CAAQ9gB,YAAavB,KAAKqiB,eAC1B,kBAAC,GAAD,a,GAtQNpiB,cChBlBK,IAAS2T,OACP,kBAAC,GAAD,MACAyC,SAASC,eAAe,W","file":"static/js/main.883d06cd.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoEAYAAADcbmQuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKgmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0wNS0xNlQxODo0NToxMCswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wNS0xNlQxOToxMDo1MCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMDUtMTZUMTk6MTA6NTArMDI6MDAiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNkNjcwNTJhLTY5ODEtNDM0Yy1iYjNjLWY5MWY1NDU4ZGExMSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjExOWEzNDQzLWE3MmUtNWQ0Mi1hOWE3LTQ2ZjQ4OGEzMjI2YyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk1MzhjZjcyLTA1MDQtZmM0Zi04ODk3LWFiMmIwYjk4NDdhNCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOllSZXNvbHV0aW9uPSI3MjAwMDAvMTAwMDAiIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiIGV4aWY6Q29sb3JTcGFjZT0iNjU1MzUiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI1MTIiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI1MTIiPiA8cGhvdG9zaG9wOlRleHRMYXllcnM+IDxyZGY6QmFnPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IkEiIHBob3Rvc2hvcDpMYXllclRleHQ9IkEiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJDIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSJDIi8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iQiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iQiIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTUzOGNmNzItMDUwNC1mYzRmLTg4OTctYWIyYjBiOTg0N2E0IiBzdEV2dDp3aGVuPSIyMDIwLTA1LTE2VDE4OjQ1OjEwKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozMTRlN2QzZC1iM2ZjLWRkNGItOTYwZi02ZTlhMDUyZDhkNWYiIHN0RXZ0OndoZW49IjIwMjAtMDUtMTZUMTk6MTA6NTArMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNkNjcwNTJhLTY5ODEtNDM0Yy1iYjNjLWY5MWY1NDU4ZGExMSIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0xNlQxOToxMDo1MCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzE0ZTdkM2QtYjNmYy1kZDRiLTk2MGYtNmU5YTA1MmQ4ZDVmIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk1MzhjZjcyLTA1MDQtZmM0Zi04ODk3LWFiMmIwYjk4NDdhNCIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk1MzhjZjcyLTA1MDQtZmM0Zi04ODk3LWFiMmIwYjk4NDdhNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvDzdOQAAAQ2SURBVGiB7VpNctNKEJ6mKNgkIE7wlBMgThBRsEecIM4JcG7gnCDmBDInsNhDRZzAukH0TmAVrHibfov5FEftGWtGkuWkyt/m02imu0etT/NnEzMzszqiI54dugNPHc/HCvT7988fL14+Hq2/evXh439/ifr6OSqwJ0ZToBkL8L+OSriAgkOUc/CvFvt/YDdx7Jc7DpzAb6Q/pby1pR4CzlEKwb9gP2uxi5HgyeBDyPET7oljAnvimMCeeOIJfO04pgV768HICSxFOfK0l+1jR7tzkejcM64dIyewEOVPrQrSs2iEUiBqI9TfsOZA2E1Qmgq7tmWPO0ZO4HfR8RgPmloSEKOUikRfCz9T8JqbOx5pV4HnHfpuBo19mKAfcIWIkad1iS3YGTUVdgN/gcWuAr/HurHwjGvHgSaR91BQ4di+BH++V55OxAKld7h/Ba4Vegk+GzxxNUZXoERzjEtEbYFEZaP2yQcDJpCIKBV71RrfSSlm5vkQgR4VBkggEVGE65XFU6V0At8MNvttop+ebsa+BHwhxthANVEIvibmP3+2l1kO8YdJYOp42nEJJS76BETU09NNgpYW5ftirnQir5xf9ECTSCLKuaXdRe/BQicuRmklEleBN5OHTgjds75fT2KZ8D6Ff7n82YFagf6slFITcK3imuv7KZvrQ+94Sp2cMAfgNWtm8Irr+m5+p6rpr+ZJu32/BN6KxKy5WZ9YEpxyu3/Tg6ZsflD/F2L2vxJ+b1v72eETJiIKcR2Lukxouy6Xol0CP4Fn7ESUF6rr4G/GV3zaubtJN+XNLMqKLe1v2Nze4RNRJyfMsTIrL+mtvL7ccRKRk0GJpNje3FfLrPbFcbCOLPcLN/M9wiOBREQxrkNRl+2wY2YucZ2Lukg115E2BAavQ3663eGpQNsy5JvjusnWzlWJjw8OCXw42E9EXaG0wgrHcBm4EvcT1W1SOTwcFZhY7rsqTymd6ArXmagLwBOLbbF1p7mgPhwcfxe2fWJvWStn5rnHDVrizIW/wtI+Aud+4Q1ovpD4/r4ea2d2w93LlciyXNk3by+HzAvdOx5qOaL9Lb39tyjQNmkU4Gq3eSsCcGSJmwsl1gelS9SHUM4USpl790DbhyglojZrd7BbgWuLQvz3nGb/YYvCt+Ps3tLNPBUXKbOy1+y6RTQcZxERTXCdCgUu8HCXA57rERHdIk4s6q62DmKb5391/xJhV4JzsPzz0rklXgW+xOlN1tJ3ZVPG0qKIfWydlLKf6tyxm5Kmqh6zzMps41uuFenb/wcKfHhIcCeUV+Ghhj9R3oCIaI24gaj7DCVmDl4ezqaRMvsrwXn/HU1TCTOLEtJWJQyjxJTN8ZcjxO/GQoG18kKR5ndQQNH9TbXC5beVM/Sj3GM//PC8uYUy7Sz2nTgZh4hI/vOgRjBCP/xw8N+Fnzr+B+lyAwYuvpYhAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0wNS0yMVQxMDozMDoxMyswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMDUtMjFUMTA6MzE6NTUrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDUtMjFUMTA6MzE6NTUrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ZjQ4YmJjOWItZWFmMS0wZjQx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\"","import EventEmitter from \"eventemitter3\";\r\n\r\nconst EVENT = {\r\n    ATLAS_LIST_CHANGED: 'ATLAS_LIST_CHANGED',\r\n    PACK_COMPLETED: 'PACK_COMPLETED',\r\n    PACK_OPTIONS_CHANGED: 'PACK_OPTIONS_CHANGED',\r\n    MULTIFONT_ACTIVATED: 'MULTIFONT_ACTIVATED',\r\n    START_EXPORT: 'START_EXPORT',\r\n    EXPORT_COMPLETED: 'EXPORT_COMPLETED',\r\n    FONT_SELECTED: 'FONT_SELECTED',\r\n    CHAR_SELECTED: 'CHAR_SELECTED',\r\n    CHAR_CHANGED: 'CHAR_CHANGED',\r\n    UPDATE_RESULT: 'UPDATE_RESULT',\r\n    BACKGROUND_TEXTURE_CHANGED: 'BACKGROUND_TEXTURE_CHANGED',\r\n    SHOW_POPUP: 'SHOW_POPUP',\r\n    CLOSE_POPUP: 'CLOSE_POPUP'\r\n};\r\n\r\nconst Observer = new EventEmitter();\r\n\r\nexport {\r\n    Observer,\r\n    EVENT\r\n}\r\n\r\n","const POPUP = {\r\n    ABOUT: 'POPUP_ABOUT',\r\n    LOADING: 'POPUP_LOADING',\r\n    WARNING: 'POPUP_WARNING',\r\n    ERROR_EXPORTING: 'POPUP_ERROR_EXPORTING',\r\n    ERROR_SPLIT: 'POPUP_ERROR_SPLIT'\r\n};\r\n\r\nexport {POPUP};\r\n","import React, {Component} from 'react';\r\nimport {EVENT, Observer} from \"../../utils/Observer\";\r\nimport {POPUP} from \"../popups/PopupType\";\r\n\r\nimport appInfo from '../../../package.json';\r\nimport logo from '../../images/logo_app.png';\r\n\r\nimport '../../styles/header.css';\r\n\r\nclass Header extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // Bind\r\n        this.onAboutClicked = this.onAboutClicked.bind(this);\r\n    }\r\n\r\n    onAboutClicked(event) {\r\n        Observer.emit(EVENT.SHOW_POPUP, {\r\n            type: POPUP.ABOUT\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"header\">\r\n                <div className=\"header-title\">\r\n                    <img src={logo} alt=\"logo\"/>\r\n                    <div className=\"title\">MultiFont Packer BETA {appInfo.version}</div>\r\n                </div>\r\n                <div className=\"about\">\r\n                    <span onClick={this.onAboutClicked}>ABOUT</span>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {EVENT, Observer} from \"../../utils/Observer\";\r\n\r\nimport '../../styles/viewer.css';\r\n\r\nclass TextureView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onViewClick = this.onViewClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateView();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.updateView();\r\n    }\r\n\r\n    updateView() {\r\n        let view = ReactDOM.findDOMNode(this.refs.view);\r\n        if (view) {\r\n            view.width = this.props.buffer.width;\r\n            view.height = this.props.buffer.height;\r\n\r\n            view.style.width = Math.floor(view.width * this.props.scale) + \"px\";\r\n            view.style.height = Math.floor(view.height * this.props.scale) + \"px\";\r\n\r\n            let ctx = view.getContext(\"2d\");\r\n\r\n            ctx.clearRect(0, 0, view.width, view.height);\r\n            // ctx.rect(0, 0, view.width, view.height);\r\n            // ctx.fillStyle = 'red';\r\n            // ctx.fill();\r\n\r\n            if (this.props.selectedChar) {\r\n                ctx.globalAlpha = 0.35;\r\n            }\r\n\r\n            ctx.drawImage(this.props.buffer, 0, 0, view.width, view.height, 0, 0, view.width, view.height);\r\n\r\n            // if(this.props.displayOutline) {\r\n            //     for (let item of this.props.data.data) {\r\n            //         if(!item.cloned) {\r\n            //             this.drawOutline(ctx, item);\r\n            //         }\r\n            //     }\r\n            // }\r\n\r\n            ctx.globalAlpha = 1;\r\n\r\n            if (this.props.selectedChar) {\r\n                for (const fontId in this.props.bitmapfonts) {\r\n                    if (this.props.bitmapfonts.hasOwnProperty(fontId)) {\r\n                        const fontData = this.props.bitmapfonts[fontId];\r\n\r\n                        if (fontData.characters.hasOwnProperty(this.props.selectedChar)) {\r\n                            const charData = fontData.characters[this.props.selectedChar];\r\n\r\n                            let frame = charData.frame;\r\n\r\n                            let w = frame.w, h = frame.h;\r\n                            if (charData.rotated) {\r\n                                w = frame.h;\r\n                                h = frame.w;\r\n                            }\r\n\r\n                            ctx.clearRect(frame.x, frame.y, w, h);\r\n                            ctx.drawImage(this.props.buffer, frame.x, frame.y, w, h, frame.x, frame.y, w, h);\r\n\r\n                            //if(this.props.displayOutline) this.drawOutline(ctx, item);\r\n\r\n                            ctx.beginPath();\r\n\r\n                            //if(ctx.setLineDash) ctx.setLineDash([4, 2]);\r\n                            //ctx.strokeStyle = \"#000\";\r\n                            //ctx.lineWidth = 2;\r\n                            ctx.rect(frame.x, frame.y, w, h);\r\n\r\n                            ctx.stroke();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            view.className = this.props.textureBack;\r\n        }\r\n    }\r\n\r\n    drawOutline(ctx, item) {\r\n        let frame = item.frame;\r\n        let w = frame.w, h = frame.h;\r\n        if (item.rotated) {\r\n            w = frame.h;\r\n            h = frame.w;\r\n        }\r\n\r\n        ctx.strokeStyle = \"#00F\";\r\n        ctx.fillStyle = \"rgba(0,0,255,0.25)\";\r\n        ctx.lineWidth = 1;\r\n\r\n        ctx.beginPath();\r\n        ctx.fillRect(frame.x, frame.y, w, h);\r\n        ctx.rect(frame.x, frame.y, w, h);\r\n        ctx.moveTo(frame.x, frame.y);\r\n        ctx.lineTo(frame.x + w, frame.y + h);\r\n        ctx.stroke();\r\n    }\r\n\r\n    getCharByClick(fontData, x, y) {\r\n        let charFound = null;\r\n\r\n        for (const charId in fontData.characters) {\r\n            if (fontData.characters.hasOwnProperty(charId)) {\r\n                const charData = fontData.characters[charId];\r\n\r\n                let w = charData.frame.w;\r\n                let h = charData.frame.h;\r\n                if (charData.rotated) {\r\n                    w = charData.frame.h;\r\n                    h = charData.frame.w;\r\n                }\r\n\r\n                if (x >= charData.frame.x && x < charData.frame.x + w && y >= charData.frame.y && y < charData.frame.y + h) {\r\n                    charFound = charId;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return charFound;\r\n    }\r\n\r\n    onViewClick(event) {\r\n        let selectedChar = null;\r\n        let selectedFont = this.props.selectedFont;\r\n\r\n        const canvas = ReactDOM.findDOMNode(this.refs.view);\r\n        const rect = canvas.getBoundingClientRect();\r\n        const x = (event.clientX - rect.left) / this.props.scale;\r\n        const y = (event.clientY - rect.top) / this.props.scale;\r\n\r\n        // multifont mode, search in every fonts\r\n        if (this.props.multifont) {\r\n            for (const fontId in this.props.bitmapfonts) {\r\n                if (this.props.bitmapfonts.hasOwnProperty(fontId)) {\r\n                    let charClicked = this.getCharByClick(this.props.bitmapfonts[fontId], x, y);\r\n                    if (charClicked) {\r\n                        selectedChar = charClicked;\r\n                        selectedFont = fontId;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else { // simple font, search in a font\r\n            let charClicked = this.getCharByClick(this.props.bitmapfonts[this.props.selectedFont], x, y);\r\n            if (charClicked) {\r\n                selectedChar = charClicked;\r\n                selectedFont = this.props.selectedFont;\r\n            }\r\n        }\r\n\r\n        if (selectedChar) {\r\n            this.updateView();\r\n\r\n            Observer.emit(EVENT.CHAR_SELECTED, {\r\n                selectedChar: selectedChar,\r\n                selectedFont: selectedFont\r\n            });\r\n        }\r\n\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div ref=\"back\">\r\n                <canvas ref=\"view\" onClick={this.onViewClick}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TextureView;\r\n","import React, {Component} from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {EVENT, Observer} from \"../../utils/Observer\";\r\n\r\nclass Tester extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // Test message to show\r\n        this._testMessage = '';\r\n\r\n        // Bind\r\n        this.updateResult = this.updateResult.bind(this);\r\n\r\n        // Listeners\r\n        Observer.on(EVENT.UPDATE_RESULT, this.updateResult);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.updateResult();\r\n    }\r\n\r\n    updateResult(event = null) {\r\n        if (this.props.selectedfont == null) {\r\n            return;\r\n        }\r\n\r\n        if (this.props.bitmapfonts.hasOwnProperty(this.props.selectedfont)) {\r\n            const fontData = this.props.bitmapfonts[this.props.selectedfont];\r\n\r\n            // ToDo, Array.from() IE 11 problem\r\n\r\n            let canvas = ReactDOM.findDOMNode(this.refs.canvasTextResult);\r\n            let ctx = canvas.getContext(\"2d\");\r\n\r\n            canvas.width = 1280;\r\n            canvas.height = 768;\r\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n            if (event) {\r\n                this._testMessage = event.currentTarget.value;\r\n            }\r\n\r\n            const charsToShow = this._testMessage.split('');\r\n            const len = charsToShow.length;\r\n            let i;\r\n            let fromX = 0;\r\n            let fromY = 0;\r\n\r\n            for (i = 0; i < len; i++) {\r\n                if (charsToShow[i] === \"\\n\") {\r\n                    fromY += this.props.bitmapfonts[this.props.selectedfont].lineHeight;\r\n                    fromX = 0;\r\n                }\r\n                else if (charsToShow[i] === \" \") {\r\n                    fromX += this.props.bitmapfonts[this.props.selectedfont].spaceWidth;\r\n                }\r\n                else if (charsToShow[i] === \"\\r\") {\r\n                    fromX += this.props.bitmapfonts[this.props.selectedfont].tabWidth;\r\n                }\r\n                else {\r\n                    const charData = fontData.getCharByText(charsToShow[i]);\r\n\r\n                    if (charData) {\r\n                        const xoffset = fromX + charData.xoffset;\r\n                        const yoffset = fromY + charData.yoffset;\r\n\r\n                        ctx.drawImage(charData.image, xoffset, yoffset);\r\n                        fromX += charData.xadvance;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"viewer-tester\">\r\n                <div className=\"tester-text\">\r\n                    <div className=\"tester-text-info\">Write here</div>\r\n                    <div>\r\n                        <textarea className=\"text-area\" ref=\"text_area\" onChange={this.updateResult}/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"tester-view\">\r\n                    <div className=\"tester-text-info\">Background</div>\r\n                    <div className=\"canvas-text-result\">\r\n                        <canvas ref=\"canvasTextResult\"/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Tester;\r\n","import React, {Component} from 'react';\r\nimport {EVENT, Observer} from \"../../utils/Observer\";\r\nimport TextureView from \"./TextureView\";\r\nimport Tester from \"./Tester\";\r\n\r\nimport '../../styles/viewer.css';\r\n\r\nclass Viewer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onFontSelected = this.onFontSelected.bind(this);\r\n        this.onCharSelected = this.onCharSelected.bind(this);\r\n        this.onCharChanged = this.onCharChanged.bind(this);\r\n        this.onChangeBackgroundTexture = this.onChangeBackgroundTexture.bind(this);\r\n        this.blurHandler = this.blurHandler.bind(this);\r\n\r\n        this.state = {\r\n            textureBack: 'grid-texture',\r\n            packResult: null,\r\n            selectedChar: null,\r\n            selectedFont: null\r\n        };\r\n\r\n        Observer.on(EVENT.FONT_SELECTED, this.onFontSelected);\r\n        Observer.on(EVENT.CHAR_SELECTED, this.onCharSelected);\r\n        Observer.on(EVENT.PACK_COMPLETED, this.updateViewer, this);\r\n        Observer.on(EVENT.BACKGROUND_TEXTURE_CHANGED, this.onChangeBackgroundTexture);\r\n    }\r\n\r\n    onChangeBackgroundTexture(data) {\r\n        this.setState({\r\n            textureBack: data\r\n        });\r\n    }\r\n\r\n    onCharSelected(data) {\r\n        this.setState({\r\n            selectedChar: data.selectedChar,\r\n            selectedFont: data.selectedFont\r\n        });\r\n    }\r\n\r\n    onCharChanged(data) {\r\n        const charData = this.props.bitmapfonts[this.state.selectedFont].getCharById(this.state.selectedChar);\r\n        if (charData) {\r\n            charData.text = data.currentTarget.value;\r\n        }\r\n\r\n        Observer.emit(EVENT.CHAR_SELECTED, {\r\n            selectedChar: this.state.selectedChar,\r\n            selectedFont: this.state.selectedFont\r\n        });\r\n    }\r\n\r\n    onFontSelected(data) {\r\n        this.setState({\r\n            selectedFont: data.selectedFont,\r\n            selectedChar: null\r\n        });\r\n    }\r\n\r\n    updateViewer(data) {\r\n        if (!this.state.selectedFont) {\r\n            this.state.selectedFont = data[0].selectedFont;\r\n        }\r\n\r\n        this.state.selectedChar = null;\r\n        this.setState({packResult: data});\r\n    }\r\n\r\n    blurHandler() {\r\n        this.setState({\r\n            selectedChar: null\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let views = [], ix = 0;\r\n        let input = [];\r\n\r\n        if (this.state.packResult) {\r\n            for (let item of this.state.packResult) {\r\n                views.push((\r\n                    <TextureView key={\"tex-view-\" + ix}\r\n                                 buffer={item.buffer}\r\n                                 textureBack={this.state.textureBack}\r\n                                 bitmapfonts={this.props.bitmapfonts}\r\n                                 scale={1.0}\r\n                                 multifont={item.multifont}\r\n                                 selectedChar={this.state.selectedChar}\r\n                                 selectedFont={this.state.selectedFont}/>\r\n                ));\r\n\r\n                ix++;\r\n            }\r\n        }\r\n\r\n        if (this.state.selectedChar) {\r\n            for (const fontId in this.props.bitmapfonts) {\r\n                if (this.props.bitmapfonts.hasOwnProperty(fontId)) {\r\n                    const charData = this.props.bitmapfonts[fontId].getCharById(this.state.selectedChar);\r\n\r\n                    if (charData) {\r\n                        input.push(<input\r\n                            onChange={this.onCharChanged}\r\n                            key={\"id\" + this.state.selectedChar}\r\n                            maxLength=\"1\"\r\n                            id={this.state.selectedChar}\r\n                            defaultValue={charData.text}\r\n                            autoFocus={true}\r\n                            className=\"input-letter\"\r\n                            style={\r\n                                {\r\n                                    left: charData.frame.x,\r\n                                    top: charData.frame.y,\r\n                                }\r\n                            }/>);\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className=\"viewer-main\">\r\n                <div className=\"viewer\">\r\n                    <div className=\"result-view-container\">\r\n                        <div className=\"viewer-texture\">\r\n                            <div className=\"viewer-input\" onBlur={this.blurHandler} tabIndex={0}>\r\n                                {input}\r\n                            </div>\r\n                            {views}\r\n                        </div>\r\n                    </div>\r\n                    <Tester bitmapfonts={this.props.bitmapfonts} selectedfont={this.state.selectedFont}/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Viewer;\r\n","const TYPES = [\"image/png\", \"image/jpg\", \"image/jpeg\", \"image/gif\"];\r\n\r\nexport class ImagesLoader {\r\n    constructor() {\r\n        this._data = null;\r\n\r\n        this._images = {};\r\n\r\n        // Bind\r\n        this.onEnd = null;\r\n        this.checkDone = this.checkDone.bind(this);\r\n    }\r\n\r\n    /**\r\n     * @param {FileList} data\r\n     * @param {Function} callBack\r\n     */\r\n    load(data, callBack) {\r\n        let i;\r\n        const len = data.length;\r\n\r\n        this._data = [];\r\n\r\n        for (i = 0; i < len; i++) {\r\n            this._data.push(data[i]);\r\n        }\r\n\r\n        this.onEnd = callBack;\r\n        this.loadNext();\r\n    }\r\n\r\n    loadNext() {\r\n        if (this._data.length > 0) {\r\n            let item = this._data.shift();\r\n\r\n            if (TYPES.indexOf(item.type) !== -1) {\r\n                let img = new Image();\r\n\r\n                let reader = new FileReader();\r\n                reader.onload = event => {\r\n                    img.src = event.target.result;\r\n                    img._base64 = event.target.result;\r\n\r\n                    this._images[item.name] = img;\r\n                    this.loadNext();\r\n                };\r\n\r\n                reader.readAsDataURL(item);\r\n            }\r\n            else {\r\n                this.loadNext();\r\n            }\r\n        }\r\n        else {\r\n            this.checkDone();\r\n        }\r\n    }\r\n\r\n    checkDone() {\r\n        let ready = true;\r\n\r\n        for (let key of Object.keys(this._images)) {\r\n            if (!this._images[key].complete) {\r\n                ready = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (ready) {\r\n            this.onEnd(this._images);\r\n        }\r\n        else {\r\n            setTimeout(this.checkDone, 50);\r\n        }\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport {EVENT, Observer} from \"../../../utils/Observer\";\r\n\r\nimport '../../../styles/atlasitems.css';\r\n\r\nclass AtlasItems extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // Bind\r\n        this.onSelect = this.onSelect.bind(this);\r\n\r\n        this._divSelected = null;\r\n    }\r\n\r\n    onSelect(event) {\r\n        Observer.emit(EVENT.FONT_SELECTED, {\r\n            selectedFont: event.currentTarget.id,\r\n            selectedChar: null\r\n        });\r\n\r\n        event.currentTarget.className = \"item-wrapper\" + \" item-selected\";\r\n\r\n        if ( this._divSelected ) {\r\n            this._divSelected.className = 'item-wrapper';\r\n        }\r\n\r\n        this._divSelected = event.currentTarget;\r\n\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        return false;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if ( this.props.data && this._divSelected == null ) {\r\n            this._divSelected = ReactDOM.findDOMNode(this.refs.it_0);\r\n            this._divSelected.className = 'item-wrapper' + ' item-selected';\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const keys = Object.keys(this.props.data);\r\n\r\n        if (keys.length > 0) {\r\n            const list = keys.map((item, index) =>\r\n                <div key={\"id_\" + index} className=\"item-wrapper\" id={item} ref={'it_' + index} onClick={this.onSelect}>\r\n                    <div className=\"item-image-container\">\r\n                        <img className=\"item-image\" alt={'imagen'} src={this.props.data[item].src}/>\r\n                    </div>\r\n                    <div className=\"item-text-container\">{item}</div>\r\n                </div>\r\n            );\r\n\r\n            return (\r\n                <div>\r\n                    {list}\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return (<span></span>);\r\n        }\r\n    }\r\n}\r\n\r\nexport default AtlasItems;\r\n","import {EVENT, Observer} from \"../../../utils/Observer\";\r\nimport React, {Component} from 'react';\r\nimport {ImagesLoader} from \"../../../utils/ImagesLoader\";\r\nimport AtlasItems from \"./AtlasItems\";\r\nimport {POPUP} from \"../../popups/PopupType\";\r\n\r\nimport '../../../styles/atlaslist.css';\r\n\r\n\r\nclass AtlasList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // Bind\r\n        this.onFilesDrop = this.onFilesDrop.bind(this);\r\n        this.onDragOver = this.onDragOver.bind(this);\r\n        this.onLoadImagesComplete = this.onLoadImagesComplete.bind(this);\r\n\r\n        this.state = {\r\n            atlas: {}\r\n        }\r\n    }\r\n\r\n    onFilesDrop(event) {\r\n        event.preventDefault();\r\n\r\n        if (event.dataTransfer.files.length) {\r\n\r\n            Observer.emit(EVENT.SHOW_POPUP, {\r\n                message: 'Loading, please wait',\r\n                type: POPUP.LOADING\r\n            });\r\n\r\n            const loader = new ImagesLoader();\r\n            loader.load(event.dataTransfer.files, this.onLoadImagesComplete)\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    onDragOver(event) {\r\n        event.preventDefault();\r\n    }\r\n\r\n    onLoadImagesComplete(event) {\r\n        const names = Object.keys(event);\r\n\r\n        if (names.length) {\r\n            let atlas = this.state.atlas;\r\n\r\n            for (const name of names) {\r\n                atlas[name] = event[name];\r\n            }\r\n\r\n            this.setState({\r\n                atlas: atlas\r\n            });\r\n\r\n            Observer.emit(EVENT.ATLAS_LIST_CHANGED, atlas);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const dropHelp = Object.keys(this.state.atlas).length > 0 ? null : (<div ref=\"dropHelp\" className=\"image-drop-help\">drag'n'drop images here</div>);\r\n\r\n        return (\r\n            <div className=\"atlas-list\" onDrop={this.onFilesDrop} onDragOver={this.onDragOver}>\r\n                <div>\r\n                    <AtlasItems data={this.state.atlas}/>\r\n                    {dropHelp}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AtlasList;\r\n","const METHOD = {\r\n    Default: \"Default\"\r\n};\r\n\r\nclass Packer {\r\n\r\n    constructor() {\r\n    }\r\n\r\n    pack() {\r\n        throw Error(\"Abstarct method. Override it.\");\r\n    }\r\n\r\n\r\n    static get type() {\r\n        return \"Default\";\r\n    }\r\n\r\n    static get methods() {\r\n        return METHOD;\r\n    }\r\n\r\n    static getMethodProps() {\r\n        return {name: \"Default\", description: \"Default placement\"};\r\n    }\r\n}\r\n\r\nexport default Packer;","import Packer from \"./Packer\";\r\nimport {PACKING_LOGIC, MaxRectsPacker as MaxRectsPackerEngine} from 'maxrects-packer';\r\n\r\nconst METHOD = {\r\n    Smart: \"Smart\",\r\n    SmartArea: \"SmartArea\",\r\n    Square: \"Square\",\r\n    SquareArea: \"SquareArea\",\r\n    SmartSquare: \"SmartSquare\",\r\n    SmartSquareArea: \"SmartSquareArea\"\r\n};\r\n\r\nclass MaxRectsPacker extends Packer {\r\n    constructor(width, height, allowRotate=false) {\r\n        super();\r\n\r\n        this.binWidth = width;\r\n        this.binHeight = height;\r\n        this.allowRotate = allowRotate;\r\n    }\r\n\r\n    pack(data, method) {\r\n        let options = {\r\n            smart: (method === METHOD.Smart || method === METHOD.SmartArea || method === METHOD.SmartSquare || method === METHOD.SmartSquareArea),\r\n            pot: false,\r\n            square: (method === METHOD.Square || method === METHOD.SquareArea || method === METHOD.SmartSquare || method === METHOD.SmartSquareArea),\r\n            allowRotation: this.allowRotate,\r\n            logic: (method === METHOD.Smart || method === METHOD.Square || method === METHOD.SmartSquare) ? PACKING_LOGIC.MAX_EDGE : PACKING_LOGIC.MAX_AREA\r\n        };\r\n\r\n        let packer = new MaxRectsPackerEngine(this.binWidth, this.binHeight, 0, options);\r\n\r\n        let input = [];\r\n        \r\n        for(let item of data) {\r\n            input.push({width: item.frame.w, height: item.frame.h, data: item});\r\n        }\r\n\r\n        packer.addArray(input);\r\n        \r\n        let bin = packer.bins[0];\r\n        let rects = bin.rects;\r\n        \r\n        let res = [];\r\n        \r\n        for(let item of rects) {\r\n            item.data.frame.x = item.x;\r\n            item.data.frame.y = item.y;\r\n            if (item.rot) {\r\n                item.data.rotated = true;\r\n            }\r\n            res.push(item.data);\r\n        }\r\n        \r\n        return res;\r\n    }\r\n    \r\n    static get type() {\r\n        return \"MaxRectsPacker\";\r\n    }\r\n\r\n    static get methods() {\r\n        return METHOD;\r\n    }\r\n\r\n    static getMethodProps(id='') {\r\n        switch(id) {\r\n            case METHOD.Smart:\r\n                return {name: \"Smart edge logic\", description: \"\"};\r\n            case METHOD.SmartArea:\r\n                return {name: \"Smart area logic\", description: \"\"};\r\n            case METHOD.Square:\r\n                return {name: \"Square edge logic\", description: \"\"};\r\n            case METHOD.SquareArea:\r\n                return {name: \"Square area logic\", description: \"\"};\r\n            case METHOD.SmartSquare:\r\n                return {name: \"Smart square edge logic\", description: \"\"};\r\n            case METHOD.SmartSquareArea:\r\n                return {name: \"Smart square area logic\", description: \"\"};\r\n            default:\r\n                throw Error(\"Unknown method \" + id);\r\n        }\r\n    }\r\n}\r\n\r\nexport default MaxRectsPacker;\r\n","class Rect {\r\n    constructor(x=0, y=0, width=0, height=0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    clone() {\r\n        return new Rect(this.x, this.y, this.width, this.height);\r\n    }\r\n\r\n    hitTest(other) {\r\n        return Rect.hitTest(this, other);\r\n    }\r\n\r\n    static hitTest(a, b) {\r\n        return a.x >= b.x && a.y >= b.y && a.x+a.width <= b.x+b.width && a.y+a.height <= b.y+b.height;\r\n    }\r\n}\r\n\r\nexport default Rect;","import Packer from \"./Packer\";\r\nimport Rect from \"./math/Rect\";\r\n\r\nconst METHOD = {\r\n    BestShortSideFit: \"BestShortSideFit\",\r\n    BestLongSideFit: \"BestLongSideFit\",\r\n    BestAreaFit: \"BestAreaFit\",\r\n    BottomLeftRule: \"BottomLeftRule\",\r\n    ContactPointRule: \"ContactPointRule\"\r\n};\r\n\r\nclass MaxRectsBin extends Packer {\r\n\r\n    constructor(width, height, allowRotate=false) {\r\n        super();\r\n\r\n        this.usedRectangles = [];\r\n        this.freeRectangles = [];\r\n\r\n        this.binWidth = width;\r\n        this.binHeight = height;\r\n        this.allowRotate = allowRotate;\r\n\r\n        this.freeRectangles.push(new Rect(0, 0, width, height));\r\n    }\r\n\r\n    pack(data, method) {\r\n        let res = this.insert2(data, method);\r\n        return res;\r\n    }\r\n\r\n    insert(width, height, method=METHOD.BestShortSideFit) {\r\n        let newNode = new Rect();\r\n        let score1 = {value:0};\r\n        let score2 = {value:0};\r\n\r\n        switch(method) {\r\n            case METHOD.BestShortSideFit:\r\n                newNode = this._findPositionForNewNodeBestShortSideFit(width, height, score1, score2);\r\n                break;\r\n            case METHOD.BottomLeftRule:\r\n                newNode = this._findPositionForNewNodeBottomLeft(width, height, score1, score2);\r\n                break;\r\n            case METHOD.ContactPointRule:\r\n                newNode = this._findPositionForNewNodeContactPoint(width, height, score1);\r\n                break;\r\n            case METHOD.BestLongSideFit:\r\n                newNode = this._findPositionForNewNodeBestLongSideFit(width, height, score2, score1);\r\n                break;\r\n            case METHOD.BestAreaFit:\r\n                newNode = this._findPositionForNewNodeBestAreaFit(width, height, score1, score2);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (newNode.height === 0){\r\n            return newNode;\r\n        }\r\n\r\n        this._placeRectangle(newNode);\r\n        return newNode;\r\n    }\r\n\r\n    insert2(rectangles, method) {\r\n        let res = [];\r\n\r\n        while(rectangles.length > 0) {\r\n            let bestScore1 = Infinity;\r\n            let bestScore2 = Infinity;\r\n            let bestRectangleIndex = -1;\r\n            let bestNode = new Rect();\r\n\r\n            for(let i= 0; i < rectangles.length; i++) {\r\n                let score1 = {value:0};\r\n                let score2 = {value:0};\r\n                let newNode = this._scoreRectangle(rectangles[i].frame.w, rectangles[i].frame.h, method, score1, score2);\r\n\r\n                if (score1.value < bestScore1 || (score1.value === bestScore1 && score2.value < bestScore2)) {\r\n                    bestScore1 = score1.value;\r\n                    bestScore2 = score2.value;\r\n                    bestNode = newNode;\r\n                    bestRectangleIndex = i;\r\n                }\r\n            }\r\n\r\n            if (bestRectangleIndex === -1) {\r\n                return res;\r\n            }\r\n\r\n            this._placeRectangle(bestNode);\r\n            let rect = rectangles.splice(bestRectangleIndex, 1)[0];\r\n            rect.frame.x = bestNode.x;\r\n            rect.frame.y = bestNode.y;\r\n\r\n            if(rect.frame.w !== bestNode.width || rect.frame.h !== bestNode.height) {\r\n                rect.rotated = true;\r\n            }\r\n\r\n            res.push(rect);\r\n        }\r\n        return res;\r\n    }\r\n\r\n    _placeRectangle(node) {\r\n        let numRectanglesToProcess = this.freeRectangles.length;\r\n        for(let i= 0; i < numRectanglesToProcess; i++) {\r\n            if (this._splitFreeNode(this.freeRectangles[i], node)) {\r\n                this.freeRectangles.splice(i,1);\r\n                i--;\r\n                numRectanglesToProcess--;\r\n            }\r\n        }\r\n\r\n        this._pruneFreeList();\r\n        this.usedRectangles.push(node);\r\n    }\r\n\r\n    _scoreRectangle(width, height, method, score1, score2) {\r\n        let newNode = new Rect();\r\n        score1.value = Infinity;\r\n        score2.value = Infinity;\r\n        switch(method) {\r\n            case METHOD.BestShortSideFit:\r\n                newNode = this._findPositionForNewNodeBestShortSideFit(width, height, score1, score2);\r\n                break;\r\n            case METHOD.BottomLeftRule:\r\n                newNode = this._findPositionForNewNodeBottomLeft(width, height, score1, score2);\r\n                break;\r\n            case METHOD.ContactPointRule:\r\n                newNode = this._findPositionForNewNodeContactPoint(width, height, score1);\r\n                score1.value = -score1.value;\r\n                break;\r\n            case METHOD.BestLongSideFit:\r\n                newNode = this._findPositionForNewNodeBestLongSideFit(width, height, score2, score1);\r\n                break;\r\n            case METHOD.BestAreaFit:\r\n                newNode = this._findPositionForNewNodeBestAreaFit(width, height, score1, score2);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (newNode.height === 0) {\r\n            score1.value = Infinity;\r\n            score2.value = Infinity;\r\n        }\r\n\r\n        return newNode;\r\n    }\r\n\r\n    _occupancy() {\r\n        let usedRectangles = this.usedRectangles;\r\n        let usedSurfaceArea = 0;\r\n        for(let i= 0; i < usedRectangles.length; i++) {\r\n            usedSurfaceArea += usedRectangles[i].width * usedRectangles[i].height;\r\n        }\r\n\r\n        return usedSurfaceArea/(this.binWidth * this.binHeight);\r\n    }\r\n\r\n    _findPositionForNewNodeBottomLeft(width, height, bestY, bestX) {\r\n        let freeRectangles = this.freeRectangles;\r\n        let bestNode = new Rect();\r\n\r\n        bestY.value = Infinity;\r\n        let rect;\r\n        let topSideY;\r\n        for(let i= 0; i < freeRectangles.length; i++) {\r\n            rect = freeRectangles[i];\r\n            if (rect.width >= width && rect.height >= height) {\r\n                topSideY = rect.y + height;\r\n                if (topSideY < bestY.value || (topSideY === bestY.value && rect.x < bestX.value)) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = width;\r\n                    bestNode.height = height;\r\n                    bestY.value = topSideY;\r\n                    bestX.value = rect.x;\r\n                }\r\n            }\r\n            if (this.allowRotate && rect.width >= height && rect.height >= width) {\r\n                topSideY = rect.y + width;\r\n                if (topSideY < bestY.value || (topSideY === bestY.value && rect.x < bestX.value)) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = height;\r\n                    bestNode.height = width;\r\n                    bestY.value = topSideY;\r\n                    bestX.value = rect.x;\r\n                }\r\n            }\r\n        }\r\n        return bestNode;\r\n    }\r\n\r\n    _findPositionForNewNodeBestShortSideFit(width, height, bestShortSideFit, bestLongSideFit){\r\n        let freeRectangles = this.freeRectangles;\r\n        let bestNode = new Rect();\r\n\r\n        bestShortSideFit.value = Infinity;\r\n\r\n        let rect,\r\n            leftoverHoriz,\r\n            leftoverVert,\r\n            shortSideFit,\r\n            longSideFit;\r\n\r\n        for(let i= 0; i < freeRectangles.length; i++) {\r\n            rect = freeRectangles[i];\r\n            if (rect.width >= width && rect.height >= height) {\r\n                leftoverHoriz = Math.abs(rect.width - width);\r\n                leftoverVert = Math.abs(rect.height - height);\r\n                shortSideFit = Math.min(leftoverHoriz, leftoverVert);\r\n                longSideFit = Math.max(leftoverHoriz, leftoverVert);\r\n\r\n                if (shortSideFit < bestShortSideFit.value || (shortSideFit === bestShortSideFit.value && longSideFit < bestLongSideFit.value)) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = width;\r\n                    bestNode.height = height;\r\n                    bestShortSideFit.value = shortSideFit;\r\n                    bestLongSideFit.value = longSideFit;\r\n                }\r\n            }\r\n\r\n            let flippedLeftoverHoriz,\r\n                flippedLeftoverVert,\r\n                flippedShortSideFit,\r\n                flippedLongSideFit;\r\n\r\n            if (this.allowRotate && rect.width >= height && rect.height >= width) {\r\n                flippedLeftoverHoriz = Math.abs(rect.width - height);\r\n                flippedLeftoverVert = Math.abs(rect.height - width);\r\n                flippedShortSideFit = Math.min(flippedLeftoverHoriz, flippedLeftoverVert);\r\n                flippedLongSideFit = Math.max(flippedLeftoverHoriz, flippedLeftoverVert);\r\n\r\n                if (flippedShortSideFit < bestShortSideFit.value || (flippedShortSideFit === bestShortSideFit.value && flippedLongSideFit < bestLongSideFit.value)) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = height;\r\n                    bestNode.height = width;\r\n                    bestShortSideFit.value = flippedShortSideFit;\r\n                    bestLongSideFit.value = flippedLongSideFit;\r\n                }\r\n            }\r\n        }\r\n\r\n        return bestNode;\r\n    }\r\n\r\n    _findPositionForNewNodeBestLongSideFit(width, height, bestShortSideFit, bestLongSideFit) {\r\n        let freeRectangles = this.freeRectangles;\r\n        let bestNode = new Rect();\r\n        bestLongSideFit.value = Infinity;\r\n\r\n        let rect,\r\n            leftoverHoriz,\r\n            leftoverVert,\r\n            shortSideFit,\r\n            longSideFit;\r\n\r\n        for(let i= 0; i < freeRectangles.length; i++) {\r\n            rect = freeRectangles[i];\r\n\r\n            if (rect.width >= width && rect.height >= height) {\r\n                leftoverHoriz = Math.abs(rect.width - width);\r\n                leftoverVert = Math.abs(rect.height - height);\r\n                shortSideFit = Math.min(leftoverHoriz, leftoverVert);\r\n                longSideFit = Math.max(leftoverHoriz, leftoverVert);\r\n\r\n                if (longSideFit < bestLongSideFit.value || (longSideFit === bestLongSideFit.value && shortSideFit < bestShortSideFit.value)) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = width;\r\n                    bestNode.height = height;\r\n                    bestShortSideFit.value = shortSideFit;\r\n                    bestLongSideFit.value = longSideFit;\r\n                }\r\n            }\r\n\r\n            if (this.allowRotate && rect.width >= height && rect.height >= width) {\r\n                leftoverHoriz = Math.abs(rect.width - height);\r\n                leftoverVert = Math.abs(rect.height - width);\r\n                shortSideFit = Math.min(leftoverHoriz, leftoverVert);\r\n                longSideFit = Math.max(leftoverHoriz, leftoverVert);\r\n\r\n                if (longSideFit < bestLongSideFit.value || (longSideFit === bestLongSideFit.value && shortSideFit < bestShortSideFit.value)) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = height;\r\n                    bestNode.height = width;\r\n                    bestShortSideFit.value = shortSideFit;\r\n                    bestLongSideFit.value = longSideFit;\r\n                }\r\n            }\r\n        }\r\n        return bestNode;\r\n    }\r\n\r\n    _findPositionForNewNodeBestAreaFit(width, height, bestAreaFit, bestShortSideFit) {\r\n        let freeRectangles = this.freeRectangles;\r\n        let bestNode = new Rect();\r\n\r\n        bestAreaFit.value = Infinity;\r\n\r\n        let rect,\r\n            leftoverHoriz,\r\n            leftoverVert,\r\n            shortSideFit,\r\n            areaFit;\r\n\r\n        for(let i= 0; i < freeRectangles.length; i++) {\r\n            rect = freeRectangles[i];\r\n            areaFit = rect.width * rect.height - width * height;\r\n\r\n            if (rect.width >= width && rect.height >= height) {\r\n                leftoverHoriz = Math.abs(rect.width - width);\r\n                leftoverVert = Math.abs(rect.height - height);\r\n                shortSideFit = Math.min(leftoverHoriz, leftoverVert);\r\n\r\n                if (areaFit < bestAreaFit.value || (areaFit === bestAreaFit.value && shortSideFit < bestShortSideFit.value)) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = width;\r\n                    bestNode.height = height;\r\n                    bestShortSideFit.value = shortSideFit;\r\n                    bestAreaFit = areaFit;\r\n                }\r\n            }\r\n\r\n            if (this.allowRotate && rect.width >= height && rect.height >= width) {\r\n                leftoverHoriz = Math.abs(rect.width - height);\r\n                leftoverVert = Math.abs(rect.height - width);\r\n                shortSideFit = Math.min(leftoverHoriz, leftoverVert);\r\n\r\n                if (areaFit < bestAreaFit.value || (areaFit === bestAreaFit.value && shortSideFit < bestShortSideFit.value)) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = height;\r\n                    bestNode.height = width;\r\n                    bestShortSideFit.value = shortSideFit;\r\n                    bestAreaFit.value = areaFit;\r\n                }\r\n            }\r\n        }\r\n        return bestNode;\r\n    }\r\n\r\n    _commonIntervalLength(i1start, i1end, i2start, i2end){\r\n        if (i1end < i2start || i2end < i1start){\r\n            return 0;\r\n        }\r\n        return Math.min(i1end, i2end) - Math.max(i1start, i2start);\r\n    }\r\n\r\n    _contactPointScoreNode(x, y, width, height){\r\n        let usedRectangles = this.usedRectangles;\r\n        let score = 0;\r\n\r\n        if (x === 0 || x + width === this.binWidth)\r\n            score += height;\r\n        if (y === 0 || y + height === this.binHeight)\r\n            score += width;\r\n        let rect;\r\n        for(let i= 0; i < usedRectangles.length; i++) {\r\n            rect = usedRectangles[i];\r\n            if (rect.x === x + width || rect.x + rect.width === x)\r\n                score += this._commonIntervalLength(rect.y, rect.y + rect.height, y, y + height);\r\n            if (rect.y === y + height || rect.y + rect.height === y)\r\n                score += this._commonIntervalLength(rect.x, rect.x + rect.width, x, x + width);\r\n        }\r\n        return score;\r\n    }\r\n\r\n    _findPositionForNewNodeContactPoint(width, height, bestContactScore) {\r\n        let freeRectangles = this.freeRectangles;\r\n        let bestNode = new Rect();\r\n\r\n        bestContactScore.value = -1;\r\n\r\n        let rect,\r\n            score;\r\n\r\n        for(let i= 0; i < freeRectangles.length; i++) {\r\n            rect = freeRectangles[i];\r\n            if (rect.width >= width && rect.height >= height) {\r\n                score = this._contactPointScoreNode(rect.x, rect.y, width, height);\r\n                if (score > bestContactScore.value) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = width;\r\n                    bestNode.height = height;\r\n                    bestContactScore = score;\r\n                }\r\n            }\r\n            if (this.allowRotate && rect.width >= height && rect.height >= width) {\r\n                score = this._contactPointScoreNode(rect.x, rect.y, height, width);\r\n                if (score > bestContactScore.value) {\r\n                    bestNode.x = rect.x;\r\n                    bestNode.y = rect.y;\r\n                    bestNode.width = height;\r\n                    bestNode.height = width;\r\n                    bestContactScore.value = score;\r\n                }\r\n            }\r\n        }\r\n        return bestNode;\r\n    }\r\n\r\n    _splitFreeNode(freeNode, usedNode){\r\n        let freeRectangles = this.freeRectangles;\r\n        if (usedNode.x >= freeNode.x + freeNode.width || usedNode.x + usedNode.width <= freeNode.x ||\r\n            usedNode.y >= freeNode.y + freeNode.height || usedNode.y + usedNode.height <= freeNode.y)\r\n            return false;\r\n        let newNode;\r\n        if (usedNode.x < freeNode.x + freeNode.width && usedNode.x + usedNode.width > freeNode.x) {\r\n            if (usedNode.y > freeNode.y && usedNode.y < freeNode.y + freeNode.height) {\r\n                newNode = freeNode.clone();\r\n                newNode.height = usedNode.y - newNode.y;\r\n                freeRectangles.push(newNode);\r\n            }\r\n\r\n            if (usedNode.y + usedNode.height < freeNode.y + freeNode.height) {\r\n                newNode = freeNode.clone();\r\n                newNode.y = usedNode.y + usedNode.height;\r\n                newNode.height = freeNode.y + freeNode.height - (usedNode.y + usedNode.height);\r\n                freeRectangles.push(newNode);\r\n            }\r\n        }\r\n\r\n        if (usedNode.y < freeNode.y + freeNode.height && usedNode.y + usedNode.height > freeNode.y) {\r\n            if (usedNode.x > freeNode.x && usedNode.x < freeNode.x + freeNode.width) {\r\n                newNode = freeNode.clone();\r\n                newNode.width = usedNode.x - newNode.x;\r\n                freeRectangles.push(newNode);\r\n            }\r\n\r\n            if (usedNode.x + usedNode.width < freeNode.x + freeNode.width) {\r\n                newNode = freeNode.clone();\r\n                newNode.x = usedNode.x + usedNode.width;\r\n                newNode.width = freeNode.x + freeNode.width - (usedNode.x + usedNode.width);\r\n                freeRectangles.push(newNode);\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    _pruneFreeList() {\r\n        let freeRectangles = this.freeRectangles;\r\n        for(let i = 0;i < freeRectangles.length; i++)\r\n            for(let j= i+1; j < freeRectangles.length; j++) {\r\n                if (Rect.hitTest(freeRectangles[i], freeRectangles[j])) {\r\n                    freeRectangles.splice(i,1);\r\n                    break;\r\n                }\r\n                if (Rect.hitTest(freeRectangles[j], freeRectangles[i])) {\r\n                    freeRectangles.splice(j,1);\r\n                }\r\n            }\r\n    }\r\n\r\n    static get type() {\r\n        return \"MaxRectsBin\";\r\n    }\r\n\r\n    static get methods() {\r\n        return METHOD;\r\n    }\r\n\r\n    static getMethodProps(id='') {\r\n        switch(id) {\r\n            case METHOD.BestShortSideFit:\r\n                return {name: \"Best short side fit\", description: \"Positions the Rectangle against the short side of a free Rectangle into which it fits the best.\"};\r\n            case METHOD.BestLongSideFit:\r\n                return {name: \"Best long side fit\", description: \"Positions the Rectangle against the long side of a free Rectangle into which it fits the best.\"};\r\n            case METHOD.BestAreaFit:\r\n                return {name: \"Best area fit\", description: \"Positions the Rectangle into the smallest free Rectangle into which it fits.\"};\r\n            case METHOD.BottomLeftRule:\r\n                return {name: \"Bottom left rule\", description: \"Does the Tetris placement.\"};\r\n            case METHOD.ContactPointRule:\r\n                return {name: \"Contact point rule\", description: \"Choosest the placement where the Rectangle touches other Rectangles as much as possible.\"};\r\n            default:\r\n                throw Error(\"Unknown method \" + id);\r\n        }\r\n    }\r\n}\r\n\r\nexport default MaxRectsBin;\r\n","import Packer from \"./Packer\";\r\n\r\nconst METHOD = {\r\n    Automatic: \"Automatic\"\r\n};\r\n\r\nclass OptimalPacker extends Packer {\r\n    constructor(width, height, allowRotate=false) {\r\n        super();\r\n    }\r\n\r\n    pack(data, method) {\r\n        throw new Error('OptimalPacker is a dummy and cannot be used directly');\r\n    }\r\n    \r\n    static get type() {\r\n        return \"OptimalPacker\";\r\n    }\r\n\r\n    static get methods() {\r\n        return METHOD;\r\n    }\r\n\r\n    static getMethodProps(id='') {\r\n        switch(id) {\r\n            case METHOD.Automatic:\r\n                return {name: \"Automatic\", description: \"\"};\r\n            default:\r\n                throw Error(\"Unknown method \" + id);\r\n        }\r\n    }\r\n}\r\n\r\nexport default OptimalPacker;","import MaxRectsPacker from \"./MaxRectsPacker\";\r\nimport MaxRectsBin from \"./MaxRectsBin\";\r\nimport OptimalPacker from \"./OptimalPacker\";\r\n\r\nconst list = [\r\n    MaxRectsBin,\r\n    MaxRectsPacker,\r\n    OptimalPacker\r\n];\r\n\r\nfunction getPackerByType(type) {\r\n    for(let item of list) {\r\n        if(item.type === type) {\r\n            return item;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport { getPackerByType };\r\nexport default list;","/**\r\n * @type {string[]}\r\n */\r\nexport const TEXTURES_BACKGROUND = [\"grid-texture\", \"white-texture\", \"pink-texture\", \"black-texture\"];\r\n","function createHTTPQuery(params) {\r\n    let query = params || '';\r\n    if (query && ('string' !== typeof query)) {\r\n        query = [];\r\n        for (let key of Object.keys(params)) {\r\n            query.push(`${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`);\r\n        }\r\n        query = query.join('&');\r\n    }\r\n    return query;\r\n}\r\n\r\nfunction createXMLHTTPRequest(url, callback=null, errorCallback=null, dataType=\"\") {\r\n\r\n    let xmlhttp = (window.XMLHttpRequest && new XMLHttpRequest()) || null;\r\n\r\n    if (xmlhttp) {\r\n        xmlhttp.onreadystatechange = function () {\r\n            if (xmlhttp.readyState === 4) {\r\n                let data = null, status = 'success';\r\n                if (xmlhttp.status < 400) {\r\n                    if (dataType === 'arraybuffer') {\r\n                        data = xmlhttp.response;\r\n                    }\r\n                    if (dataType === 'xml') {\r\n                        data = xmlhttp.responseXML;\r\n                    }\r\n                    if (!data && xmlhttp.responseText) {\r\n                        data = xmlhttp.responseText;\r\n                    }\r\n                    \r\n                    if(callback) callback(data);\r\n                }\r\n                else {\r\n                    if(errorCallback) errorCallback(`${url} HTTP Error ${xmlhttp.status}: ${xmlhttp.statusText}`);\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    return xmlhttp;\r\n}\r\n\r\nfunction send(url, method=\"GET\", params=\"\", callback=null, errorCallback=null, dataType=\"text\") {\r\n\r\n    let xmlhttp = createXMLHTTPRequest(url, callback, errorCallback, dataType);\r\n    if (xmlhttp) {\r\n        let query = createHTTPQuery(params);\r\n\r\n        if(method == \"GET\" && query) url += \"?\" + query;\r\n\r\n        xmlhttp.open(method, url, true);\r\n\r\n        if (dataType == 'arraybuffer') {\r\n            xmlhttp.responseType = 'arraybuffer';\r\n        }\r\n\r\n        if (method == \"POST\") {\r\n            xmlhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n        }\r\n        xmlhttp.send(method == \"GET\" ? null : query);\r\n    }\r\n}\r\n\r\nfunction GET(url, params=\"\", callback=null, errorCallback=null, dataType=\"text\") {\r\n    return send(url, \"GET\", params, callback, errorCallback, dataType);\r\n}\r\n\r\nfunction POST(url, params=\"\", callback=null, errorCallback=null, dataType=\"text\") {\r\n    return send(url, \"POST\", params, callback, errorCallback, dataType);\r\n}\r\n\r\nexport {GET, POST};\r\nexport default send;\r\n","const SPECIAL_CHAR = {\r\n    SPACE: {\r\n        CODE: 32,\r\n        ID: 'space'\r\n    },\r\n    TAB: {\r\n        CODE: 9,\r\n        ID: 'tab'\r\n    }\r\n};\r\n\r\nclass Parser\r\n{\r\n    static parseChar(data) {\r\n        let parsed = null;\r\n        switch(data.code) {\r\n            case SPECIAL_CHAR.SPACE.CODE:\r\n            case SPECIAL_CHAR.TAB.CODE: {\r\n                parsed = {\r\n                    \"letter\": data.letter,\r\n                    \"code\": data.code,\r\n                    \"x\": 0,\r\n                    \"y\": 0,\r\n                    \"width\": 0,\r\n                    \"height\": 0,\r\n                    \"xoffset\": 0,\r\n                    \"yoffset\": 0,\r\n                    \"xadvance\": data.xadvance\r\n                };\r\n                break;\r\n            }\r\n            default: {\r\n                parsed = {\r\n                    \"letter\": data.text,\r\n                    \"code\": data.code,\r\n                    \"x\": data.frame.x,\r\n                    \"y\": data.frame.y,\r\n                    \"width\": data.frame.w,\r\n                    \"height\": data.frame.h,\r\n                    \"xoffset\": data.xoffset,\r\n                    \"yoffset\": data.yoffset,\r\n                    \"xadvance\": data.xadvance\r\n                };\r\n                break;\r\n            }\r\n        }\r\n\r\n        return parsed;\r\n    }\r\n\r\n    static parseFont(data, params) {\r\n        let parsed = {\r\n            \"name\": data.name,\r\n            \"size\": data.size,\r\n            \"lineHeight\": data.lineHeight,\r\n            \"scaleW\": params.width,\r\n            \"scaleH\": params.height,\r\n            \"num_pages\": 0,\r\n            \"pages\": [\r\n                {\r\n                    \"id_page\": 0,\r\n                    \"file_name\": params.textureName + \".\" + params.textureFormat\r\n                }\r\n            ],\r\n        };\r\n\r\n        const chars = Object.keys(data.characters);\r\n        parsed[\"chars_count\"] = chars.length;\r\n        parsed[\"chars\"] = [];\r\n\r\n        for ( const charId in data.characters ) {\r\n            parsed[\"chars\"].push(\r\n                this.parseChar(data.characters[charId])\r\n            )\r\n        }\r\n\r\n        // Space\r\n        parsed[\"chars\"].push(\r\n            this.parseChar({\r\n                \"code\": SPECIAL_CHAR.SPACE.CODE,\r\n                \"letter\": SPECIAL_CHAR.SPACE.ID,\r\n                \"xadvance\": data.spaceWidth\r\n            })\r\n        );\r\n\r\n        // Tabs\r\n        parsed[\"chars\"].push(\r\n            this.parseChar({\r\n                \"code\": SPECIAL_CHAR.TAB.CODE,\r\n                \"letter\": SPECIAL_CHAR.TAB.ID,\r\n                \"xadvance\": data.tabWidth\r\n            })\r\n        );\r\n\r\n        parsed[\"kernings_count\"] = 0;\r\n        parsed[\"kernings\"] = [];\r\n\r\n        return parsed;\r\n    }\r\n\r\n    static parseMultiFont(data, params) {\r\n        let parsed = {\r\n            \"scaleW\": params.width,\r\n            \"scaleH\": params.height,\r\n            \"file_name\": params.textureName + \".\" + params.textureFormat\r\n        };\r\n\r\n        parsed[\"fonts\"] = [];\r\n        for (const fontId in data) {\r\n            if (data.hasOwnProperty(fontId)) {\r\n                let fontParsed = {\r\n                    \"name\": data[fontId].name,\r\n                    \"size\": data[fontId].size,\r\n                    \"lineHeight\": data[fontId].lineHeight,\r\n                };\r\n\r\n                const chars = Object.keys(data[fontId].characters);\r\n                fontParsed[\"chars_count\"] = chars.length;\r\n                fontParsed[\"chars\"] = [];\r\n\r\n                for ( const charId in data[fontId].characters ) {\r\n                    fontParsed[\"chars\"].push(\r\n                        this.parseChar(data[fontId].characters[charId])\r\n                    )\r\n                }\r\n\r\n                // Space\r\n                fontParsed[\"chars\"].push(\r\n                    this.parseChar({\r\n                        \"code\": SPECIAL_CHAR.SPACE.CODE,\r\n                        \"letter\": SPECIAL_CHAR.SPACE.ID,\r\n                        \"xadvance\": data[fontId].spaceWidth\r\n                    })\r\n                );\r\n\r\n                // Tabs\r\n                fontParsed[\"chars\"].push(\r\n                    this.parseChar({\r\n                        \"code\": SPECIAL_CHAR.TAB.CODE,\r\n                        \"letter\": SPECIAL_CHAR.TAB.ID,\r\n                        \"xadvance\": data[fontId].tabWidth\r\n                    })\r\n                );\r\n\r\n                fontParsed[\"kernings_count\"] = 0;\r\n                fontParsed[\"kernings\"] = [];\r\n\r\n                parsed[\"fonts\"].push(fontParsed);\r\n            }\r\n        }\r\n\r\n        return parsed;\r\n    }\r\n}\r\n\r\nexport default Parser;\r\n","import {GET} from \"../connection/ajax\";\r\nimport mustache from \"mustache/mustache\";\r\nimport JSZip from 'jszip';\r\nimport FileSaver from 'file-saver';\r\nimport Parser from \"./Parser\";\r\nimport list from './list.json';\r\n\r\nclass Exporter {\r\n\r\n    /**\r\n     * @param type\r\n     * @returns {null|Object}\r\n     */\r\n    static getExporterByType(type) {\r\n        for (let item of list) {\r\n            if (item.type === type) {\r\n                return item;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static async startExporter(buffer, data, packOptions) {\r\n        let files = [];\r\n        let mtsFile = 'exporters/' + packOptions.exporter.template;\r\n        let parsed = [];\r\n\r\n        // ToDo: correct export identification. At the moment, we have one completed loader PIXI.extras.BitmapText\r\n        if (packOptions.exporter.type === 'Pixi.js BitmapFont') {\r\n            if (packOptions.multiFont) {\r\n                for (const fontId in data) {\r\n                    if (data.hasOwnProperty(fontId)) {\r\n                        parsed.push(Parser.parseFont(data[fontId], {\r\n                            \"width\": buffer.width,\r\n                            \"height\": buffer.height,\r\n                            \"textureName\": packOptions.textureName,\r\n                            \"textureFormat\": packOptions.textureFormat\r\n                        }));\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                parsed.push(Parser.parseFont(data[packOptions.selectedFont], {\r\n                    \"width\": buffer.width,\r\n                    \"height\": buffer.height,\r\n                    \"textureName\": packOptions.textureName,\r\n                    \"textureFormat\": packOptions.textureFormat\r\n                }));\r\n            }\r\n        }\r\n        else if ( packOptions.exporter.type === 'Pixi.js MultiBitmapFont') {\r\n            parsed.push(Parser.parseMultiFont(data, {\r\n                \"width\": buffer.width,\r\n                \"height\": buffer.height,\r\n                \"textureName\": packOptions.textureName,\r\n                \"textureFormat\": packOptions.textureFormat\r\n            }));\r\n        }\r\n        else {\r\n            // ToDo\r\n        }\r\n\r\n        try {\r\n            let i;\r\n            let results = [];\r\n            const len = parsed.length;\r\n\r\n            for ( i = 0; i < len; i++ ) {\r\n                results.push(await this.loadTemplate(parsed[i], mtsFile));\r\n            }\r\n\r\n            let imageData = buffer.toDataURL(packOptions.textureFormat === 'png' ? 'image/png' : 'image/jpeg');\r\n            let parts = imageData.split(\",\");\r\n            parts.shift();\r\n            imageData = parts.join(\",\");\r\n\r\n            files.push({\r\n                name: packOptions.textureName + \".\" + packOptions.textureFormat,\r\n                content: imageData,\r\n                base64: true\r\n            });\r\n\r\n            if ( results.length > 1 ) {\r\n                for ( const index in results ) {\r\n                    if ( results.hasOwnProperty(index) ) {\r\n                        files.push({\r\n                            name: packOptions.textureName + \"_\" + index + \".xml\",\r\n                            content: results[index]\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                files.push({\r\n                    name: packOptions.textureName  + \".xml\",\r\n                    content: results[0]\r\n                });\r\n            }\r\n\r\n            let zip = new JSZip();\r\n\r\n            for (let file of files) {\r\n                zip.file(file.name, file.content, {base64: !!file.base64});\r\n            }\r\n\r\n            zip.generateAsync({type: \"blob\"})\r\n                .then((content) => {\r\n                    FileSaver.saveAs(content, packOptions.fileName + '.zip');\r\n                });\r\n        }\r\n        catch (e) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    static loadTemplate(data, mtsFile) {\r\n        return new Promise((resolve, reject) => {\r\n            GET(mtsFile, null, (template) => {\r\n                this.renderTemplate(template, data, resolve, reject);\r\n            }, () => reject('multifont.mts not found'));\r\n        });\r\n    }\r\n\r\n    static renderTemplate(template, data, resolve, reject) {\r\n        try {\r\n            let ret = mustache.render(template, data);\r\n            resolve(ret);\r\n        }\r\n        catch (e) {\r\n            reject(e.message);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Exporter;\r\n","import React, {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport packers, {getPackerByType} from '../../utils/packing/packers';\r\nimport {EVENT, Observer} from '../../utils/Observer';\r\nimport {TEXTURES_BACKGROUND as Textures} from \"../../model/constants/background\";\r\nimport list from '../../utils/exporter/list';\r\nimport Exporter from \"../../utils/exporter/Export\";\r\n\r\nimport '../../styles/properties.css';\r\n\r\nclass Properties extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.changeTab = this.changeTab.bind(this);\r\n        this.toggleChange = this.toggleChange.bind(this);\r\n        this.onFontPropChanged = this.onFontPropChanged.bind(this);\r\n        this.onPackerChange = this.onPackerChange.bind(this);\r\n        this.startExport = this.startExport.bind(this);\r\n        this.onFontSelected = this.onFontSelected.bind(this);\r\n        this.onCharSelected = this.onCharSelected.bind(this);\r\n        this.setBack = this.setBack.bind(this);\r\n        this.onToggleSwitchChange = this.onToggleSwitchChange.bind(this);\r\n        this.onExporterChanged = this.onExporterChanged.bind(this);\r\n        this.onDimChanged = this.onDimChanged.bind(this);\r\n\r\n        this.methodItems = null;\r\n        this.packOptions = this.setPackDefault();\r\n        this.updatePackerMethods();\r\n\r\n        this.state = {\r\n            multiTexture: false,\r\n            textureBack: 'grid-back',\r\n            packer: this.packOptions.packer,\r\n            selectedFont: '',\r\n            selectedChar: ''\r\n        };\r\n\r\n        Observer.on(EVENT.FONT_SELECTED, this.onFontSelected);\r\n        Observer.on(EVENT.CHAR_SELECTED, this.onCharSelected);\r\n    }\r\n\r\n    onExporterChanged(event) {\r\n        const exporter = Exporter.getExporterByType(ReactDOM.findDOMNode(this.refs.exporter).value);\r\n\r\n        ReactDOM.findDOMNode(this.refs.allowRotation).disabled = !exporter.allowRotation;\r\n        ReactDOM.findDOMNode(this.refs.allowTrim).disabled = !exporter.allowTrim;\r\n        ReactDOM.findDOMNode(this.refs.trimmode).disabled = !exporter.allowTrim;\r\n\r\n        ReactDOM.findDOMNode(this.refs.toggleSwitch).disabled = !(exporter.allowMultiFont && exporter.allowOneFont);\r\n\r\n        if (ReactDOM.findDOMNode(this.refs.toggleSwitch).disabled) {\r\n            ReactDOM.findDOMNode(this.refs.toggleSwitch).checked = exporter.allowMultiFont;\r\n        }\r\n\r\n        this.packOptions.exporter = exporter;\r\n        this.packOptions.allowTrim = exporter.allowTrim;\r\n        this.packOptions.allowRotation = exporter.allowRotation;\r\n\r\n        this.emitChanges();\r\n    }\r\n\r\n    onFontSelected(data) {\r\n        this.state.selectedFont = data.selectedFont;\r\n        this.updateFontProps();\r\n    }\r\n\r\n    onCharSelected(data) {\r\n        this.state.selectedChar = data.selectedChar;\r\n        this.state.selectedFont = data.selectedFont;\r\n        this.updateFontProps();\r\n    }\r\n\r\n    updateFontProps() {\r\n        if (this.state.selectedFont) {\r\n            this.packOptions.selectedFont = this.state.selectedFont;\r\n\r\n            const fontData = this.props.bitmapfonts[this.state.selectedFont];\r\n\r\n            ReactDOM.findDOMNode(this.refs.bmpfSelected).value = this.state.selectedFont;\r\n            ReactDOM.findDOMNode(this.refs.size).value = fontData.size;\r\n            ReactDOM.findDOMNode(this.refs.lineHeight).value = fontData.lineHeight;\r\n            ReactDOM.findDOMNode(this.refs.spaceWidth).value = fontData.spaceWidth;\r\n            ReactDOM.findDOMNode(this.refs.tabWidth).value = fontData.tabWidth;\r\n            ReactDOM.findDOMNode(this.refs.monoSpace).checked = fontData.monospace;\r\n\r\n            const charData = fontData.getCharById(this.state.selectedChar);\r\n\r\n            if (charData) {\r\n                ReactDOM.findDOMNode(this.refs.selectedChar).value = charData.text;\r\n                ReactDOM.findDOMNode(this.refs.asciiCode).value = charData.code;\r\n                ReactDOM.findDOMNode(this.refs.xOffSet).value = charData.xoffset;\r\n                ReactDOM.findDOMNode(this.refs.yOffSet).value = charData.yoffset;\r\n                ReactDOM.findDOMNode(this.refs.xAdvance).value = charData.xadvance;\r\n            }\r\n            else {\r\n                ReactDOM.findDOMNode(this.refs.xOffSet).value = 0;\r\n                ReactDOM.findDOMNode(this.refs.yOffSet).value = 0;\r\n                ReactDOM.findDOMNode(this.refs.xAdvance).value = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    emitChanges() {\r\n        let data = Object.assign({}, this.packOptions);\r\n        data.packer = getPackerByType(data.packer);\r\n\r\n        Observer.emit(EVENT.PACK_OPTIONS_CHANGED, data);\r\n    }\r\n\r\n    setPackDefault() {\r\n        let data = {};\r\n\r\n        data.selectedFont = null;\r\n        data.multiFont = false;\r\n        data.exporter = list[0];\r\n        data.fileName = 'pack-result';\r\n        data.textureName = 'texture';\r\n        data.textureFormat = 'png';\r\n        data.scale = 1;\r\n        data.width = 2048;\r\n        data.height = 2048;\r\n        data.fixedSize = false;\r\n        data.powerOfTwo = false;\r\n        data.allowRotation = false;\r\n        data.allowTrim = false;\r\n        data.trimMode = 'trim';\r\n        data.detectIdentical = true;\r\n        data.packer = packers[0].type;\r\n        data.packerMethod = Object.keys(packers[0].methods)[0];\r\n\r\n        return data;\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Pack properties selected\r\n        document.getElementById(\"id_button_pack\")\r\n            .click();\r\n        this.emitChanges();\r\n    }\r\n\r\n    changeTab(event) {\r\n        if (event.currentTarget.id === 'id_button_pack') {\r\n            ReactDOM.findDOMNode(this.refs.tab_font).style.display = \"none\";\r\n            ReactDOM.findDOMNode(this.refs.tab_properties).style.display = \"block\";\r\n\r\n            let refTabButtonPack = ReactDOM.findDOMNode(this.refs.tab_button_pack);\r\n            refTabButtonPack.className += \" active\";\r\n\r\n            let refTabButtonFont = ReactDOM.findDOMNode(this.refs.tab_button_font);\r\n            refTabButtonFont.className = refTabButtonFont.className.replace(\" active\", \"\");\r\n        }\r\n        else {\r\n            ReactDOM.findDOMNode(this.refs.tab_font).style.display = \"block\";\r\n            ReactDOM.findDOMNode(this.refs.tab_properties).style.display = \"none\";\r\n\r\n            let refTabButtonFont = ReactDOM.findDOMNode(this.refs.tab_button_font);\r\n            refTabButtonFont.className += \" active\";\r\n\r\n            let refTabButtonPack = ReactDOM.findDOMNode(this.refs.tab_button_pack);\r\n            refTabButtonPack.className = refTabButtonPack.className.replace(\" active\", \"\");\r\n        }\r\n    }\r\n\r\n    updatePackerMethods() {\r\n        let currentPacker = getPackerByType(this.packOptions.packer);\r\n\r\n        if (!currentPacker) {\r\n            currentPacker = packers[0];\r\n        }\r\n\r\n        this.methodItems = [];\r\n\r\n        let methods = Object.keys(currentPacker.methods);\r\n        for (let item of methods) {\r\n            this.methodItems.push(<option value={item} key={\"packer-method-\" + item}>{item}</option>);\r\n        }\r\n\r\n        this.packOptions.packerMethod = methods[0];\r\n    }\r\n\r\n    onPackerChange(event) {\r\n        this.packOptions.packer = ReactDOM.findDOMNode(this.refs.packer).value;\r\n        this.updatePackerMethods();\r\n\r\n        this.setState({\r\n            packer: this.packOptions.packer\r\n        });\r\n\r\n        this.emitChanges();\r\n    }\r\n\r\n    onFontPropChanged(event) {\r\n        this.props.bitmapfonts[this.state.selectedFont].size = Number(ReactDOM.findDOMNode(this.refs.size).value);\r\n        this.props.bitmapfonts[this.state.selectedFont].lineHeight = Number(ReactDOM.findDOMNode(this.refs.lineHeight).value);\r\n        this.props.bitmapfonts[this.state.selectedFont].spaceWidth = Number(ReactDOM.findDOMNode(this.refs.spaceWidth).value);\r\n        this.props.bitmapfonts[this.state.selectedFont].tabWidth = Number(ReactDOM.findDOMNode(this.refs.tabWidth).value);\r\n        this.props.bitmapfonts[this.state.selectedFont].monospace = ReactDOM.findDOMNode(this.refs.monoSpace).checked;\r\n\r\n        if (this.props.bitmapfonts[this.state.selectedFont].monospace) {\r\n            this.props.bitmapfonts[this.state.selectedFont].setCharMonospace();\r\n        }\r\n        else {\r\n            const charData = this.props.bitmapfonts[this.state.selectedFont].getCharById(this.state.selectedChar);\r\n\r\n            if (charData) {\r\n                this.props.bitmapfonts[this.state.selectedFont].characters[this.state.selectedChar].xoffset = Number(ReactDOM.findDOMNode(this.refs.xOffSet).value);\r\n                this.props.bitmapfonts[this.state.selectedFont].characters[this.state.selectedChar].yoffset = Number(ReactDOM.findDOMNode(this.refs.yOffSet).value);\r\n                this.props.bitmapfonts[this.state.selectedFont].characters[this.state.selectedChar].xadvance = Number(ReactDOM.findDOMNode(this.refs.xAdvance).value);\r\n            }\r\n        }\r\n\r\n        Observer.emit(EVENT.UPDATE_RESULT);\r\n    }\r\n\r\n    toggleChange(event) {\r\n        this.packOptions.fileName = ReactDOM.findDOMNode(this.refs.fileName).value;\r\n        this.packOptions.textureFormat = ReactDOM.findDOMNode(this.refs.textureFormat).value;\r\n        this.packOptions.textureName = ReactDOM.findDOMNode(this.refs.textureName).value;\r\n        this.packOptions.scale = ReactDOM.findDOMNode(this.refs.scale).value;\r\n        this.packOptions.width = ReactDOM.findDOMNode(this.refs.width).value;\r\n        this.packOptions.height = ReactDOM.findDOMNode(this.refs.height).value;\r\n        this.packOptions.fixedSize = ReactDOM.findDOMNode(this.refs.fixedSize).checked;\r\n        this.packOptions.powerOfTwo = ReactDOM.findDOMNode(this.refs.powerOfTwo).checked;\r\n        this.packOptions.detectIdentical = ReactDOM.findDOMNode(this.refs.detectIdentical).checked;\r\n        this.packOptions.allowTrim = ReactDOM.findDOMNode(this.refs.allowTrim).checked;\r\n        this.packOptions.allowRotation = ReactDOM.findDOMNode(this.refs.allowRotation).checked;\r\n        this.packOptions.packer = ReactDOM.findDOMNode(this.refs.packer).value;\r\n        this.packOptions.packerMethod = ReactDOM.findDOMNode(this.refs.packerMethod).value;\r\n\r\n        // emit changes\r\n        this.emitChanges();\r\n    }\r\n\r\n    startExport() {\r\n        Observer.emit(EVENT.START_EXPORT);\r\n    }\r\n\r\n    setBack(event) {\r\n        let classNames = event.target.className.split(\" \");\r\n\r\n        Observer.emit(EVENT.BACKGROUND_TEXTURE_CHANGED, classNames[1]);\r\n    }\r\n\r\n    onToggleSwitchChange(event) {\r\n        this.packOptions.multiFont = event.currentTarget.checked;\r\n\r\n        // emit changes\r\n        this.emitChanges();\r\n    }\r\n\r\n    onDimChanged(event) {\r\n        if (event) {\r\n            let key = event.keyCode || event.which;\r\n            if (key === 13) {\r\n                if ( event.currentTarget.value === '' ) {\r\n                    event.currentTarget.value = 1;\r\n                }\r\n                this.toggleChange();\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"properties\">\r\n                <div className=\"tabs\">\r\n                    <div className=\"tab\">\r\n                        <button ref=\"tab_button_pack\" id=\"id_button_pack\" className=\"tab-button\"\r\n                                onClick={this.changeTab}>Pack Properties\r\n                        </button>\r\n                        <button ref=\"tab_button_font\" id=\"id_button_font\" className=\"tab-button\"\r\n                                onClick={this.changeTab}>Font Properties\r\n                        </button>\r\n                    </div>\r\n                    <div ref=\"tab_properties\" className=\"tab-content\">\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Pack Name</span>\r\n                            <input className=\"properties-input-field\" ref=\"fileName\"\r\n                                   defaultValue={this.packOptions.fileName}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Texture Name</span>\r\n                            <input className=\"properties-input-field\" ref=\"textureName\"\r\n                                   defaultValue={this.packOptions.textureName}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Format</span>\r\n                            <select className=\"properties-input-field\" ref=\"textureFormat\"\r\n                                    defaultValue={this.packOptions.textureFormat} onChange={this.toggleChange}>\r\n                                <option value=\"png\">png</option>\r\n                                <option value=\"jpg\">jpg</option>\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Exporter</span>\r\n                            <select className=\"properties-input-field\" ref=\"exporter\" onChange={this.onExporterChanged}\r\n                                    defaultValue={this.packOptions.exporter}>\r\n                                {list.map(node => {\r\n                                    return (<option key={\"exporter-\" + node.type}\r\n                                                    defaultValue={node.type}>{node.type}</option>)\r\n                                })}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Scale</span>\r\n                            <input className=\"properties-input-field\" ref=\"scale\"\r\n                                   defaultValue={this.packOptions.scale}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Width</span>\r\n                            <input className=\"properties-input-field\" ref=\"width\" type=\"number\" min=\"0\" onKeyDown={this.onDimChanged}\r\n                                   defaultValue={this.packOptions.width}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Height</span>\r\n                            <input className=\"properties-input-field\" ref=\"height\" type=\"number\" min=\"0\" onKeyDown={this.onDimChanged}\r\n                                   defaultValue={this.packOptions.height}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Fixed size</span>\r\n                            <label className=\"checkbox-container\">\r\n                                <input type=\"checkbox\" ref=\"fixedSize\"\r\n                                       defaultChecked={this.packOptions.fixedSize ? \"checked\" : \"\"}\r\n                                       onChange={this.toggleChange}/>\r\n                                <span className=\"checkmark\"/>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Power of two</span>\r\n                            <label className=\"checkbox-container\">\r\n                                <input type=\"checkbox\" ref=\"powerOfTwo\" onChange={this.toggleChange}\r\n                                       defaultChecked={this.packOptions.powerOfTwo ? \"checked\" : \"\"}/>\r\n                                <span className=\"checkmark\"/>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Allow Rotation</span>\r\n                            <label className=\"checkbox-container\">\r\n                                <input type=\"checkbox\" ref=\"allowRotation\"\r\n                                       disabled={!this.packOptions.exporter.allowRotation}\r\n                                       onChange={this.toggleChange}\r\n                                       defaultChecked={this.packOptions.allowRotation ? \"checked\" : \"\"}/>\r\n                                <span className=\"checkmark\"/>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Allow Trim</span>\r\n                            <label className=\"checkbox-container\">\r\n                                <input type=\"checkbox\" ref=\"allowTrim\" onChange={this.toggleChange}\r\n                                       disabled={!this.packOptions.exporter.allowTrim}\r\n                                       defaultChecked={this.packOptions.allowTrim ? \"checked\" : \"\"}/>\r\n                                <span className=\"checkmark\"/>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Trim mode</span>\r\n                            <select className=\"properties-input-field\" ref=\"trimmode\">\r\n                                <option value=\"trim\">Trim</option>\r\n                                <option value=\"crop\">Crop</option>\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Detect identical</span>\r\n                            <label className=\"checkbox-container\">\r\n                                <input type=\"checkbox\" ref=\"detectIdentical\" onChange={this.toggleChange}\r\n                                       defaultChecked={this.packOptions.detectIdentical ? \"checked\" : \"\"}/>\r\n                                <span className=\"checkmark\"/>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Packer</span>\r\n                            <select className=\"properties-input-field\" ref=\"packer\" onChange={this.onPackerChange}>\r\n                                {\r\n                                    packers.map(node => {\r\n                                        return (<option key={\"packer-\" + node.type}\r\n                                                        defaultValue={node.type}>{node.type}</option>)\r\n                                    })\r\n                                }\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Method</span>\r\n                            <select className=\"properties-input-field\" ref=\"packerMethod\" onChange={this.toggleChange}\r\n                                    disabled={this.packOptions.packer === \"OptimalPacker\"}>\r\n                                {this.methodItems}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"bg-texture-container\">\r\n                            Background texture\r\n                            <div className=\"bg-texture-container-buttons\">\r\n                                {Textures.map(name => {\r\n                                    return (\r\n                                        <div key={\"bg-texture-\" + name}>\r\n                                            <div\r\n                                                className={\"bg-texture-button \" + name + (this.state.textureBack === name ? \" selected\" : \"\")}\r\n                                                onClick={this.setBack}>&nbsp;</div>\r\n                                        </div>\r\n                                    )\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bg-texture-container properties-input properties-switch\">\r\n                            <div className=\"properties-switch-op\">One Font</div>\r\n                            <div>\r\n                                <label className=\"switch\">\r\n                                    <input type=\"checkbox\" ref=\"toggleSwitch\" onClick={this.onToggleSwitchChange}/>\r\n                                    <span className=\"slider round\"></span>\r\n                                </label>\r\n                            </div>\r\n                            <div className=\"properties-switch-op\">Multi Font</div>\r\n                        </div>\r\n                    </div>\r\n                    <div ref=\"tab_font\" className=\"tab-content\">\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">BitmapFont</span>\r\n                            <input className=\"properties-input-field\" ref=\"bmpfSelected\" defaultValue=\"\" readOnly\r\n                                   disabled/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Monospace</span>\r\n                            <label className=\"checkbox-container\">\r\n                                <input type=\"checkbox\" ref=\"monoSpace\" onChange={this.onFontPropChanged}/>\r\n                                <span className=\"checkmark\"/>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Font size</span>\r\n                            <input className=\"properties-input-field\" type=\"number\" ref=\"size\" defaultValue=\"0\"\r\n                                   onChange={this.onFontPropChanged}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Line height</span>\r\n                            <input className=\"properties-input-field\" type=\"number\" ref=\"lineHeight\" defaultValue=\"0\"\r\n                                   onChange={this.onFontPropChanged}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Space width</span>\r\n                            <input className=\"properties-input-field\" type=\"number\" ref=\"spaceWidth\" defaultValue=\"0\"\r\n                                   onChange={this.onFontPropChanged}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Tab width</span>\r\n                            <input className=\"properties-input-field\" type=\"number\" ref=\"tabWidth\" defaultValue=\"0\"\r\n                                   onChange={this.onFontPropChanged}/>\r\n                        </div>\r\n                        <br/>\r\n                        <hr/>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">Selected Char</span>\r\n                            <input className=\"properties-input-field\" ref=\"selectedChar\" defaultValue=\"\" readOnly\r\n                                   disabled/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">ASCII Code</span>\r\n                            <input className=\"properties-input-field\" ref=\"asciiCode\" defaultValue=\"\" readOnly\r\n                                   disabled/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">xoffset</span>\r\n                            <input className=\"properties-input-field\" type=\"number\" ref=\"xOffSet\" defaultValue=\"0\"\r\n                                   onChange={this.onFontPropChanged}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">yoffset</span>\r\n                            <input className=\"properties-input-field\" type=\"number\" ref=\"yOffSet\" defaultValue=\"0\"\r\n                                   onChange={this.onFontPropChanged}/>\r\n                        </div>\r\n                        <div className=\"properties-input\">\r\n                            <span className=\"properties-input-item\">xadvance</span>\r\n                            <input className=\"properties-input-field\" type=\"number\" ref=\"xAdvance\" defaultValue=\"0\"\r\n                                   onChange={this.onFontPropChanged}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <button className=\"app-button\" ref=\"exportButton\" onClick={this.startExport}>EXPORT</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Properties;\r\n\r\n\r\n","import {v4 as uuidv4} from 'uuid';\r\n\r\nclass SpriteSplitter {\r\n    constructor() {\r\n        /**\r\n         * @type {?Array<Object>}\r\n         * @private\r\n         */\r\n        this._listSelections = null;\r\n\r\n        /**\r\n         * @type {Image}\r\n         * @private\r\n         */\r\n        this._img = null;\r\n\r\n        /**\r\n         * @type {?Uint8ClampedArray}\r\n         * @private\r\n         */\r\n        this._rawData = null;\r\n\r\n        /**\r\n         * @type {Object}\r\n         * @private\r\n         */\r\n        this._refPixel = null;\r\n\r\n        /**\r\n         * @type {?string}\r\n         * @private\r\n         */\r\n        this._fontName = null;\r\n\r\n        /**\r\n         * @type {HTMLCanvasElement}\r\n         * @private\r\n         */\r\n        this._auxCanvas = document.createElement('canvas');\r\n    }\r\n\r\n    /**\r\n     * @param img\r\n     * @param {string} fontName\r\n     * @returns {?Array<Object>}\r\n     */\r\n    split(img, fontName) {\r\n        this._listSelections = [];\r\n        this._img = img;\r\n        this._fontName = fontName;\r\n\r\n        this._auxCanvas.width = img.width;\r\n        this._auxCanvas.height = img.height;\r\n\r\n        this._auxCanvas.getContext('2d')\r\n            .drawImage(img, 0, 0, img.width, img.height);\r\n        this._rawData = this._auxCanvas.getContext('2d')\r\n            .getImageData(0, 0, img.width, img.height).data;\r\n\r\n        this._refPixel = this.getPixel(0, 0);\r\n\r\n        let next = true;\r\n\r\n        do {\r\n            next = this.selectFrameAt();\r\n        }\r\n        while (next);\r\n\r\n        return this._listSelections;\r\n    }\r\n\r\n    selectFrameAt() {\r\n        let firstPixel = this.findNextStartPixel();\r\n\r\n        if (this.isFinalPixel(firstPixel)) {\r\n            return false;\r\n        }\r\n\r\n        let selection = this.selectFrame(firstPixel);\r\n\r\n        if (selection) {\r\n            //selection.id = Date.now(); // unique identification\r\n            selection.id = uuidv4(); // ToDo make it easier\r\n            selection.fontName = this._fontName;\r\n            selection.imagedata = this._auxCanvas.getContext('2d')\r\n                .getImageData(selection.x, selection.y, selection.width, selection.height);\r\n\r\n            this._listSelections.push(selection);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    selectFrame(firstPixel) {\r\n        let selection = {\r\n            id: 0,\r\n            fontName: '',\r\n            x: firstPixel.x,\r\n            y: firstPixel.y,\r\n            width: 1,\r\n            height: 1,\r\n            imagedata: null\r\n        };\r\n\r\n        this.expandFromPixel(selection);\r\n\r\n        return selection\r\n    }\r\n\r\n    expandFromPixel(selection) {\r\n        let isFinished = false;\r\n\r\n        while (!isFinished) {\r\n            let offset = this.expandFromAllDirections(selection);\r\n\r\n            if (offset === 0) {\r\n                isFinished = true\r\n            }\r\n        }\r\n    }\r\n\r\n    expandFromAllDirections(selection) {\r\n        let offset = 0;\r\n\r\n        offset += this.expandToTheRight(selection);\r\n        offset += this.expandToTheBottom(selection);\r\n        offset += this.expandToTheLeft(selection);\r\n        offset += this.expandToTheTop(selection);\r\n\r\n        return offset\r\n    }\r\n\r\n    expandToTheTop(selection) {\r\n        let offset = 0;\r\n        let isFinished = false;\r\n\r\n        while (!isFinished) {\r\n            if (this.isLineEmptyToTheTop(selection)) {\r\n                isFinished = true;\r\n                break\r\n            }\r\n\r\n            offset += 1;\r\n            selection.y -= 1;\r\n            selection.height += 1;\r\n        }\r\n        return offset\r\n    }\r\n\r\n    isLineEmptyToTheTop(selection) {\r\n        let xToCheck = selection.x;\r\n        let yToCheck = selection.y - 1;\r\n\r\n        if (yToCheck < 0) {\r\n            return true;\r\n        }\r\n\r\n        for (let x = xToCheck, max = (xToCheck + selection.width); x < max; x++) {\r\n            if (!this.isEmptyPixel(this.getPixel(x, yToCheck))) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    expandToTheLeft(selection) {\r\n        let offset = 0;\r\n        let isFinished = false;\r\n\r\n        while (!isFinished) {\r\n            if (this.isLineEmptyToTheLeft(selection)) {\r\n                isFinished = true;\r\n                break\r\n            }\r\n\r\n            offset += 1;\r\n            selection.x -= 1;\r\n            selection.width += 1;\r\n        }\r\n\r\n        return offset\r\n    }\r\n\r\n    isLineEmptyToTheLeft(selection) {\r\n        let xToCheck = selection.x - 1;\r\n        let yToCheck = selection.y;\r\n\r\n        if (xToCheck < 0) {\r\n            return true;\r\n        }\r\n\r\n        for (let y = yToCheck, max = (yToCheck + selection.height); y < max; y++) {\r\n            if (!this.isEmptyPixel(this.getPixel(xToCheck, y))) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    expandToTheRight(selection) {\r\n        let offset = 0;\r\n        let isFinished = false;\r\n\r\n        while (!isFinished) {\r\n            if (this.isLineEmptyToTheRight(selection)) {\r\n                isFinished = true;\r\n                break\r\n            }\r\n\r\n            offset += 1;\r\n            selection.width += 1;\r\n        }\r\n\r\n        return offset\r\n    }\r\n\r\n    expandToTheBottom(selection) {\r\n        let offset = 0;\r\n        let isFinished = false;\r\n\r\n        while (!isFinished) {\r\n            if (this.isLineEmptyToTheBottom(selection)) {\r\n                isFinished = true;\r\n                break\r\n            }\r\n            else {\r\n                offset += 1;\r\n                selection.height += 1;\r\n            }\r\n        }\r\n\r\n        return offset\r\n    }\r\n\r\n    isLineEmptyToTheBottom(selection) {\r\n        let xToCheck = selection.x;\r\n        let yToCheck = selection.y + selection.height;\r\n\r\n        if (yToCheck > this._img.height) {\r\n            return true;\r\n        }\r\n\r\n        for (let x = xToCheck, max = (xToCheck + selection.width); x < max; x++) {\r\n            if (!this.isEmptyPixel(this.getPixel(x, yToCheck))) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    isLineEmptyToTheRight(selection) {\r\n        let xToCheck = selection.x + selection.width;\r\n        let yToCheck = selection.y;\r\n\r\n        if (xToCheck > this._img.width) {\r\n            return true;\r\n        }\r\n\r\n        for (let y = yToCheck, max = (yToCheck + selection.height); y < max; y++) {\r\n            if (!this.isEmptyPixel(this.getPixel(xToCheck, y))) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    getPixel(x, y) {\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            red: this._rawData[(this._img.width * y + x) * 4],\r\n            green: this._rawData[(this._img.width * y + x) * 4 + 1],\r\n            blue: this._rawData[(this._img.width * y + x) * 4 + 2],\r\n            alpha: this._rawData[(this._img.width * y + x) * 4 + 3]\r\n        }\r\n    }\r\n\r\n    isEmptyPixel(targetPixel) {\r\n        return targetPixel.red === this._refPixel.red\r\n            && targetPixel.blue === this._refPixel.blue\r\n            && targetPixel.green === this._refPixel.green\r\n            && targetPixel.alpha === this._refPixel.alpha\r\n    }\r\n\r\n\r\n    findNextStartPixel() {\r\n        return this.searchPixel();\r\n    }\r\n\r\n    isFinalPixel(pixel) {\r\n        return pixel === undefined || (pixel.x === this._img.width - 1 && pixel.y === this._img.height - 1)\r\n    }\r\n\r\n    searchPixel() {\r\n        for (let y = 0, max = this._img.height; y < max; y++) {\r\n            for (let x = 0, maxX = this._img.width; x < maxX; x++) {\r\n                let targetPixel = this.getPixel(x, y);\r\n                if (!this.isEmptyPixel(targetPixel) && !this.isPixelInSelections(this._listSelections, targetPixel)) {\r\n                    //lastPixel = targetPixel;\r\n                    return targetPixel;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    isPixelInSelections(selections, pixel) {\r\n        return this.findSelectionOfPixel(selections, pixel).length > 0\r\n    }\r\n\r\n    findSelectionOfPixel(selections, pixel) {\r\n        return selections.filter(function (selection) {\r\n            let minX = selection.x;\r\n            let minY = selection.y;\r\n\r\n            let maxX = selection.x + selection.width;\r\n            let maxY = selection.y + selection.height;\r\n\r\n            if (pixel.x >= minX && pixel.x <= maxX && pixel.y >= minY && pixel.y <= maxY) {\r\n                return selection\r\n            }\r\n            else {\r\n                return false\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport default SpriteSplitter;\r\n","class Character\r\n{\r\n    constructor()\r\n    {\r\n        /**\r\n         * @type {string}\r\n         * @private\r\n         */\r\n        this._text = '';\r\n\r\n        /**\r\n         * ASCII code\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._code = -1;\r\n\r\n        /**\r\n         * @type {{w: number, x: number, h: number, y: number}}\r\n         * @private\r\n         */\r\n        this._frame = {\r\n            x: 0,\r\n            y: 0,\r\n            w: 0,\r\n            h: 0\r\n        };\r\n\r\n        /**\r\n         * @type {{w: number, h: number}}\r\n         * @private\r\n         */\r\n        this._sourceSize = {\r\n            w: 0,\r\n            h: 0\r\n        };\r\n\r\n        /**\r\n         *\r\n         * @type {{w: number, x: number, h: number, y: number}}\r\n         * @private\r\n         */\r\n        this._spriteSourceSize = {\r\n            x: 0,\r\n            y: 0,\r\n            w: 0,\r\n            h: 0\r\n        };\r\n\r\n        /**\r\n         * @type {HTMLImageElement} HTML Image\r\n         */\r\n        this._image = null;\r\n\r\n        /**\r\n         * @type {boolean}\r\n         * @private\r\n         */\r\n        this._rotated = false;\r\n\r\n        /**\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._xoffset = 0;\r\n\r\n        /**\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._yoffset = 0;\r\n\r\n        /**\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._xadvance = 0;\r\n    }\r\n\r\n    set rotated(value)\r\n    {\r\n        this._rotated = value;\r\n    }\r\n\r\n    get rotated()\r\n    {\r\n        return this._rotated;\r\n    }\r\n\r\n    set frame(value)\r\n    {\r\n        this._frame = value;\r\n    }\r\n\r\n    get frame()\r\n    {\r\n        return this._frame;\r\n    }\r\n\r\n    set sourceSize(value)\r\n    {\r\n        this._sourceSize = value;\r\n    }\r\n\r\n    get sourceSize()\r\n    {\r\n        return this._sourceSize;\r\n    }\r\n\r\n    set spriteSourceSize(value)\r\n    {\r\n        this._spriteSourceSize = value;\r\n    }\r\n\r\n    get spriteSourceSize()\r\n    {\r\n        return this._spriteSourceSize;\r\n    }\r\n\r\n    set image(value)\r\n    {\r\n        this._image = value;\r\n    }\r\n\r\n    get image()\r\n    {\r\n        return this._image;\r\n    }\r\n\r\n    set text(value)\r\n    {\r\n        this._text = value;\r\n        this._code = value.charCodeAt(0);\r\n    }\r\n\r\n    get text()\r\n    {\r\n        return this._text;\r\n    }\r\n\r\n    get xadvance()\r\n    {\r\n        return this._xadvance\r\n    }\r\n\r\n    set xadvance(value)\r\n    {\r\n        this._xadvance = value;\r\n    }\r\n\r\n    get xoffset()\r\n    {\r\n        return this._xoffset;\r\n    }\r\n\r\n    set xoffset(value)\r\n    {\r\n        this._xoffset = value;\r\n    }\r\n\r\n    get yoffset()\r\n    {\r\n        return this._yoffset;\r\n    }\r\n\r\n    set yoffset(value)\r\n    {\r\n        this._yoffset = value;\r\n    }\r\n\r\n    get code()\r\n    {\r\n        return this._code;\r\n    }\r\n}\r\n\r\nexport default Character;\r\n","import Character from \"./Character\";\r\nimport EventEmitter from \"eventemitter3\";\r\n\r\nclass BitmapFontData extends EventEmitter {\r\n    constructor(fontName, image) {\r\n        super();\r\n\r\n        /**\r\n         * @type {string} font name\r\n         * @private\r\n         */\r\n        this._name = fontName.split('.')\r\n            .slice(0, -1)\r\n            .join('.');\r\n\r\n        /**\r\n         * @type {string}\r\n         * @private\r\n         */\r\n        this._fileName = fontName;\r\n\r\n        /**\r\n         * @type {Image}\r\n         * @private\r\n         */\r\n        this._image = image;\r\n\r\n        /**\r\n         * @type {number} font size\r\n         * @private\r\n         */\r\n        this._size = 0;\r\n\r\n        /**\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._lineHeight = 0;\r\n\r\n        /**\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._spaceWidth = 0;\r\n\r\n        /**\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._tabWidth = 0;\r\n\r\n        /**\r\n         * @type {boolean}\r\n         * @private\r\n         */\r\n        this._monospace = false;\r\n\r\n        /**\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        this._monospaceValue = 0;\r\n\r\n        /**\r\n         * @type {Object}\r\n         * @private\r\n         */\r\n        this._characters = {};\r\n    }\r\n\r\n    get characters() {\r\n        return this._characters;\r\n    }\r\n\r\n    set characters(value) {\r\n        const len = value.length;\r\n        let i;\r\n        let maxWidth = 0;\r\n        let maxHeight = 0;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            this._characters[value[i].id] = new Character();\r\n\r\n            // default value\r\n            this._characters[value[i].id].xadvance = value[i].width;\r\n\r\n            maxWidth = value[i].width > maxWidth ? value[i].width : maxWidth;\r\n            maxHeight = value[i].height > maxHeight ? value[i].height : maxHeight;\r\n        }\r\n\r\n        this._monospaceValue = maxWidth;\r\n        this._lineHeight = maxHeight;\r\n        this._size = maxHeight;\r\n\r\n        // ToDo default values\r\n        this._spaceWidth = 20;\r\n        this._tabWidth = 30;\r\n    }\r\n\r\n    /**\r\n     * @param charId\r\n     * @returns {null|Character}\r\n     */\r\n    getCharById(charId) {\r\n        let chara = null;\r\n\r\n        if (this._characters.hasOwnProperty(charId)) {\r\n            chara = this._characters[charId];\r\n        }\r\n\r\n        return chara;\r\n    }\r\n\r\n    /**\r\n     * @param text\r\n     * @returns {null|Character}\r\n     */\r\n    getCharByText(text) {\r\n        let chara = null;\r\n\r\n        for (const charId in this._characters) {\r\n            if (this._characters.hasOwnProperty(charId)) {\r\n                if (this._characters[charId].text === text) {\r\n                    chara = this._characters[charId];\r\n                }\r\n            }\r\n        }\r\n\r\n        return chara;\r\n    }\r\n\r\n    setCharMonospace() {\r\n        for (const charId in this._characters) {\r\n            if (this._characters.hasOwnProperty(charId)) {\r\n                this._characters[charId].xoffset = (this._monospaceValue - this._characters[charId].frame.w) / 2.0;\r\n                this._characters[charId].xadvance = this._monospaceValue + (this._monospaceValue - this._characters[charId].frame.w) / 2.0;\r\n            }\r\n        }\r\n    }\r\n\r\n    get spaceWidth() {\r\n        return this._spaceWidth;\r\n    }\r\n\r\n    set spaceWidth(value) {\r\n        this._spaceWidth = value;\r\n    }\r\n\r\n    get tabWidth() {\r\n        return this._tabWidth\r\n    }\r\n\r\n    set tabWidth(value) {\r\n        this._tabWidth = value;\r\n    }\r\n\r\n    get monospace() {\r\n        return this._monospace;\r\n    }\r\n\r\n    set monospace(value) {\r\n        this._monospace = value;\r\n    }\r\n\r\n    get monospaceValue() {\r\n        return this._monospaceValue;\r\n    }\r\n\r\n    set monospaceValue(value) {\r\n        this._monospaceValue = value;\r\n    }\r\n\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n\r\n    set lineHeight(value) {\r\n        this._lineHeight = value;\r\n    }\r\n\r\n    get size() {\r\n        return this._size;\r\n    }\r\n\r\n    set size(value) {\r\n        this._size = value;\r\n    }\r\n\r\n    get name() {\r\n        return this._name;\r\n    }\r\n\r\n    get fileName() {\r\n        return this._fileName;\r\n    }\r\n}\r\n\r\nexport default BitmapFontData;\r\n","class Trimmer\r\n{\r\n    constructor()\r\n    {\r\n\r\n    }\r\n\r\n    static getAlpha(data, width, x, y)\r\n    {\r\n        return data[((y * (width * 4)) + (x * 4)) + 3];\r\n    }\r\n\r\n    static getLeftSpace(data, width, height, threshold = 0)\r\n    {\r\n        let x;\r\n\r\n        for (x = 0; x < width; x++)\r\n        {\r\n            for (let y = 0; y < height; y++)\r\n            {\r\n                if (this.getAlpha(data, width, x, y) > threshold)\r\n                {\r\n                    return x;\r\n                }\r\n            }\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    static getRightSpace(data, width, height, threshold = 0)\r\n    {\r\n        let x;\r\n\r\n        for (x = width - 1; x >= 0; x--)\r\n        {\r\n            for (let y = 0; y < height; y++)\r\n            {\r\n                if (this.getAlpha(data, width, x, y) > threshold)\r\n                {\r\n                    return width - x - 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    static getTopSpace(data, width, height, threshold = 0)\r\n    {\r\n        let y;\r\n\r\n        for (y = 0; y < height; y++)\r\n        {\r\n            for (let x = 0; x < width; x++)\r\n            {\r\n                if (this.getAlpha(data, width, x, y) > threshold)\r\n                {\r\n                    return y;\r\n                }\r\n            }\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    static getBottomSpace(data, width, height, threshold = 0)\r\n    {\r\n        let y;\r\n\r\n        for (y = height - 1; y >= 0; y--)\r\n        {\r\n            for (let x = 0; x < width; x++)\r\n            {\r\n                if (this.getAlpha(data, width, x, y) > threshold)\r\n                {\r\n                    return height - y - 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    static trim(rects, threshold = 0)\r\n    {\r\n        let cns = document.createElement(\"canvas\");\r\n        let ctx = cns.getContext(\"2d\");\r\n\r\n        for (let item of rects)\r\n        {\r\n            let img = item.image;\r\n\r\n            cns.width = img.width;\r\n            cns.height = img.height;\r\n\r\n            ctx.clearRect(0, 0, img.width, img.height);\r\n            ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);\r\n\r\n            let data = ctx.getImageData(0, 0, img.width, img.height).data;\r\n            let spaces = {left: 0, right: 0, top: 0, bottom: 0};\r\n\r\n            spaces.left = this.getLeftSpace(data, img.width, img.height, threshold);\r\n            if (spaces.left !== img.width)\r\n            {\r\n                spaces.right = this.getRightSpace(data, img.width, img.height, threshold);\r\n                spaces.top = this.getTopSpace(data, img.width, img.height, threshold);\r\n                spaces.bottom = this.getBottomSpace(data, img.width, img.height, threshold);\r\n\r\n                if (spaces.left > 0 || spaces.right > 0 || spaces.top > 0 || spaces.bottom > 0)\r\n                {\r\n                    item.trimmed = true;\r\n                    item.spriteSourceSize.x = spaces.left;\r\n                    item.spriteSourceSize.y = spaces.top;\r\n                    item.spriteSourceSize.w = img.width - spaces.left - spaces.right;\r\n                    item.spriteSourceSize.h = img.height - spaces.top - spaces.bottom;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                item.trimmed = true;\r\n                item.spriteSourceSize.x = 0;\r\n                item.spriteSourceSize.y = 0;\r\n                item.spriteSourceSize.w = 1;\r\n                item.spriteSourceSize.h = 1;\r\n            }\r\n\r\n            if (item.trimmed)\r\n            {\r\n                item.frame.w = item.spriteSourceSize.w;\r\n                item.frame.h = item.spriteSourceSize.h;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Trimmer;\r\n","class TextureRenderer {\r\n\r\n    constructor(data, options = {}) {\r\n        this._buffer = document.createElement(\"canvas\");\r\n\r\n        this.width = 0;\r\n        this.height = 0;\r\n\r\n        this.render(data, options);\r\n    }\r\n\r\n    static getSize(data, options = {}) {\r\n        let width = options.width || 0;\r\n        let height = options.height || 0;\r\n\r\n        let padding = options.padding || 0;\r\n        let extrude = options.extrude || 0;\r\n\r\n        if (!options.fixedSize) {\r\n            width = 0;\r\n            height = 0;\r\n\r\n            for (let item of data) {\r\n\r\n                let w = item.frame.x + item.frame.w;\r\n                let h = item.frame.y + item.frame.h;\r\n\r\n                if (item.rotated) {\r\n                    w = item.frame.x + item.frame.h;\r\n                    h = item.frame.y + item.frame.w;\r\n                }\r\n\r\n                if (w > width) {\r\n                    width = w;\r\n                }\r\n                if (h > height) {\r\n                    height = h;\r\n                }\r\n            }\r\n\r\n            width += padding + extrude;\r\n            height += padding + extrude;\r\n        }\r\n\r\n        if (options.powerOfTwo) {\r\n            let sw = Math.round(Math.log(width) / Math.log(2));\r\n            let sh = Math.round(Math.log(height) / Math.log(2));\r\n\r\n            let pw = Math.pow(2, sw);\r\n            let ph = Math.pow(2, sh);\r\n\r\n            if (pw < width) {\r\n                pw = Math.pow(2, sw + 1);\r\n            }\r\n            if (ph < height) {\r\n                ph = Math.pow(2, sh + 1);\r\n            }\r\n\r\n            width = pw;\r\n            height = ph;\r\n        }\r\n\r\n        return {width, height};\r\n    }\r\n\r\n    render(data, options = {}) {\r\n        let ctx = this._buffer.getContext(\"2d\");\r\n\r\n        let imageSmoothingEnabled = ctx.imageSmoothingEnabled;\r\n        ctx.imageSmoothingEnabled = !options.disableSmoothing;\r\n\r\n        let {width, height} = TextureRenderer.getSize(data, options);\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n        this._buffer.width = width;\r\n        this._buffer.height = height;\r\n\r\n        ctx.clearRect(0, 0, width, height);\r\n\r\n        for (let item of data) {\r\n            this.renderItem(ctx, item, options);\r\n        }\r\n\r\n        ctx.imageSmoothingEnabled = imageSmoothingEnabled;\r\n    }\r\n\r\n    scale(val) {\r\n        if (val === 1) {\r\n            return this._buffer;\r\n        }\r\n\r\n        let tempBuffer = document.createElement(\"canvas\");\r\n        tempBuffer.width = Math.round(this._buffer.width * val) || 1;\r\n        tempBuffer.height = Math.round(this._buffer.height * val) || 1;\r\n\r\n        let tempCtx = tempBuffer.getContext(\"2d\");\r\n        tempCtx.drawImage(this._buffer, 0, 0, this._buffer.width, this._buffer.height, 0, 0, tempBuffer.width, tempBuffer.height);\r\n\r\n        return tempBuffer;\r\n    }\r\n\r\n    renderExtrude(ctx, item, options) {\r\n        if (!options.extrude) {\r\n            return;\r\n        }\r\n\r\n        let imageSmoothingEnabled = ctx.imageSmoothingEnabled;\r\n        ctx.imageSmoothingEnabled = false;\r\n\r\n        let dx = item.frame.x;\r\n        let dy = item.frame.y;\r\n\r\n        if (item.rotated) {\r\n            dx = 0;\r\n            dy = 0;\r\n        }\r\n\r\n        let img = item.image;\r\n\r\n        //Draw corners\r\n        ctx.drawImage(img,\r\n            0, 0,\r\n            1, 1,\r\n            dx - options.extrude, dy - options.extrude,\r\n            options.extrude, options.extrude);\r\n\r\n        ctx.drawImage(img,\r\n            0, item.sourceSize.h - 1,\r\n            1, 1,\r\n            dx - options.extrude, dy + item.frame.h,\r\n            options.extrude, options.extrude);\r\n\r\n        ctx.drawImage(img,\r\n            item.sourceSize.w - 1, 0,\r\n            1, 1,\r\n            dx + item.frame.w, dy - options.extrude,\r\n            options.extrude, options.extrude);\r\n\r\n        ctx.drawImage(img,\r\n            item.sourceSize.w - 1, item.sourceSize.h - 1,\r\n            1, 1,\r\n            dx + item.frame.w, dy + item.frame.h,\r\n            options.extrude, options.extrude);\r\n\r\n        //Draw borders\r\n        ctx.drawImage(img,\r\n            0, item.spriteSourceSize.y,\r\n            1, item.spriteSourceSize.h,\r\n            dx - options.extrude, dy,\r\n            options.extrude, item.frame.h);\r\n\r\n        ctx.drawImage(img,\r\n            item.sourceSize.w - 1, item.spriteSourceSize.y,\r\n            1, item.spriteSourceSize.h,\r\n            dx + item.frame.w, dy,\r\n            options.extrude, item.frame.h);\r\n\r\n        ctx.drawImage(img,\r\n            item.spriteSourceSize.x, 0,\r\n            item.spriteSourceSize.w, 1,\r\n            dx, dy - options.extrude,\r\n            item.frame.w, options.extrude);\r\n\r\n        ctx.drawImage(img,\r\n            item.spriteSourceSize.x, item.sourceSize.h - 1,\r\n            item.spriteSourceSize.w, 1,\r\n            dx, dy + item.frame.h,\r\n            item.frame.w, options.extrude);\r\n\r\n        ctx.imageSmoothingEnabled = imageSmoothingEnabled;\r\n    }\r\n\r\n    renderItem(ctx, item, options) {\r\n        if (!item.skipRender) {\r\n\r\n            let img = item.image;\r\n\r\n            if (item.rotated) {\r\n                ctx.save();\r\n                ctx.translate(item.frame.x + item.frame.h, item.frame.y);\r\n\r\n                ctx.rotate(Math.PI / 2);\r\n\r\n                this.renderExtrude(ctx, item, options);\r\n\r\n                ctx.drawImage(img,\r\n                    item.spriteSourceSize.x, item.spriteSourceSize.y,\r\n                    item.spriteSourceSize.w, item.spriteSourceSize.h,\r\n                    0, 0,\r\n                    item.frame.w, item.frame.h);\r\n\r\n                ctx.restore();\r\n            }\r\n            else {\r\n                this.renderExtrude(ctx, item, options);\r\n\r\n                ctx.drawImage(img,\r\n                    item.spriteSourceSize.x, item.spriteSourceSize.y,\r\n                    item.spriteSourceSize.w, item.spriteSourceSize.h,\r\n                    item.frame.x, item.frame.y,\r\n                    item.frame.w, item.frame.h);\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    get buffer() {\r\n        return this._buffer;\r\n    }\r\n}\r\n\r\nexport default TextureRenderer;\r\n","import MaxRectsBinPack from './packers/MaxRectsBin';\r\nimport OptimalPacker from './packers/OptimalPacker';\r\nimport allPackers from './packers';\r\nimport Trimmer from \"./Trimmer\";\r\nimport TextureRenderer from '../../utils/TextureRenderer';\r\n\r\n//import I18 from './utils/I18';\r\n\r\nclass PackProcessor\r\n{\r\n    static detectIdentical(rects)\r\n    {\r\n        let identical = [];\r\n\r\n        for (let i = 0; i < rects.length; i++)\r\n        {\r\n            let rect1 = rects[i];\r\n            for (let n = i + 1; n < rects.length; n++)\r\n            {\r\n                let rect2 = rects[n];\r\n                if (rect1.image._base64 === rect2.image._base64 && identical.indexOf(rect2) < 0)\r\n                {\r\n                    rect2.identical = rect1;\r\n                    identical.push(rect2);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let rect of identical)\r\n        {\r\n            rects.splice(rects.indexOf(rect), 1);\r\n        }\r\n\r\n        return {\r\n            rects: rects,\r\n            identical: identical\r\n        }\r\n    }\r\n\r\n    static applyIdentical(rects, identical)\r\n    {\r\n        let clones = [];\r\n        let removeIdentical = [];\r\n\r\n        for (let item of identical)\r\n        {\r\n            let ix = rects.indexOf(item.identical);\r\n            if (ix >= 0)\r\n            {\r\n                let rect = rects[ix];\r\n\r\n                let clone = Object.assign({}, rect);\r\n\r\n                clone.name = item.name;\r\n                clone.image = item.image;\r\n                clone.originalFile = item.file;\r\n                clone.skipRender = true;\r\n\r\n                removeIdentical.push(item);\r\n                clones.push(clone);\r\n            }\r\n        }\r\n\r\n        for (let item of removeIdentical)\r\n        {\r\n            identical.splice(identical.indexOf(item), 1);\r\n        }\r\n\r\n        for (let item of clones)\r\n        {\r\n            item.cloned = true;\r\n            rects.push(item);\r\n        }\r\n\r\n        return rects;\r\n    }\r\n\r\n    static pack(images = {}, options = {}, onComplete = null, onError = null)\r\n    {\r\n        let rects = [];\r\n\r\n        let padding = options.padding || 0;\r\n        let extrude = options.extrude || 0;\r\n\r\n        let maxWidth = 0, maxHeight = 0;\r\n        let minWidth = 0, minHeight = 0;\r\n\r\n        let alphaThreshold = options.alphaThreshold || 0;\r\n        if (alphaThreshold > 255)\r\n        {\r\n            alphaThreshold = 255;\r\n        }\r\n\r\n        let names = Object.keys(images)\r\n            .sort();\r\n\r\n        for (let key of names)\r\n        {\r\n            let img = images[key];\r\n\r\n            maxWidth += img.width;\r\n            maxHeight += img.height;\r\n\r\n            if (img.width > minWidth)\r\n            {\r\n                minWidth = img.width + padding * 2 + extrude * 2;\r\n            }\r\n            if (img.height > minHeight)\r\n            {\r\n                minHeight = img.height + padding * 2 + extrude * 2;\r\n            }\r\n\r\n            rects.push({\r\n                frame: {x: 0, y: 0, w: img.width, h: img.height},\r\n                rotated: false,\r\n                trimmed: false,\r\n                spriteSourceSize: {x: 0, y: 0, w: img.width, h: img.height},\r\n                sourceSize: {w: img.width, h: img.height},\r\n                charId: key,\r\n                file: img._fontName,\r\n                image: img\r\n            });\r\n        }\r\n\r\n        let width = options.width || 0;\r\n        let height = options.height || 0;\r\n\r\n        if (!width)\r\n        {\r\n            width = maxWidth;\r\n        }\r\n        if (!height)\r\n        {\r\n            height = maxHeight;\r\n        }\r\n\r\n        if (options.powerOfTwo)\r\n        {\r\n            let sw = Math.round(Math.log(width) / Math.log(2));\r\n            let sh = Math.round(Math.log(height) / Math.log(2));\r\n\r\n            let pw = Math.pow(2, sw);\r\n            let ph = Math.pow(2, sh);\r\n\r\n            if (pw < width)\r\n            {\r\n                pw = Math.pow(2, sw + 1);\r\n            }\r\n            if (ph < height)\r\n            {\r\n                ph = Math.pow(2, sh + 1);\r\n            }\r\n\r\n            width = pw;\r\n            height = ph;\r\n        }\r\n\r\n        if (width < minWidth || height < minHeight)\r\n        {\r\n            if (onError)\r\n            {\r\n                console.error(\"INVALID_SIZE_ERROR\", minWidth, minHeight);\r\n                onError({\r\n                    //description: I18.f(\"INVALID_SIZE_ERROR\", minWidth, minHeight)\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (options.allowTrim)\r\n        {\r\n            Trimmer.trim(rects, alphaThreshold);\r\n        }\r\n\r\n        for (let item of rects)\r\n        {\r\n            item.frame.w += padding * 2 + extrude * 2;\r\n            item.frame.h += padding * 2 + extrude * 2;\r\n        }\r\n\r\n        let identical = [];\r\n\r\n        if (options.detectIdentical)\r\n        {\r\n            let res = PackProcessor.detectIdentical(rects);\r\n\r\n            rects = res.rects;\r\n            identical = res.identical;\r\n        }\r\n\r\n        let getAllPackers = () =>\r\n        {\r\n            let methods = [];\r\n            for (let packerClass of allPackers)\r\n            {\r\n                if (packerClass !== OptimalPacker)\r\n                {\r\n                    for (let method in packerClass.methods)\r\n                    {\r\n                        methods.push({packerClass, packerMethod: packerClass.methods[method], allowRotation: false});\r\n                        methods.push({packerClass, packerMethod: packerClass.methods[method], allowRotation: true});\r\n                    }\r\n                }\r\n            }\r\n            return methods;\r\n        };\r\n\r\n        let packerClass = options.packer || MaxRectsBinPack;\r\n        let packerMethod = options.packerMethod || MaxRectsBinPack.methods.BestShortSideFit;\r\n        let packerCombos = (packerClass === OptimalPacker) ? getAllPackers() : [{\r\n            packerClass,\r\n            packerMethod,\r\n            allowRotation: options.allowRotation\r\n        }];\r\n\r\n        let optimalRes;\r\n        let optimalSheets = Infinity;\r\n        let optimalEfficiency = 0;\r\n\r\n        let sourceArea = 0;\r\n        for (let rect of rects)\r\n        {\r\n            sourceArea += rect.sourceSize.w * rect.sourceSize.h;\r\n        }\r\n\r\n        for (let combo of packerCombos)\r\n        {\r\n            let res = [];\r\n            let sheetArea = 0;\r\n\r\n            // duplicate rects if more than 1 combo since the array is mutated in pack()\r\n            let _rects = packerCombos.length > 1 ? rects.map(rect =>\r\n            {\r\n                return Object.assign({}, rect, {\r\n                    frame: Object.assign({}, rect.frame),\r\n                    spriteSourceSize: Object.assign({}, rect.spriteSourceSize),\r\n                    sourceSize: Object.assign({}, rect.sourceSize)\r\n                });\r\n            }) : rects;\r\n\r\n            // duplicate identical if more than 1 combo and fix references to point to the\r\n            //  cloned rects since the array is mutated in applyIdentical()\r\n            let _identical = packerCombos.length > 1 ? identical.map(rect =>\r\n            {\r\n                for (let rect2 of _rects)\r\n                {\r\n                    if (rect.identical.image._base64 == rect2.image._base64)\r\n                    {\r\n                        return Object.assign({}, rect, {identical: rect2});\r\n                    }\r\n                }\r\n            }) : identical;\r\n\r\n            while (_rects.length)\r\n            {\r\n                let packer = new combo.packerClass(width, height, combo.allowRotation);\r\n                let result = packer.pack(_rects, combo.packerMethod);\r\n\r\n                for (let item of result)\r\n                {\r\n                    item.frame.x += padding + extrude;\r\n                    item.frame.y += padding + extrude;\r\n                    item.frame.w -= padding * 2 + extrude * 2;\r\n                    item.frame.h -= padding * 2 + extrude * 2;\r\n                }\r\n\r\n                if (options.detectIdentical)\r\n                {\r\n                    result = PackProcessor.applyIdentical(result, _identical);\r\n                }\r\n\r\n                res.push(result);\r\n\r\n                for (let item of result)\r\n                {\r\n                    this.removeRect(_rects, item.charId);\r\n                }\r\n\r\n                let {width: sheetWidth, height: sheetHeight} = TextureRenderer.getSize(result, options);\r\n                sheetArea += sheetWidth * sheetHeight;\r\n            }\r\n\r\n            let sheets = res.length;\r\n            let efficiency = sourceArea / sheetArea;\r\n\r\n            if (sheets < optimalSheets || (sheets === optimalSheets && efficiency > optimalEfficiency))\r\n            {\r\n                optimalRes = res;\r\n                optimalSheets = sheets;\r\n                optimalEfficiency = efficiency;\r\n            }\r\n        }\r\n\r\n        if (onComplete)\r\n        {\r\n            onComplete(optimalRes);\r\n        }\r\n    }\r\n\r\n    static removeRect(rects, charId)\r\n    {\r\n        for (let i = 0; i < rects.length; i++)\r\n        {\r\n            if (rects[i].charId === charId)\r\n            {\r\n                rects.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default PackProcessor;\r\n","export default __webpack_public_path__ + \"static/media/loading.11c144ca.gif\";","import React, {Component} from \"react\";\r\nimport {EVENT, Observer} from \"../../utils/Observer\";\r\nimport {POPUP} from \"./PopupType\";\r\n\r\nimport loading from '../../images/loading.gif';\r\nimport error from '../../images/error.png';\r\nimport logo from '../../images/logo_app.png';\r\nimport appInfo from '../../../package.json';\r\n\r\nimport '../../styles/popup.css';\r\n\r\nclass Popup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // Bind\r\n        this.onShowPopup = this.onShowPopup.bind(this);\r\n        this.onClosePopup = this.onClosePopup.bind(this);\r\n\r\n        // Listeners\r\n        Observer.on(EVENT.SHOW_POPUP, this.onShowPopup);\r\n        Observer.on(EVENT.CLOSE_POPUP, this.onClosePopup);\r\n\r\n        // Message\r\n        this.state = {\r\n            type: null,\r\n            message: ''\r\n        };\r\n    }\r\n\r\n    onClosePopup(event) {\r\n        this.setState({\r\n            type: null\r\n        });\r\n    }\r\n\r\n    onShowPopup(data) {\r\n        this.setState({\r\n            message: data.message,\r\n            type: data.type\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let popup = <div></div>;\r\n        if ( this.state.type ) {\r\n            switch (this.state.type) {\r\n                case POPUP.ABOUT: {\r\n                    popup = <div className=\"popup\">\r\n                        <div className=\"popup-box popup-box-about\">\r\n                            <div className=\"popup-about-logo\">\r\n                                <img src={logo} alt=\"logo\" />\r\n                            </div>\r\n                            <div className=\"popup-about-title popup-about-content\">\r\n                                MultiFont Packer {appInfo.version}\r\n                            </div>\r\n                            <hr/>\r\n                            <table className=\"popup-about-content\">\r\n                                <tbody>\r\n                                <tr>\r\n                                    <td>GitHub</td>\r\n                                    <td><a href={appInfo.github} target=\"_blank\">{appInfo.github}</a></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Issues</td>\r\n                                    <td><a href={appInfo.issues} target=\"_blank\">{appInfo.issues}</a></td>\r\n                                </tr>\r\n\r\n                                <tr>\r\n                                    <td>Libs</td>\r\n                                    <td>\r\n                                        <div>\r\n                                            <a href=\"https://facebook.github.io/react\" target=\"_blank\">React</a>\r\n                                        </div>\r\n                                        <div>\r\n                                            <a href=\"https://stuk.github.io/jszip\" target=\"_blank\">JSZip</a>\r\n                                        </div>\r\n                                        <div>\r\n                                            <a href=\"https://github.com/eligrey/FileSaver.js\" target=\"_blank\">FileSaver.js</a>\r\n                                        </div>\r\n                                        <div>\r\n                                            <a href=\"https://github.com/janl/mustache.js\" target=\"_blank\">mustache.js</a>\r\n                                        </div>\r\n                                        <div>\r\n                                            <a href=\"https://github.com/06wj/MaxRectsBinPack\" target=\"_blank\">MaxRectsBinPack</a>\r\n                                        </div>\r\n                                        <div>\r\n                                            <a href=\"https://www.npmjs.com/package/maxrects-packer\" target=\"_blank\">MaxRectsPacker</a>\r\n                                        </div>\r\n                                        <div>\r\n                                            <a href=\"http://free-tex-packer.com/\" target=\"_blank\">Free Texture Packer</a>\r\n                                        </div>\r\n                                        <div>\r\n                                            <a href=\"https://github.com/bmarwane/spriteSplitter\" target=\"_blank\">Sprite Splitter</a>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                                <tr>\r\n                                    <td>Contributors</td>\r\n                                    <td>\r\n                                        Rubn Taln\r\n                                    </td>\r\n                                </tr>\r\n                                </tbody>\r\n                            </table>\r\n                            <div>\r\n                                <button className=\"app-button\" onClick={this.onClosePopup}>OK</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>;\r\n                    break;\r\n                }\r\n                case POPUP.LOADING: {\r\n                    popup = <div className=\"popup\">\r\n                        <div className=\"popup-box popup-box-message\">\r\n                            <div className=\"popup-box-center popup-box-row\">\r\n                                <img src={loading} alt=\"loading\" />\r\n                            </div>\r\n                            <div className=\"popup-box-center popup-box-row\">\r\n                                {this.state.message}\r\n                            </div>\r\n                        </div>\r\n                    </div>;\r\n                    break;\r\n                }\r\n\r\n                case POPUP.ERROR_EXPORTING: {\r\n                    popup = <div className=\"popup\">\r\n                        <div className=\"popup-box popup-box-message\">\r\n                            <div className=\"popup-box-center popup-box-col\">\r\n                                <div className=\"popup-icon\">\r\n                                    <img alt=\"error\" src={error} />\r\n                                </div>\r\n                                {this.state.message}\r\n                            </div>\r\n                            <div className=\"popup-box-center popup-box-col\">\r\n                                <button className=\"app-button\" onClick={this.onClosePopup}>OK</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>;\r\n                    break;\r\n                }\r\n\r\n                case POPUP.WARNING: {\r\n                    popup = <div className=\"popup\">\r\n                        <div className=\"popup-box popup-box-message\">\r\n                            <div className=\"popup-box-center popup-box-col\">\r\n                                {this.state.message}\r\n                            </div>\r\n                            <div className=\"popup-box-center popup-box-col\">\r\n                                <button className=\"app-button\" onClick={this.onClosePopup}>OK</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>;\r\n                    break;\r\n                }\r\n\r\n                default: {\r\n                    popup = <div></div>;\r\n                }\r\n            }\r\n        }\r\n        return (\r\n            <div>{popup}</div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Popup;\r\n","import {EVENT, Observer} from \"./utils/Observer\";\n\nimport React, {Component} from 'react';\nimport Header from \"./components/header/Header\";\nimport Viewer from \"./components/main/Viewer\";\nimport AtlasList from \"./components/main/atlas/AtlasList\";\nimport Properties from \"./components/main/Properties\";\nimport SpriteSplitter from \"./utils/SpriteSplitter\";\nimport BitmapFontData from \"./model/BitmapFontData\";\nimport PackProcessor from \"./utils/packing/PackProcessor\";\nimport TextureRenderer from \"./utils/TextureRenderer\";\nimport Exporter from \"./utils/exporter/Export\";\nimport Popup from \"./components/popups/Popup\";\nimport {POPUP} from \"./components/popups/PopupType\";\n\nimport './styles/app.css';\n\n//import Tesseract from 'tesseract.js/dist/tesseract.min';\n//import { createWorker } from 'tesseract.js';\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        // Bind\n        this.onAtlasListChanged = this.onAtlasListChanged.bind(this);\n        this.onCharImageLoaded = this.onCharImageLoaded.bind(this);\n        this.onPackOptionsChanged = this.onPackOptionsChanged.bind(this);\n        this.startExport = this.startExport.bind(this);\n        this.onFontSelected = this.onFontSelected.bind(this);\n\n        // Data\n        this._bitmapFonts = {};\n\n        // Packing algorithm result\n        this._packResult = null;\n\n        // charas images\n        this._packCharas = null;\n\n        // Packing Options\n        this._packOptions = {};\n\n        // Tools\n        this._spriteSplitter = new SpriteSplitter();\n\n        this._totalCharasToLoad = 0;\n        this._numCharasLoaded = 0;\n\n        this._selectedFont = null;\n\n        // Global Listeners\n        Observer.on(EVENT.ATLAS_LIST_CHANGED, this.onAtlasListChanged);\n        Observer.on(EVENT.PACK_OPTIONS_CHANGED, this.onPackOptionsChanged);\n        Observer.on(EVENT.START_EXPORT, this.startExport);\n        Observer.on(EVENT.FONT_SELECTED, this.onFontSelected);\n    }\n\n    onFontSelected(data) {\n        this._selectedFont = data.selectedFont;\n\n        this._packCharas = this.getImageCharas();\n        this.doPack();\n    }\n\n    onPackOptionsChanged(data) {\n        this._packOptions = data;\n\n        if (data.selectedFont) {\n            this._selectedFont = data.selectedFont;\n        }\n\n        this._packCharas = this.getImageCharas();\n        this.doPack();\n    }\n\n    onAtlasListChanged(data) {\n        let listCharas = [];\n\n        for (const fontName in data) {\n            if (data.hasOwnProperty(fontName)) {\n                const img = data[fontName];\n\n                if (!this._bitmapFonts.hasOwnProperty(fontName)) {\n                    this._bitmapFonts[fontName] = new BitmapFontData(fontName, img);\n\n                    let charas = this._spriteSplitter.split(img, fontName);\n                    this._totalCharasToLoad += charas.length;\n\n                    this._bitmapFonts[fontName].characters = charas;\n                    listCharas = listCharas.concat(charas);\n                }\n            }\n        }\n\n        /// Test Tesseract\n\n        // Tesseract.recognize(\n        //     listCharas[0].imagedata,\n        //     'eng',\n        //     { logger: m => console.log(m) }\n        // ).then(({ data: { text } }) => {\n        //     console.log(text);\n        // });\n\n        // const worker = createWorker({\n        //     logger: m => console.log(m)\n        // });\n        //\n        // (async () => {\n        //     await worker.load();\n        //     await worker.loadLanguage('eng');\n        //     await worker.initialize('eng');\n        //     const { data: { text } } = await worker.recognize(listCharas[0].imagedata);\n        //     console.log(text);\n        //     await worker.terminate();\n        // })();\n\n        ///\n\n        const auxCanvas = document.createElement('canvas');\n        const auxCtx = auxCanvas.getContext('2d');\n\n        const len = listCharas.length;\n        let i;\n\n        for (i = 0; i < len; i++) {\n            auxCanvas.width = listCharas[i].imagedata.width;\n            auxCanvas.height = listCharas[i].imagedata.height;\n\n            auxCtx.putImageData(listCharas[i].imagedata, 0, 0);\n\n            let image = new Image();\n\n            this._bitmapFonts[listCharas[i].fontName].characters[listCharas[i].id].image = image;\n\n            image.addEventListener('load', this.onCharImageLoaded);\n            image._base64 = auxCanvas.toDataURL(); // ToDo\n            image._id = listCharas[i].id;\n            image._fontName = listCharas[i].fontName;\n            image.width = listCharas[i].imagedata.width;\n            image.height = listCharas[i].imagedata.height;\n            image.src = auxCanvas.toDataURL();\n        }\n    }\n\n    onCharImageLoaded(event) {\n        event.target.removeEventListener('load', this.onCharImageLoaded);\n        this._numCharasLoaded++;\n\n        if (this._numCharasLoaded === this._totalCharasToLoad) {\n            this._totalCharasToLoad = 0; // reset\n            this._numCharasLoaded = 0;\n\n            // It's firts load, then, load firts font.\n            if (!this._selectedFont) {\n                this._selectedFont = Object.keys(this._bitmapFonts)[0];\n                this._packOptions.selectedFont = this._selectedFont;\n\n                Observer.emit(EVENT.FONT_SELECTED, {\n                    selectedFont: this._selectedFont\n                });\n            }\n\n            this._packCharas = this.getImageCharas();\n            this.doPack();\n        }\n    }\n\n    getImageCharas() {\n        if (!this._selectedFont) {\n            return;\n        }\n\n        let data = {};\n\n        if (this._packOptions.multiFont) {\n            for (const fontName in this._bitmapFonts) {\n                for (const charId in this._bitmapFonts[fontName].characters) {\n                    if (this._bitmapFonts[fontName].characters.hasOwnProperty(charId)) {\n                        data[charId] = this._bitmapFonts[fontName].characters[charId].image;\n                    }\n                }\n            }\n        }\n        else {\n            for (const charId in this._bitmapFonts[this._selectedFont].characters) {\n                if (this._bitmapFonts[this._selectedFont].characters.hasOwnProperty(charId)) {\n                    data[charId] = this._bitmapFonts[this._selectedFont].characters[charId].image;\n                }\n            }\n        }\n\n        return data;\n    }\n\n    updateBitmapFonts(data) {\n        let i;\n        const len = data.length;\n\n        for (i = 0; i < len; i++) {\n            const fontId = data[i].file;\n            const charId = data[i].charId;\n\n            this._bitmapFonts[fontId].characters[charId].frame.x = data[i].frame.x;\n            this._bitmapFonts[fontId].characters[charId].frame.y = data[i].frame.y;\n            this._bitmapFonts[fontId].characters[charId].frame.w = data[i].frame.w;\n            this._bitmapFonts[fontId].characters[charId].frame.h = data[i].frame.h;\n            this._bitmapFonts[fontId].characters[charId].sourceSize.w = data[i].sourceSize.w;\n            this._bitmapFonts[fontId].characters[charId].sourceSize.h = data[i].sourceSize.h;\n            this._bitmapFonts[fontId].characters[charId].spriteSourceSize.x = data[i].spriteSourceSize.x;\n            this._bitmapFonts[fontId].characters[charId].spriteSourceSize.y = data[i].spriteSourceSize.y;\n            this._bitmapFonts[fontId].characters[charId].spriteSourceSize.w = data[i].spriteSourceSize.w;\n            this._bitmapFonts[fontId].characters[charId].spriteSourceSize.h = data[i].spriteSourceSize.h;\n            this._bitmapFonts[fontId].characters[charId].rotated = data[i].rotated;\n        }\n    }\n\n    doPack() {\n        if (this._packCharas == null) {\n            return;\n        }\n\n        const keys = Object.keys(this._packCharas);\n\n        if (keys.length > 0) {\n            PackProcessor.pack(this._packCharas, this._packOptions, (res) => {\n                this._packResult = [];\n\n                for (let data of res) {\n                    let renderer = new TextureRenderer(data, this._packOptions);\n\n                    this.updateBitmapFonts(data);\n\n                    this._packResult.push({\n                        buffer: renderer.buffer,\n                        renderer: renderer,\n                        multifont: this._packOptions.multiFont,\n                        selectedFont: this._selectedFont\n                    });\n                }\n\n                Observer.emit(EVENT.PACK_COMPLETED, this._packResult);\n                Observer.emit(EVENT.CLOSE_POPUP);\n\n            }, null);\n        }\n    }\n\n    startExport() {\n        if ( this._packResult && this._packResult.length > 0 ) {\n            try {\n                let promise = Exporter.startExporter(this._packResult[0].buffer,\n                    this._bitmapFonts,\n                    this._packOptions);\n            }\n            catch (e) {\n                Observer.emit(EVENT.SHOW_POPUP, {\n                    message: 'Error exporting...',\n                    type: POPUP.ERROR_EXPORTING\n                });\n            }\n        }\n        else {\n            Observer.emit(EVENT.SHOW_POPUP, {\n                message: 'Please, add images first',\n                type: POPUP.WARNING\n            });\n        }\n\n\n    }\n\n    render() {\n        return (\n            <div className=\"app-main\">\n                <div className=\"app-wrapper\">\n                    <Header/>\n                    <div className=\"app-layout\">\n                        <AtlasList/>\n                        <Properties bitmapfonts={this._bitmapFonts}/>\n                        <Viewer bitmapfonts={this._bitmapFonts}/>\n                        <Popup />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}